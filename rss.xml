<?xml version="1.0" encoding="utf-8"?><rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Evergarden</title><link>https://ioyoi.me/</link><description>Evergarden is a blog written by EvernessW.</description><generator>Hugo 0.111.3 https://gohugo.io/</generator><language>zh-CN</language><managingEditor>3verness@gmail.com (EvernessW)</managingEditor><webMaster>3verness@gmail.com (EvernessW)</webMaster><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><lastBuildDate>Wed, 05 Apr 2023 17:02:41 +0000</lastBuildDate><atom:link rel="self" type="application/rss+xml" href="https://ioyoi.me/rss.xml"/><item><title>永磁同步电机的闭环控制·PMSM电机与坐标变换</title><link>https://ioyoi.me/tech/pmsm-1/</link><guid isPermaLink="true">https://ioyoi.me/tech/pmsm-1/</guid><pubDate>Wed, 05 Apr 2023 22:45:14 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;h2 id="永磁同步电机原理">永磁同步电机原理&lt;/h2>
&lt;p>永磁同步电机（&lt;strong>P&lt;/strong>ermanent &lt;strong>M&lt;/strong>agnet &lt;strong>S&lt;/strong>ynchronous &lt;strong>M&lt;/strong>otor）是工业应用中一种常见的电机，其结构由永磁体转子与线圈定子组成，线圈通入交变电流时产生交变磁场，永磁体转子产生定向磁场，两磁场相互作用，引导永磁体转子指向旋转磁场方向，实现转子转动。&lt;/p>
&lt;p>永磁同步电机的运行依赖磁场的同步，稳定运行时，转子与定子磁场同步转动，如果定子速度慢于磁场旋转速度，磁场力引导转子加速，反之则引导转子减速，并最终实现速度的同步。&lt;/p>
&lt;h2 id="永磁同步电机中的坐标系">永磁同步电机中的坐标系&lt;/h2>
&lt;p>永磁同步电机控制中通常会使用三种坐标系，分别为ABC坐标系、αβ坐标系和dq坐标系。&lt;sup id="fnref:1">&lt;a href="https://ioyoi.me/tech/pmsm-1/#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20230405230357.webp" alt="Illustration-of-the-salient-pole-permanent-magnet-synchronous-motor-PMSM-model" title="PMSM电机中的三个坐标系">&lt;/p>
&lt;ul>
&lt;li>ABC坐标系由三项定子线圈产生的磁场方向确定，坐标轴两两相隔120°，为固定坐标系；&lt;/li>
&lt;li>αβ坐标系是ABC坐标系对应的直角坐标系，无实际物理意义，其α轴与A轴重合，β轴超前α轴90°，同样为固定坐标系；&lt;/li>
&lt;li>dq坐标系由永磁体转子磁场方向确定，d轴平行于永磁体磁场而q轴垂直于永磁体磁场，该坐标系随转子旋转而转动，其中d轴与α轴的夹角即为电机的电气角。&lt;/li>
&lt;/ul>
&lt;p>三种坐标系依照平行四边形法则进行向量合成与分解，实现两两转换，其转换关系如下图所示：&lt;/p>
&lt;div class="mermaid" align="center">
graph LR;
A[ABC]--Clark-->B[αβ]
B--anti-Clark-->A
B--Park-->C[dq]
C--anti-Park-->B
&lt;/div>
&lt;ul>
&lt;li>
&lt;p>Clark变换
$$
\left[\begin{array}{c}f_\alpha\\f_\beta\end{array}\right]=\frac{2}{3}\left[\begin{array}{ccc}1&amp;amp;-\frac{1}{2}&amp;amp;-\frac{1}{2}\\0&amp;amp;\frac{\sqrt 3}{2}&amp;amp;-\frac{\sqrt3}{2}\end{array}\right]\left[\begin{array}{c}f_A\\f_B\\f_C\end{array}\right]
$$
&lt;div class="note primary">&lt;p>&lt;strong>如何理解系数2/3？&lt;/strong>&lt;/p>
&lt;p>ABC三轴上的电压/电流均为交流量，以平衡三相电举例，若直接合成：
$$
\begin{aligned}
f_\alpha&amp;amp;=U\cos( \omega t)-\frac{1}{2}U\cos (\omega t-2\pi/3)-\frac12U\cos(\omega t+2\pi/3)\\
&amp;amp;=U\cos (\omega t)(1-\cos2\pi/3)\\
&amp;amp;=\frac{3}{2}U\cos (\omega t)\\
f_\beta&amp;amp;=\frac{\sqrt3}{2}U\cos (\omega t-2\pi/3)-\frac{\sqrt3}{2}U\cos (\omega t+2\pi/3)\\
&amp;amp;=\frac{\sqrt3}{2}U\sin(\omega t)(-2\sin2\pi/3)\\
&amp;amp;=\frac{3}{2}U\sin(\omega t)
\end{aligned}
$$
注意到合成后两轴上的电压/电流无论是幅值还是功率都与原三项交流量不同，而在实际应用中我们希望控制变换前后轴上幅值或功率保持不变，因此若控制幅值不变，需乘系数2/3，而控制功率不变时，则需乘系数$\sqrt6/3$。&lt;/p>&lt;/div>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>反Clark变换
$$
\left[\begin{array}{c}f_A\\f_B\\f_C\end{array}\right]=\left[\begin{array}{cc}1&amp;amp;0\\-\frac{1}{2}&amp;amp;\frac{\sqrt3}{2}\\-\frac{1}{2}&amp;amp;\frac{\sqrt3}{2}\end{array}\right]\left[\begin{array}{c}f_\alpha\\f_\beta\end{array}\right]
$$
与Clark变换相同，这里给出的是等幅值变换的公式，若进行等功率变换，需乘系数$\sqrt6/3$。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Park变换&lt;/p>
&lt;p>与电机电气角$\theta_e$有关：
$$
\left[\begin{array}{c}f_d\\f_q\end{array}\right]=\left[\begin{array}{cc}\cos \theta_e&amp;amp;\sin \theta_e\\-\sin \theta_e&amp;amp;\cos\theta_e\end{array}\right]\left[\begin{array}{c}f_\alpha\\f_\beta\end{array}\right]
$$
&lt;div class="note primary">&lt;p>&lt;strong>电气角与机械角&lt;/strong>&lt;/p>
&lt;p>注意这里的电气角$\theta_e$与机械角$\theta_m$不同，其之间的转换关系与电机级对数$p$有关：
$$
\theta_e=p\theta_m
$$
&lt;img src="https://img.ioyoi.me/20230405234330.webp" alt="img" title="PMSM电机电气角与机械角的关系（图中p定义为电机级数）">&lt;/p>
&lt;p>这是由于永磁体转子中往往不止包含一对磁极，因此对于一个包含$p$对磁极的转子来说，当其旋转$2\pi/p$时，其磁场便完成了一个周期的旋转，因此电气角和机械角存在$p$倍的对应关系。&lt;/p>&lt;/div>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>反Park变换
$$
\left[\begin{array}{c}f_\alpha\\f_\beta\end{array}\right]=\left[\begin{array}{cc}\cos \theta_e&amp;amp;-\sin \theta_e\\\sin \theta_e&amp;amp;\cos\theta_e\end{array}\right]
$$&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="永磁同步电机的数学模型">永磁同步电机的数学模型&lt;/h2>
&lt;p>依照永磁同步电机的原理，可以将PMSM电机的运行过程分解为以下三个模型：电气模型、磁链模型和机械模型。&lt;/p>
&lt;p>其中$u_d,u_q$为dq轴上定子电压分量，$i_d,i_q$为电流分量，$R$为定子电阻，$\psi_d,\psi_q$为定子磁链的分量，$\omega_e$为电气角速度，$L_d,L_q$为轴上电感分量，$\psi_f$为永磁体磁链，$\omega_m$为机械角速度，$J$为转动惯量，$T_m$为负载力矩，$b_m$为摩擦系数。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>电气模型：同步电机两轴电压由电阻压降与反电动势组成，而反电动势依照来源可划分为轴上磁通变化感生电动势和磁场夹角变化感生电动势，具体可写作：
$$
\begin{aligned}
u_d&amp;amp;=Ri_d+\frac{d}{dt}\psi_d-\omega_e\psi_q\\
u_q&amp;amp;=Ri_q+\frac{d}{dt}\psi_q+\omega_e\psi_d
\end{aligned}
$$&lt;/p>
&lt;/li>
&lt;li>
&lt;p>磁链模型：如原理部分所述，磁场包括永磁体磁场和线圈感生磁场，其中永磁体磁场仅加载在平行于永磁体的d轴：
$$
\begin{aligned}
\psi_d&amp;amp;=L_di_d+\psi_f\\
\psi_q&amp;amp;=L_qi_q
\end{aligned}
$$
将磁链模型带入电气模型中得到：
$$
\begin{aligned}
u_d&amp;amp;=Ri_d+L_d\frac{di_d}{dt}-\omega_e L_qi_q\\
u_q&amp;amp;=Ri_q+L_q\frac{di_q}{dt}+\omega_eL_di_d+\omega_e\psi_f
\end{aligned}
$$&lt;/p>
&lt;/li>
&lt;li>
&lt;p>机械模型：PMSM电机的动力矩由洛伦兹力产生，其公式为：
$$
T_e=\frac{3}{2}pi_q\left[i_d\left(L_d-L_q\right)+\psi_f\right]
$$
特别地，对于表贴式电机而言，其交直轴的磁阻差异很小，因此交直轴电感差异也很小，可认为$L_d=L_q$，因此动力矩公式简化为：
$$
T_e=\frac{3}{2}pi_q\psi_f
$$
&lt;div class="note primary">&lt;p>&lt;strong>动力矩的推导公式&lt;/strong>&lt;/p>
&lt;p>由右手定则判断，在dq坐标系下，d轴电流受到的力矩为逆时针（正），q轴电流受到的力矩为顺时针（负），因此在固定坐标系下，依照作用力与反作用力，可知d轴电流对转子提供阻力矩，而q轴电流提供动力矩，则有：
$$
\begin{aligned}
T_e&amp;amp;=\frac{3}{2}p(\psi_di_q-\psi_qi_d)\\&amp;amp;=\frac{3}{2}p(L_di_di_q+\psi_fi_q-L_qi_qi_d)\\&amp;amp;=\frac{3}{2}pi_q\left[i_d\left(L_d-L_q\right)+\psi_f\right]
\end{aligned}
$$&lt;/p>&lt;/div>&lt;/p>
&lt;p>除洛伦兹力外，转子还可能会受到负载产生的阻力矩和摩擦带来的阻力矩，最终牛顿第二定律得：
$$
T_e-b_m\omega_m-T_m=J\frac{d\omega_m}{dt}
$$&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>结合以上三个模型，即可完整描述出永磁同步电机的工作原理。&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a href="https://www.researchgate.net/publication/327634712_Full-Speed_Range_Encoderless_Control_for_Salient-Pole_PMSM_with_a_Novel_Full-Order_SMO">https://www.researchgate.net/publication/327634712_Full-Speed_Range_Encoderless_Control_for_Salient-Pole_PMSM_with_a_Novel_Full-Order_SMO&lt;/a>&amp;#160;&lt;a href="https://ioyoi.me/tech/pmsm-1/#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/motor/">motor</category></item><item><title>PYNQ学习·第一个IP核</title><link>https://ioyoi.me/tech/pynq-1-verilog-ip/</link><guid isPermaLink="true">https://ioyoi.me/tech/pynq-1-verilog-ip/</guid><pubDate>Tue, 14 Mar 2023 12:21:12 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>最近我开始学习PYNQ板和Vivado开发流程，与之前接触的Quartus开发流程不同，Vivado开发主要集中在IP核的设计和集成上，通过IP核的调用连接实现目标功能。在查阅资料的过程中，我发现大部分PYNQ的入门教程都使用HLS高级语言综合作为起步项目，而基于Verilog等RTL原语开发的教程较少。此外，一些教程已经过时，不再适用于当前的软件版本。因此，我写下这篇文章，记录我作为新手小白的学习经验。&lt;/p>
&lt;div class="note success">&lt;p>本文教程适用于Vivado 2022.1，并在搭载v3.0.1镜像的PYNQ-Z1板上验证可用。&lt;/p>&lt;/div>
&lt;h2 id="前期准备">前期准备&lt;/h2>
&lt;p>关于PYNQ板的连接和启动，官网已有&lt;a href="https://pynq.readthedocs.io/en/latest/getting_started/pynq_z1_setup.html">详细说明&lt;/a>，这里不再赘述。&lt;/p>
&lt;p>为在Vivado中导入PYNQ Z1开发板，需要先下载&lt;a href="https://raw.githubusercontent.com/cathalmccabe/pynq-z1_board_files/master/pynq-z1.zip">开发板信息文件&lt;/a>，并将其放置在&lt;code>{Vivado Dir}\data\xhub\boards\XilinxBoardStore\boards\Xilinx&lt;/code>目录下。&lt;/p>
&lt;div class="note info">&lt;p>如果使用2021.2或更早版本的Vivado，板信息文件则存放在&lt;code>{Vivado Dir}\data\boards&lt;/code>目录下。&lt;/p>&lt;/div>
&lt;h2 id="创建ip模板">创建IP模板&lt;/h2>
&lt;p>在Vivado工程中选择工具栏中的&lt;code>Tools-&amp;gt;Create and Package New IP&lt;/code>，在弹出的窗口中使用&lt;code>Create a new AXI4 Peripheral&lt;/code>创建一个带有AXI4接口的IP核模板，并配置接口参数，这里以功能较为简单的AXI4 Lite接口作为演示，最后选择&lt;code>Edit IP&lt;/code>打开生成的IP核工程，如果选择了其他选项，可以从Project Manager中的IP Catalog找到该工程，右键选择&lt;code>Edit in IP Packager&lt;/code>打开该IP核。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202303141228052.webp" alt="image-20230313190958912">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202303141228394.webp" alt="image-20230313190917622">&lt;/p>
&lt;p>模板工程中含有两个文件，其中&lt;code>project.v&lt;/code>文件中定义了AXI总线的接口并例化了一个支持AXI总线通信功能的模块，&lt;code>project_AXI.v&lt;/code>文件具体实现了AXI总线功能，为了快速入门，我们重点关注其实现用户逻辑功能的寄存器操作部分，其中，最核心的寄存器是四个带有&lt;code>slv&lt;/code>前缀的寄存器（寄存器数量由之前接口设置中的&lt;code>Number of Registers&lt;/code>决定）与输出数据的&lt;code>reg_data_out&lt;/code>，模板实现的默认逻辑为：当向地址&lt;code>X&lt;/code>写入数据时，数据会保存在对应的&lt;code>slv_regX&lt;/code>中，而从地址&lt;code>X&lt;/code>读出数据时，会读取到&lt;code>slv_regX&lt;/code>中的数据；因此我们只需要对这些寄存器进行操作就可以借由模板中的方法实现通信的功能。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-verilog" data-lang="verilog">&lt;span class="line">&lt;span class="cl"> &lt;span class="p">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">reg&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">C_S_AXI_DATA_WIDTH&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mh">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mh">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">slv_reg0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">reg&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">C_S_AXI_DATA_WIDTH&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mh">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mh">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">slv_reg1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">reg&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">C_S_AXI_DATA_WIDTH&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mh">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mh">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">slv_reg2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">reg&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">C_S_AXI_DATA_WIDTH&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mh">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mh">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">slv_reg3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">reg&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">C_S_AXI_DATA_WIDTH&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mh">1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mh">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">reg_data_out&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">...&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>作为从机，在写逻辑中，会根据地址将数据存入对应的&lt;code>slv_reg&lt;/code>寄存器，通过将switch case内&lt;code>slv_reg&lt;/code>改为其他寄存器，可以改变写入寄存器的位置，不过在模板中&lt;code>slv_reg&lt;/code>仅用于发送与接收，为避免错误，建议不要直接修改模板内容，而在其他时序逻辑中转存其值。另外注意这里的default语句理论上是不会运行的，因此更改此处的赋值左寄存器并不会将写入数据储存到新位置处。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-verilog" data-lang="verilog">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">always&lt;/span> &lt;span class="p">@(&lt;/span> &lt;span class="k">posedge&lt;/span> &lt;span class="n">S_AXI_ACLK&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="n">S_AXI_ARESETN&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mh">1&lt;/span>&lt;span class="mb">&amp;#39;b0&lt;/span> &lt;span class="p">)...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">slv_reg_wren&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="n">axi_awaddr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">ADDR_LSB&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nl">OPT_MEM_ADDR_BITS:&lt;/span>&lt;span class="n">ADDR_LSB&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mh">2&amp;#39;h0&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="n">byte_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mh">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">byte_index&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">C_S_AXI_DATA_WIDTH&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mh">8&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mh">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">byte_index&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">byte_index&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mh">1&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="n">S_AXI_WSTRB&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">byte_index&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mh">1&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">slv_reg0&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">byte_index&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mh">8&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+:&lt;/span> &lt;span class="mh">8&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">S_AXI_WDATA&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">byte_index&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="mh">8&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+:&lt;/span> &lt;span class="mh">8&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mh">2&amp;#39;h1&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mh">2&amp;#39;h2&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mh">2&amp;#39;h3&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="p">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">slv_reg0&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">slv_reg0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">slv_reg1&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">slv_reg1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">slv_reg2&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">slv_reg2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">slv_reg3&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">slv_reg3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">endcase&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>而在读逻辑中，首先当地址位变动时，会将指定寄存器数据读入&lt;code>reg_data_out&lt;/code>中，并在接下来的读时序中将&lt;code>reg_data_out&lt;/code>内数据送出。因此，可以修改switch case内赋值语句右值来将我们需要的寄存器数据通过指定地址读出。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-verilog" data-lang="verilog">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">assign&lt;/span> &lt;span class="n">slv_reg_rden&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">axi_arready&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">S_AXI_ARVALID&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="n">axi_rvalid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">always&lt;/span> &lt;span class="p">@(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="n">axi_araddr&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">ADDR_LSB&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nl">OPT_MEM_ADDR_BITS:&lt;/span>&lt;span class="n">ADDR_LSB&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mh">2&amp;#39;h0&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">reg_data_out&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">slv_reg0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mh">2&amp;#39;h1&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">reg_data_out&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">slv_reg1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mh">2&amp;#39;h2&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">reg_data_out&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">slv_reg2&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mh">2&amp;#39;h3&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">reg_data_out&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">slv_reg3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">default&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">reg_data_out&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mh">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">endcase&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">always&lt;/span> &lt;span class="p">@(&lt;/span> &lt;span class="k">posedge&lt;/span> &lt;span class="n">S_AXI_ACLK&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="n">S_AXI_ARESETN&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mh">1&lt;/span>&lt;span class="mb">&amp;#39;b0&lt;/span> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">axi_rdata&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mh">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">slv_reg_rden&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">axi_rdata&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">reg_data_out&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="编写ip逻辑">编写IP逻辑&lt;/h2>
&lt;p>这里我们简单实现一个计算两数平均值的模块，&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-verilog" data-lang="verilog">&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">reg&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mh">31&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mh">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">average_reg&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">always&lt;/span> &lt;span class="p">@(&lt;/span>&lt;span class="k">posedge&lt;/span> &lt;span class="n">S_AXI_ACLK&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">average_reg&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">slv_reg0&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mh">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">slv_reg1&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mh">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">slv_reg0&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">slv_reg1&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mh">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>同时，将读逻辑中的&lt;code>2'h2 : reg_data_out &amp;lt;= slv_reg2;&lt;/code>修改为&lt;code>2'h2 : reg_data_out &amp;lt;= average_reg;&lt;/code>使计算结果可以通过访问&lt;code>0b1000&lt;/code>地址读出。&lt;/p>
&lt;p>编写完成，依次运行Synthesis、Implement，验证无误后，可以在&lt;code>Package IP&lt;/code>页的&lt;code>Review and Package&lt;/code>中选择&lt;code>Re-Package IP&lt;/code>重新生成IP核。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202303141228649.webp" alt="image-20230313201034505">&lt;/p>
&lt;h2 id="调用ip核">调用IP核&lt;/h2>
&lt;p>返回原工程，在Block Design中加入封装好的IP核和ZYNQ7 PS，自动连线，Vivado会帮我们添加时钟和AXI控制器。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202303141228644.webp" alt="image-20230313202403918">&lt;/p>
&lt;p>保存Design，在&lt;code>Sources&lt;/code>中右键选择&lt;code>Create HDL Wrapper&lt;/code>让Vivado自动生成一个含有设计例化的顶层文件，综合实现生成bit流。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202303141228083.webp" alt="image-20230313202121696">&lt;/p>
&lt;h2 id="上板验证">上板验证&lt;/h2>
&lt;p>为在开发板上调用该IP核，需要使用Vivado生成三个文件：&lt;/p>
&lt;ol>
&lt;li>&lt;code>.bit&lt;/code>文件：该文件可视作可执行文件，在PYNQ板上通过&lt;code>Overlay&lt;/code>导入，生成在&lt;code>{Project Dir}\{Project}.runs\impl_1\{Top File}.bit&lt;/code>处；&lt;/li>
&lt;li>&lt;code>.hwh&lt;/code>文件：硬件描述文件，包含有对PYNQ各模块的配置，默认生成在&lt;code>{Project Dir}\{Project}.gen/sources_1/bd/{Block Design}/hw_handoff/{Block Design}.hwh&lt;/code>处；&lt;/li>
&lt;li>&lt;code>.tcl&lt;/code>文件（可选）：早期版本的硬件描述文件，可读性较&lt;code>.hwh&lt;/code>文件可读性更高，需要在工具栏&lt;code>File-&amp;gt;Export-&amp;gt;Export Block Design&lt;/code>生成。&lt;/li>
&lt;/ol>
&lt;p>随后将&lt;code>.bit&lt;/code>文件与&lt;code>.hwh&lt;/code>文件改为同一名称，移动到PYNQ板内同一目录下，PYNQ默认将Overlay保存在&lt;code>/home/xilinx/pynq/overlays&lt;/code>目录下。&lt;/p>
&lt;div class="note info">&lt;p>在早期版本中，需要将&lt;code>.bit&lt;/code>文件与同名&lt;code>.tcl&lt;/code>上传至PYNQ板，不需要&lt;code>.hwh&lt;/code>文件。&lt;/p>&lt;/div>
&lt;p>PYNQ板中，PS层与PL层的交互通过内存映射实现，因此我们需要知到挂载IP核对应的内存基址，在&lt;code>.tcl&lt;/code>文件中，找到内存映射部分，可以看到&lt;code>average_0/S00_AXI&lt;/code>对应的基址为&lt;code>0x43C00000&lt;/code>，掩码为&lt;code>0x0000FFFF&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-tcl" data-lang="tcl">&lt;span class="line">&lt;span class="cl"> &lt;span class="c"># Create address segments
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span> &lt;span class="nv">assign_bd_address&lt;/span> &lt;span class="o">-&lt;/span>offset &lt;span class="mh">0x43C00000&lt;/span> &lt;span class="o">-&lt;/span>range &lt;span class="mh">0x00010000&lt;/span> &lt;span class="o">-&lt;/span>target_address_space &lt;span class="k">[&lt;/span>&lt;span class="nv">get_bd_addr_spaces&lt;/span> processing_system7_0&lt;span class="o">/&lt;/span>Data&lt;span class="k">]&lt;/span> &lt;span class="k">[&lt;/span>&lt;span class="nv">get_bd_addr_segs&lt;/span> average_0&lt;span class="o">/&lt;/span>S00_AXI&lt;span class="o">/&lt;/span>S00_AXI_reg&lt;span class="k">]&lt;/span> &lt;span class="o">-&lt;/span>force
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>而在&lt;code>.hwh&lt;/code>文件中，可以找到对应模块配置内的&lt;code>PARAMATERS&lt;/code>部分，同样可以读出基址和地址范围：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;PARAMETERS&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;PARAMETER&lt;/span> &lt;span class="na">NAME=&lt;/span>&lt;span class="s">&amp;#34;C_S00_AXI_DATA_WIDTH&amp;#34;&lt;/span> &lt;span class="na">VALUE=&lt;/span>&lt;span class="s">&amp;#34;32&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;PARAMETER&lt;/span> &lt;span class="na">NAME=&lt;/span>&lt;span class="s">&amp;#34;C_S00_AXI_ADDR_WIDTH&amp;#34;&lt;/span> &lt;span class="na">VALUE=&lt;/span>&lt;span class="s">&amp;#34;4&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;PARAMETER&lt;/span> &lt;span class="na">NAME=&lt;/span>&lt;span class="s">&amp;#34;Component_Name&amp;#34;&lt;/span> &lt;span class="na">VALUE=&lt;/span>&lt;span class="s">&amp;#34;design_1_average_0_11&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;PARAMETER&lt;/span> &lt;span class="na">NAME=&lt;/span>&lt;span class="s">&amp;#34;EDK_IPTYPE&amp;#34;&lt;/span> &lt;span class="na">VALUE=&lt;/span>&lt;span class="s">&amp;#34;PERIPHERAL&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;PARAMETER&lt;/span> &lt;span class="na">NAME=&lt;/span>&lt;span class="s">&amp;#34;C_S00_AXI_BASEADDR&amp;#34;&lt;/span> &lt;span class="na">VALUE=&lt;/span>&lt;span class="s">&amp;#34;0x43C00000&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;PARAMETER&lt;/span> &lt;span class="na">NAME=&lt;/span>&lt;span class="s">&amp;#34;C_S00_AXI_HIGHADDR&amp;#34;&lt;/span> &lt;span class="na">VALUE=&lt;/span>&lt;span class="s">&amp;#34;0x43C0FFFF&amp;#34;&lt;/span>&lt;span class="nt">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/PARAMETERS&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>最后，在&lt;code>jupyter notebook&lt;/code>中，通过&lt;code>Overlay&lt;/code>加载&lt;code>.bit&lt;/code>文件，通过&lt;code>MMIO&lt;/code>读写调用我们的IP功能，演示效果如下：&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202303141250845.webp" alt="">&lt;/p>
&lt;p>为方便调用，我们可以为其封装一个接口，如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">avg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mmio&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MMIO&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mh">0x43c00000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mh">0x10000&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mmio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mh">0x0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mmio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mh">0x4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">mmio&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mh">0x8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.ioyoi.me/202303141249482.webp" alt="image-20230314124949099">&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/pynq/">pynq</category><category domain="https://ioyoi.me/tags/fpga/">fpga</category><category domain="https://ioyoi.me/tags/vivado/">vivado</category><category domain="https://ioyoi.me/tags/tutorial/">tutorial</category></item><item><title>一劳永逸解决端口封禁问题</title><link>https://ioyoi.me/tech/port-blocking/</link><guid isPermaLink="true">https://ioyoi.me/tech/port-blocking/</guid><pubDate>Mon, 27 Feb 2023 10:52:10 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;h2 id="引子">引子&lt;/h2>
&lt;p>过往四五年，图个安全，一直供着VPS自建科学上网，使用Nginx做前端、博客伪装的Vmess协议，很长时间都没有遇到被墙的问题。直到去年夏天，换用了晚高峰够用且便宜许多的白丝云，把协议换成了更轻量的Vless，短短半年时间内遇到了两次&lt;strong>443端口封禁&lt;/strong>，是线路问题还是协议问题网上众说纷纭，遇上了只能手动换端口解决，虽然操作并不复杂，但多少有些闹心。&lt;/p>
&lt;p>最近折腾软路由时，读到一篇&lt;a href="https://blog.jmal.top/s/iptables-nat-port-forwarding-route-gateway">NAT转发的文章&lt;/a>，延伸出了一个通过将大量端口转发至服务端口规避443被封禁手动更改的方法，配合订阅自动更新，遭遇端口封禁时，只需要在客户端点一下更新订阅就可以了。&lt;/p>
&lt;div class="note info">&lt;p>后面朋友提醒，V2ray自带的&lt;a href="https://www.v2fly.org/v5/config/proxy/dokodemo.html">任意门（Dokodemo-door）&lt;/a>也可以实现类似功能，不过我使用的v2fly版本似乎只能指定单端口的转发。&lt;/p>&lt;/div>
&lt;h2 id="端口转发">端口转发&lt;/h2>
&lt;p>服务器端机器需要安装两个工具，&lt;code>iptables&lt;/code>是Linux下的Netfilter控制器，而&lt;code>iptables-persistent&lt;/code>则负责把&lt;code>iptables&lt;/code>的临时配置持久化，首先检查服务器是否已安装&lt;code>iptables&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">apt install iptables
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>目前我使用了trojan和hysteria两种协议进行科学上网，分别使用tcp和udp协议，需要分别映射两个端口。&lt;/p>
&lt;div class="note primary">&lt;p>&lt;a href="https://hysteria.network/">hysteria&lt;/a>是一个依靠QUIC开发的网络加速工具，实测下来延迟相较常见的tcp协议要低上许多，晚高峰频繁丢包时体验也好上不少，我已裸奔四个月未被封禁，是我目前最喜欢的翻墙协议。其缺点在于目前支持的客户端较少，经验证&lt;a href="https://github.com/xiaorouji/openwrt-passwall">openwrt-passwall&lt;/a>和&lt;a href="https://docs.metacubex.one/">Clash.Meta&lt;/a>都是可用的。&lt;/p>&lt;/div>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 映射tcp端口&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t nat -A PREROUTING -p tcp --dport 40000:50000 -j REDIRECT --to-ports &lt;span class="m">443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 映射udp端口&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iptables -t nat -A PREROUTING -p udp --dport 50000:60000 -j REDIRECT --to-ports &lt;span class="m">10000&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将客户端协议端口改为指定端口段内的任意端口，测试没有问题后，安装&lt;code>iptables-persistent&lt;/code>保存配置，服务器重启时规则也能生效。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">apt install iptables-persistent
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="订阅更新">订阅更新&lt;/h2>
&lt;p>尽管我们开启了一吨端口可供使用，但客户端只会使用指定的一个进行访问，我们需要利用客户端的订阅机制写一个脚本，每次访问时随机为客户端提供一个开放段内的端口，实现端口封禁时的快速更换。&lt;/p>
&lt;p>这里我们随便用Go来撸一个用。&lt;em>不要吐槽脚本啰嗦，是ChatGPT写的呀~&lt;/em>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;encoding/base64&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;math/rand&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strconv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UUID&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Domain&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TcpStart&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TcpEnd&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UdpStart&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UdpEnd&lt;/span> &lt;span class="kt">int&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="nx">Config&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UUID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;uuid&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Domain&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;domain&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TcpStart&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">40000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TcpEnd&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">50000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UdpStart&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">50000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">UdpEnd&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">60000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">subTemplateString&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`vless://{uuid}@{domain}:{tcpPort}?security=tls&amp;amp;encryption=none&amp;amp;host={domain}&amp;amp;headerType=none&amp;amp;type=tcp#{name}-vless
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">trojan://{uuid}@{domain}:{tcpPort}?peer={domain}&amp;amp;sni={domain}&amp;amp;alpn=http/1.1#{name}-trojan
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">hysteria://{domain}:{udpPort}?protocol=udp&amp;amp;auth={uuid}&amp;amp;peer={domain}&amp;amp;insecure=0&amp;amp;alpn=h3&amp;amp;upmbps=50&amp;amp;downmbps=200#{name}-hysteria`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">clashTemplateString&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">`
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">Your Clash conf file, Replace config info with {uuid}, {domain}, etc.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">getSublist&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ResponseWriter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">subTemplateString&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;{uuid}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UUID&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;{domain}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Domain&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;{name}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;{tcpPort}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Intn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TcpEnd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TcpStart&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TcpStart&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;{udpPort}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Intn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UdpEnd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UdpStart&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UdpStart&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">e&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">base64&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">StdEncoding&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">EncodeToString&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">w&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">getClash&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">w&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ResponseWriter&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">r&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Request&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">clashTemplateString&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;{uuid}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UUID&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;{domain}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Domain&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;{name}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;{tcpPort}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Intn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TcpEnd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TcpStart&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">TcpStart&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">strings&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;{udpPort}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">strconv&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Itoa&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rand&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Intn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UdpEnd&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UdpStart&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UdpStart&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">w&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Write&lt;/span>&lt;span class="p">([]&lt;/span>&lt;span class="nb">byte&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">s&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UUID&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s">&amp;#34;/sub&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">getSublist&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">HandleFunc&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">UUID&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="s">&amp;#34;/clash&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">getClash&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ListenAndServe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:6666&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>编译成可执行文件，并且设置自启动，访问对应的地址就能看到订阅信息了，&lt;code>/sub&lt;/code>中为v2rayN、passwall等客户端可用的分享链接订阅，&lt;code>/clash&lt;/code>中为带规则的Clash配置，如&lt;code>127.0.0.1/1a5be4ec-7ce1-4b34-884b-2e0075f68214/sub&lt;/code>。&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/vps/">vps</category><category domain="https://ioyoi.me/tags/passwall/">passwall</category></item><item><title>手机主屏变迁史</title><link>https://ioyoi.me/tech/phone-home-screen/</link><guid isPermaLink="true">https://ioyoi.me/tech/phone-home-screen/</guid><pubDate>Wed, 01 Feb 2023 19:38:59 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>&lt;img src="https://img.ioyoi.me/202302011937648.webp" alt="">&lt;/p>
&lt;p>最近刷到了不少人的主屏桌面分享，作为手机上见得最多的界面，手机主屏很大程度上反映了主人的生活方式，于是翻出一张19年的主屏截图，和三年后的今天做一个对比，来看看我的用机习惯发生了哪些变化。&lt;/p>
&lt;p>一直喜欢简简单单的类原生桌面，只是启动器从&lt;a href="https://novalauncher.com/">Nova Launcher&lt;/a>换成了&lt;a href="https://lawnchair.app/">Lawnchair&lt;/a>，两者都根据Pixel桌面定制而来，只是Lawnchair更加轻量，且补全了Nova Prime版才支持的应用隐藏功能。图标包一直是扁平化设计的&lt;a href="https://www.coolapk.com/apk/me.morirain.dev.iconpack.pure">Pure轻雨图标包&lt;/a>，简洁的设计深得我心，作者也在持续更新，十分良心。&lt;/p>
&lt;h3 id="坚守的app">坚守的APP&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>微信：应该是国内最常用的即时通讯软件了，不过近些年来微信几乎没做任何功能上的改进，桌面端微信离线消息上线后无法自动同步，阅后即焚、阅读状态的功能大概永远不会加入了（我也理解并不是所有人都支持加入这些功能）。如果没有竞品，用户群固定的情况下，微信应该还会持续摆烂一段时间。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Telegram X：即时通讯软件，用来看图看番找电影、购买服务、寻求社区帮助和与兄弟们键政，一个干干净净、本本分分的App。&lt;/p>
&lt;div class="note primary">&lt;p>一个冷知识，在下载或观看视频时，Telegram原版App会把速度限制在1Mb/s，但是Telegram X时没有限速的，好耶✌&lt;/p>&lt;/div>
&lt;/li>
&lt;li>
&lt;p>Twitter：仅剩的社交App，最大的功能是提供一个比朋友圈更小的圈子，用于记录我的生活，也许不久后我会找到一个更佳的平台放我的随笔和日常，也许是&lt;a href="https://mastodon.social/explore">Mastodon&lt;/a>之类的去中心化社交媒体，也许是在博客中单开一个版面，毕竟，记录最大的意义在于回忆，而非分享。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>支付宝：支付、理财、充饭卡，必不可少，但使用频次的越来越少了，毕竟如果有微信替代，谁愿意专门打开一个新软件呢。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>微信读书：阅读软件，通过白嫖的体验卡，配合zlib上的盗版书，基本满足所有的读书需求。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Bilibili：曾经的二次元集散地，现在已成为打发时间的短视频软件，很少用它追番了，今年意外的发现可以通过切片连着追剧，Google Play版完全没有广告，虽初心已改，但用起来依然是国内最好的视频软件。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="替代的app">替代的APP&lt;/h3>
&lt;ul>
&lt;li>V2rayN👉Clash Meta for Android：为了统一配置方便订阅更新换用了Clash，Clash Meta是安卓平台唯一支持Hysteria以及XTLS的Clash客户端。但其实在手机上Clash并不是一个特别好的选择，功耗相比V2ray还是高出太多了。&lt;/li>
&lt;li>Apple Music👉Spotify：对Apple Music的电台推荐不太满意，同时国服Apple Music有些新歌要过许久才上（比如周董），另外Pad上每次切换一次App Store账号都要花费很长时间同步音乐资料库，于是在淘宝买了同样5块一月的Spotify家庭共享，相比之下，Spotify在桌面端和安卓端的打开速度和流畅度都要优于Apple Music，电台推荐也优秀许多，但和国内音乐平台仍有差距，国语歌词的缺失比苹果家更为严重，有舍有得吧。&lt;/li>
&lt;/ul>
&lt;h3 id="被抛弃的app">被抛弃的APP&lt;/h3>
&lt;ul>
&lt;li>Tim：时代的眼泪，主要原因是用QQ的人越来越少了，但其实Tim作为办公工具在传文件和消息同步上比微信优秀许多，但家里长辈和身边同学都在使用微信，Tim只能做扫码登陆的工具了，这算不算是“劣币驱逐良币”呢？&lt;/li>
&lt;li>知乎：我的知乎信息流里充斥着各种爽文和Emo文学，优质内容越来越少，读不到干货，只是浪费时间。&lt;/li>
&lt;li>Share：微博客户端，不是我抛弃了微博，而是微博抛离了我，微博很长时间里都承担着记录生活的功能，但20年微博账号莫名其妙被封，申诉无果，亦无法用原手机号注册新账号，遂转战Twitter，彻底告别微博了。&lt;/li>
&lt;li>轻芒阅读：信息流聚合App，内容优质，界面美观，时至今日我依然觉得这是一个很优雅的App，只是我已不再喜欢阅读自媒体的文章。21年该App因内容版权问题已停止运营，实在遗憾。目前的替代品是Google搜索和Chrome主页下的推荐，虽然收录的多是外文网站，但用来了解数码及游戏资讯也是绰绰有余了。&lt;/li>
&lt;li>Google Books：曾经微信读书看Mobi文件翻页卡顿，下了Books专门阅读zlib上的Mobi格式盗版书，现在微信读书已经优化到位，不再需要其他阅读软件了。&lt;/li>
&lt;li>Youtube：电脑上用了Adblock，看油管是没有广告的，用了App才知道油管广告是真滴多，干脆就不用手机看了。&lt;/li>
&lt;/ul>
&lt;h3 id="新加入的app">新加入的APP&lt;/h3>
&lt;ul>
&lt;li>美团：外卖、买菜、K歌看电影，搬出学校后用得越来越多了。&lt;/li>
&lt;li>钱迹：读研之后钱不够花，柴米油盐酱醋茶都要精打细算，随便下了个干净的记账软件，培养自己良好的消费习惯。&lt;/li>
&lt;li>Google相册：查照片、看照片，Google相册早已不能免费上传了，目前的解决方式是将手机里的照片通过&lt;a href="../syncthing-and-sync-tools/">Syncthing&lt;/a>同步到台式机和之前买的Pixel 2上，利用Pixel 2的免费高品质上传做本地和云端的双备份，同时也能在所有设备上利用Google提供的照片分类功能。&lt;/li>
&lt;/ul>
&lt;p>我使用手机的原则是“若无必要，勿增实体”，在满足实用性的前提下，以美观简洁作为选择App的标准，另外，随着主流App的功能越来越完善，不少应用合二为一，桌面也精简了不少；三年来，一直努力把杀时间的App移出手机，想让手机成为必需品而非娱乐工具，生活类应用走进主屏，美团、盒马、沃尔玛等应用的使用频率增高，大概我也开始独立生活了。两年后，当我终于走出学校，走入社会，再来看看主屏又有哪些变化吧。&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/tool/">tool</category><category domain="https://ioyoi.me/tags/phone/">phone</category><category domain="https://ioyoi.me/tags/android/">android</category></item><item><title>二〇二二</title><link>https://ioyoi.me/life/2022/</link><guid isPermaLink="true">https://ioyoi.me/life/2022/</guid><pubDate>Sat, 31 Dec 2022 23:26:31 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>2022年的尾巴，三年的疫情防控终于告一段落了，从遥远的🐏到身边的🐏，再到自己变🐏，伴着咳嗽的背景声写下这篇年度总结，记录过往的一年，为也许会好起来的明天留下寄语。&lt;/p>
&lt;h2 id="暂停键-空白格">暂停键 空白格&lt;/h2>
&lt;p>留白，大概是我的2022主题，一半出于疫情，一半顺从内心。去年，给自己留下的课题是认识自己，因而这一年中，想得多，做得少，恰好疫情封校、暑假实习，今年的日程表中空下了太多的时间，我渐渐喜欢上了发呆，“白日梦”也多了起来，当然，这里的“白日梦”并非贬义，而是剖析自己、理清思路的一种好手段。结果主义而言，这大片的空白并非在虚度光阴，毕竟，当时选择读研，走入社会前gap三年就是为了给自己充足的时间思考未来，如果仅仅花了一年便想透无惘了，也很值了。&lt;/p>
&lt;p>彻底放空，悲喜都变成了太过奢侈的东西，回想起来，这一年中并无大喜大悲，甚至连能去回忆的瞬间都不算太多，家里老人常说平平淡淡便是福，那么这一年的平淡也算是养了心性，这一年的时光就当是做了修行了。&lt;/p>
&lt;h2 id="和自己和解">和自己和解&lt;/h2>
&lt;p>一直以来我都相信自己心中有理性和感性的两个我，实时的行为模式由感性我控制，而理性我只进行事后复盘和经验指导，因此，“认识自我”带给我的一大好处便是两个我和解了。通常，我都是一个随性的人，会一拍脑袋做出决定，会三分钟热度，会享受当下而不计后果，然而，这些行为常常在睡前复盘的时候带给我诸多后悔和焦虑，不过现在，这种负面情绪已经越来越少了，其主要原因是理性的我妥协了，或者说接受了感性我选择的这种率性的生活方式。我渐渐的明白，所谓的感性，只是人根据生活经历做出的惯性选择，无谓对错利弊，只是现阶段人生经验驱使你做出的自己能接受的临时决定，虽然这种决定常常是短视的，但真正有远见的人其实很少，我也并不奢求自己成为其中的一员，守住底线，不要误入歧途，足矣。&lt;/p>
&lt;p>同时，在奋斗与躺平之间，我也不再纠结，我理解了本科毕业时系主任说的“躺平也是一种实力”，很长时间我都在焦虑自己的躺平会最终变成摆烂，不过现在，一方面由于家底薄没有资本，一方面出于自己的好胜心与攀比心，不甘心过得比别人差太多，现在我不太担心自己会走向纯摆烂的死路了。所以，我允许自己过的相对轻松，只要按部就班的走完每一步，别被其他人甩得太远就够了。&lt;/p>
&lt;p>过往几年，我把“改变”看得太重，却没有真正的想过为什么要改变、怎样改变才会更好，今后我不再否定过往的生活模式，只去纠错，绝不想着推倒重来。&lt;/p>
&lt;h2 id="关于学业">关于学业&lt;/h2>
&lt;p>上半年跟着老师做横向，虽然研一，但已经算是课题组的主要劳动力了，工艺、实验、数据处理，忙得不亦乐乎，在工作中也得到了老师和师兄的认可，获得了颇多成就感；下半年组里项目告一段落，开始真正意义上的科研，老师给了两项任务，一是做集成电路设计，二是整理前人工作，写一篇文章，遗憾的是，半年过去，两项工作均未得到明确的成果。一方面是在自己不擅长的领域，会不自觉选择逃避，另一方面来自老师的压力卸除了，不再有时间上的紧迫感，于是后半年科研工作一拖再拖，水了又水，最终还是被打回原形，到了年终总结时只能长叹，今年，又是碌碌无为的一年。&lt;/p>
&lt;p>回想这一年的经历，我大概明白，上半年的充实感主要来自于重复性工作带来的实际产出，若论能力，我并未提升太多，而到了需要攻坚克难的时候，才是真正考验硬实力、获得提高的时候。今年对于自己的学业成果并不满意，细想来，真正能潜心学业的时日已无多，年轻人，要珍惜。&lt;/p>
&lt;h2 id="关于感情">关于感情&lt;/h2>
&lt;p>七月起搬出了校园，在外租房居住，集体生活告一段落，独处的时光变得多了起来，开始偶尔觉得孤独，在闲下来的时间里感觉尤甚，想要找到一个感情寄托，于是开始反思自己的恋爱观。长期以来，我在感情问题上始终有两个结，一个是害怕面对责任，一个是放不下。&lt;/p>
&lt;p>作为母胎solo的纯情小处男，我很希望我谈的第一个女朋友可以陪我白头偕老，因此我恐惧自己在亲密关系中做的不够好，我一直认为当我有能力照顾好自己后才能去照顾别人，因此不主动求爱，也不接受示好，成了缩头乌龟。现在我正在转变观念，接受恋爱中有缺陷的自己，尝试给自己一些试错的机会，希望亡羊补牢，为时未晚。&lt;/p>
&lt;p>喜欢一个女生，在得到拒绝答复后五年都没有放下，想来真是可悲，我曾以为自己只是喜欢那个默默看着她的自己，但是这种情感寄托并没有让我努力变得更好，而是让我在感情面前变得越发自卑，形成了恶性循环。前些日子有一个女生告诉我，告白，并不是去求一个结果，而是不给自己留遗憾。也许我早该给这段无果的感情正式画上句点了。&lt;/p>
&lt;p>曾经对于感情思考的太少，总觉得自己耐得住寂寞，但今年明显纠结变多，需要改变。&lt;/p>
&lt;h2 id="and未来">And...未来？&lt;/h2>
&lt;p>躺平的一年结束，明年我将又一次回到人生的关键十字路口，找工作，就业，走向社会，只是这一次和大三时不同，我不会再选择逃避，也无处可逃。因此，对新的一年，我有着几点期望：&lt;/p>
&lt;ol>
&lt;li>培养就业的能力和竞争力；看了看当前的职业市场，自己大概还是希望进一家外企或大型私企工作，虽然这几年国企、事业单位的稳定性成为了就业市场上的香饽饽，但我好像还是希望给自己的未来和曾经的梦想留一点可能性，为了这一丝可能性，我并不介意拿我的青春去试一下错，大不了，再回家考公么。因此，我计划着重培养三种能力：语言能力、专业能力和信息获取能力。首先是要有一技之长，自己打算往IC设计的方向走，考虑最近模电做的并不顺利且没人带很难入门，准备用半年的时间去熟悉一下数电及数模混合设计的流程，争取在秋招的时候能够唬住面试官，获得一份满意的工作；语言能力主要指拾起来英语，这是外企的工作要求和为跑路准备的后手，这几年在学校过的太舒适，英语明显的荒废了，需要加强，至少要在研究生毕业前把欠的六级和托福都考了；最后的信息获取能力，是作为研究生最强的竞争力，实话讲，大学中度过的五年，我并没有吸收多少实用的专业知识，但是我掌握了利用数据库和网络快速了解一个行业或一个方向的能力，这可能是求学多年我获得的最实在的东西，拾人牙慧，容易偏信，只有能够主动的获取信息，才能做出属于自己的判断。&lt;/li>
&lt;li>做好自我管理，学会管理自己的身体和时间；今年在北京的最后一段时间里，我终于养成了定时运动的习惯，这是一个好的开始，疫情反复的现在，自己的身体还是要自己照顾，散步游泳骑行，不求练出一身肌肉，保持每周足够的运动量就足够了；时间管理则是一块更难啃的骨头，今年尝试通过一些自我激励手段提高自制力，效果不太令人满意，偷懒的惯性还是太强，想克服自己身上最大的缺点，还是要下一番功夫的。&lt;/li>
&lt;li>停止精神内耗，形成清晰的情感诉求；逃避感情并不可怕，性单恋也不可怕，重点在于不能让自己的陷入矛盾，过得很累。希望新的一年能够有一个更加明确、成熟的感情观，快刀斩乱麻，无论选择一个人过还是两个人过，减少纠结，求得情感上的满足。&lt;/li>
&lt;li>寻找生活的激情；进入研究生以来，总是在打发时间，即便娱乐活动也大多是机械化的，获得的快乐极为短暂，更多的时候会感到空虚，需要寻一些爱好去补足生活的乐趣，好在现在并不缺钱，也谈不上挤不出时间，去翻翻此前的小本本，在空闲时做些更有趣的事情吧。&lt;/li>
&lt;/ol>
&lt;p>Anyway，2022年，有些遗憾就这样过去了，希望新年新气象，我能不辜负自己吧。&lt;/p>
&lt;blockquote>
&lt;p>莫叹年来不如意，喜逢新运称心田。&lt;/p>
&lt;/blockquote></description><category domain="https://ioyoi.me/life/">life</category><category domain="https://ioyoi.me/tags/summary/">summary</category></item><item><title>大学的尾巴</title><link>https://ioyoi.me/life/graduation-trip/</link><guid isPermaLink="true">https://ioyoi.me/life/graduation-trip/</guid><pubDate>Tue, 30 Aug 2022 09:33:41 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>这是一篇拖了一年才发的游记，若不是整理手机上的日记，可能这些片段就永远锁在我的回忆里了。那么，就让我跟着文字照片，重新回到大学结束、和室友一同旅行西北的那个暑假吧~&lt;/p>
&lt;h2 id="day-0-云">Day 0 云&lt;/h2>
&lt;p>&lt;em>大兴机场-&amp;gt;曹家堡机场&lt;/em>&lt;/p>
&lt;p>帮室友打包好邮寄回家的包裹，留下满地狼藉的宿舍，匆匆忙拖着旅行箱挤上校车，我的毕业旅行正式开始了。&lt;/p>
&lt;p>第一次在大兴乘机，机场线列车相比地铁，更像高铁列车，只是座椅间距大了不少，对我这种腿长的人十分友好。新冠三年，作为“新国门”的大兴机场依旧空空荡荡，穹顶流畅舒展的线条映在光洁大理石地板上，高级感属实拉满了，只是不知道还要多久，这里才能被出游的人群填满。两年没坐飞机，机场已经能方便的刷身份证候机了，从选座到值机，全程都有短信提醒，行李托运也能在手机上办理查看，点赞。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301007295.webp" alt="" title="大兴机场内部">&lt;/p>
&lt;p>没有选到靠窗的位置，上了飞机就迷迷糊糊睡过去了。落地走出舱门，眼睛不自觉的瞪大了，视线越过充当机场围墙的低矮山峦，远处的云像是直接铺在了地平面上，跑近便触手可及，看来是与天堂更近了一步呢。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301011186.webp" alt="" title="曹家堡机场">&lt;/p>
&lt;p>酒店定在老城区莫家街附近，这里的西宁没有省会城市的高耸天际线，更像是一个小县城，路边一家接一家的烧烤店，烟火气足了。安顿下来已快九点，在司机师傅的推荐下去&lt;strong>新千夜市&lt;/strong>觅食，本来想吃些西北特色小吃，却发现美食城里早已被天南海北的小吃占领，从关东煮到琅琊土豆，再到肠粉米线，全国各地的美食城同质化越来越严重了。仅有的几家西北烧烤也不太合我的胃口，羊肉外层像是包裹着一层面粉糊一样的酱料，影响了肉的口感，看上去撒了很多料，然而孜然味和辣味皆不重，点的羊肉串肉块太薄，丝毫没有大口吃肉的多汁快感。不过西宁的物价着实不高，30吃饱50吃撑绝不是问题。&lt;/p>
&lt;h2 id="day-1-盐湖">Day 1 盐·湖&lt;/h2>
&lt;p>早起赶往青海湖，比起内陆湖，青海湖更像是海洋，层叠的浪花拍打着湖岸，水汽弥漫，完全看不到对岸。风噪，但不会带来海边独有的腥味，湖岸不远处，因多日降水积成的小水洼中游荡着数不清的蝌蚪，脚步声靠近便齐刷刷地远离，颇有“俶尔远逝，往来翕忽”的意境。不过，作为我多年来心心念念的圣地，青海湖带给我的失望远超惊喜，其中很重要的原因便是旅游业的过度开发。沿湖的路边被牧民们围起了铁丝网，分割成一个又一个小景区，圈地赚钱，为数不多自由进入的湖岸堆满了游客，岸边一头头牦牛打工仔麻木地为主人赚着钱，拍照拉客的叫卖声和游客的熙攘混合在一起，喧闹，甚煞风景。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301022292.webp" alt="" title="青海湖岸">&lt;/p>
&lt;p>还好，最美的风景在路上，沿途公路两旁是布满植被苔藓的丘陵，阳光照射下呈现出深浅不一的绿色，云慵懒的躺在山上，招之即来，橡皮山附近的盘山公路九曲回肠，车窗向外望去，是无尽的绿，甚是养眼。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301024557.webp" alt="" title="路旁奇怪的少数民族建筑">&lt;/p>
&lt;p>午餐在青海湖附近的一家家常餐馆解决，简单的一荤两素人均便要70，味道勉勉强及格吧。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301038858.webp" alt="">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301035919.webp" alt="" title="茶卡盐湖">真正带给我惊喜的是下午的茶卡盐湖，我们前往的是茶卡盐湖的天空之镜景区，乘车至湖中央，放眼望去尽是一片雪白。租了橡胶鞋套在盐湖中乱趟，有如在冰面行走，行至湖深处，远离打卡拍照的人群，将身心融入到无边的白中，仿佛身处云端，不由得感叹天工开物的神奇。时不时一辆载客小火车劈开湖面驶来，让我想到千与千寻中的水上列车，不知列车上的“千寻们”望着湖面，会不会和我有着一样的感受呢。踢踏着脚漫步水中，像是四五岁的孩童，只是可怜了身上的裤子，饱和的盐水滴溅到裤子上，不一会便形成白色的斑点，从景区出来时像是泥瓦匠下班。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301036086.webp" alt="" title="遭了殃的裤子">&lt;/p>
&lt;p>晚餐吃了美团人气榜首的小君楼炕锅，四百块的套餐，要了炕锅牛肉和开锅羊肉，炕锅类似干锅，而开锅羊肉就是清汤火锅，菜的分量很足，五个人都吃撑了~&lt;/p>
&lt;h2 id="day-2-翡翠宝石">Day 2 翡翠·宝石&lt;/h2>
&lt;p>第一站可鲁克湖是一个湿地湖，景区内部只有一节栈桥加上一群鸟，论好玩还不如一个人工湖公园，毫无风景可言，不值得一去。&lt;/p>
&lt;p>翡翠湖的体验要好上太多，富含矿物质的各色小湖散落在景区内，在阳光下表现出深浅不一的神秘感，地表上生长着松软细小的盐晶，踩在上面竟有一种踏雪前行的奇妙感觉。自然凸起的沟壑在地面上切割出各式各样的多边形，行走时可以感受到跳房子的乐趣。从湖面眺望远处的雪峰，随手一拍便是日照金山的美景。当日风很大，在水面形成鱼鳞状波纹的同时也让头顶上的帽子躁动起来，总想要抛弃主人，化作一叶扁舟，去宝石光泽的水面上，来一场说走就走的远行。从景区离开的路上，赶上了一场“太阳冰雹”，被砸了个措手不及，走出景区的瞬间又戛然而止，让人感叹天气的多变。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301054481.webp" alt="">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301052745.webp" alt="" title="各种颜色的小湖">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301055842.webp" alt="" title="盐岸徒步">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301058027.webp" alt="" title="番外·逐帽记">&lt;/p>
&lt;p>今日最佳食物为高香汤，微甜的酒酿（当地叫醪糟）加入罐头水果，蜜蜜的十分润口。在青海吃了两天后，开始感受到此地美食的匮乏，翻来覆去不过炕锅、火锅、烧烤三种做法，开始有些腻了。大概只有物产富饶或交通便利的地方，才能诞生丰富的美食吧。&lt;/p>
&lt;h2 id="day-3-戈壁雅丹">Day 3 戈壁·雅丹&lt;/h2>
&lt;p>从大柴旦沿&lt;strong>315国道&lt;/strong>一路西行，景色和前些日子大不相同，沿途的绿色全部褪去，视野中只留下一望无际的戈壁滩，孤独的公路像是想尽快逃离这一片荒芜的土地，笔直的劈开一个又一个山丘，无所留恋的西行。
来到网红U形公路处，本以为“U”是指平面上的大回旋，没想到竟是指高度上的巨大起伏。难以免俗地在“禁止停车”的告示下驻车拍照，拍出来的照片远不如亲眼看到的震撼。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301103255.webp" alt="" title="“禁 止 拍 照”">&lt;/p>
&lt;p>路旁的石头小丘被称作“雅丹”，这是一种特殊的风蚀地貌，风蚀形成的小山包迎风面为较为平缓的斜坡，背风面则为一面峭壁，远看像是扬起的风帆；由于当地风向较为固定，山包大都形状相似且有着统一的朝向，没有克拉玛依魔鬼城的变幻多端。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301105646.webp" alt="" title="平凡之路">水上雅丹，顾名思义是雅丹地貌和湖的结合，这里的湖仍然是好看的碧蓝色，从望海台看去，土丘就像是海中的礁石；不过几天的湖看下来难免有些审美疲劳，再加上疲惫和饥饿，逗了一会鸟便兴致缺缺地离开了。现在想想如果有时间和精力，沿着水边栈道走上一段，近距离看看水中沙丘，也许会有不一样的体验吧。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301112789.webp" alt="" title="水上雅丹">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301115596.webp" alt="" title="争食">&lt;/p>
&lt;p>酒足饭饱后，沿途的雅丹地貌便成了完美的攀岩场，建议小伙伴们戴上手套，从背风面的峭壁上山，体验一把手脚并用，勇攀“矮峰”的快意。虽然这里的地表看起来很像沙漠，但它并不是松软的沙子，而是抱得很实的泥土，即便经过暴晒，挖开表层依然有潮湿松软的泥。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301121199.webp" alt="">&lt;/p>
&lt;p>晚上与另一队好基友会师，在大柴旦恰了一顿烤羊排，终于满足了大口吃肉的愿望，比羊肉串不知道爽到哪里去了。&lt;/p>
&lt;h2 id="day-4-星">Day 4 星&lt;/h2>
&lt;p>石油小镇，借用美团上的一句评价——“不来后悔，来了更后悔”，若不是专程跑来，我甚至不想进门，所谓的景点，无非是影视城里的断壁残垣，像是真人CS的场地，我严重怀疑这家景区是靠厕所吸引游客的。好在当天天气不错，站在山上吃点零食看看远处的山云，也是一件乐事。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301503905.webp" alt="" title="石油小镇">&lt;/p>
&lt;p>沙漠露营据称是敦煌的特色项目，在导游的推荐下报了金驼露营体验了一把。玩，主要有沙漠摩托和滑沙两个项目。摩托只能体验一次约五分钟，有点类似过山车的体验。滑沙比较有意思，只是要自己拖着沙板爬沙丘，爬不了几次膝盖就开始酸痛了，很遗憾，直到营地开饭我都没能完整地划完全程，沙板总是在中途就深深陷入流沙中，用尽力气也无法移动半步。吃的方面，虽说是自助火锅，但自助的菜目只是一些丸子豆制品，一丝丝肉都看不到，一桌八人能吃到真正的肉只有一人一串羊肉和一桌一盘少得可怜的肉片。提供的可乐还有一周就要过期，啤酒也是不知道哪个小厂生产的。吃饭的同时，舞台上还要表演土嗨的节目，两个演员撑起了一场两个小时的演出，本事甚是了得。晚饭结束是篝火晚会和蹦迪环节，这也是我的蹦迪初体验，摇头晃脑像是吃了假药，我实在是不太感冒。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301510622.webp" alt="" title="滑沙">&lt;/p>
&lt;p>活动结束已是十一点多，搭好帐篷在外面看星星，尽管有灯光的污染，银河还是清晰可见。住的乞丐版帐篷可以勉强伸直腿，不过直到一点半仍有进大漠看星星的摩托进出营地，睡得并不安稳。凌晨三点被晚归的观星人吵醒，帐篷外的灯基本都熄了，正好爬起来拍星星，然而天公不作美，原本晴朗的天空飘来了几多云，只留下了碎片状的星河。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301511711.webp" alt="">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301512785.webp" alt="" title="手机太差，大部分的星其实都是噪点">&lt;/p>
&lt;p>六点，营地的大喇叭开始叫醒睡眼朦胧的旅客看日出，不过由于处在沙漠边缘，太阳并不是从沙丘上升起，而是从沙漠边的小树林露出，看起来便平常了许多。&lt;/p>
&lt;h2 id="day-5-壁画沙漠">Day 5 壁画·沙漠&lt;/h2>
&lt;p>结束露营，回到客栈冲洗了一下，便赶往了莫高窟。由于同行的小伙伴皆是丈育，所以没有特意抢票，提前一天买了能看四个窟的应急票，权当打卡，到此一游。&lt;/p>
&lt;p>我对于莫高窟的印象，只有形式和色彩。色彩上，莫高窟的壁画配色和中国传统山水画的色彩大不相同，不知是年久褪色还是矿石本色使然，不同于朱砂墨的浓厚，笔画色彩大多选用饱和度较低的颜色，看起来更为舒适。莫高窟的洞窟大多由中间佛像与四壁壁画组成，其中佛像的组成、姿态大不相同，题材也不拘泥于佛教，甚至出现了白胡道士与观世音菩萨同框出镜的奇妙画面。若想好好游览莫高窟，还是要提前做些功课。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301525524.webp" alt="" title="莫高窟的色">&lt;/p>
&lt;p>补交过后，临近傍晚才进到月牙泉景区，月牙泉是沙漠中的一弯水月，据说曾经是泉水自然涌出形成，但现在已经是人工湖了，湖边立起一座仿古木塔，周边做了绿化，有沙漠中绿洲的感觉。湖边鸣沙山的“S”形沙脊甚是好看，随手一拍便是壁纸。这里的沙丘应是滑沙的好场所，日落时分伴着金色的霞光中滑下，这场景想想就很美。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301539444.webp" alt="" title="沙漠绿洲">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301538891.webp" alt="" title="macOS Mojave（误">&lt;/p>
&lt;p>可惜饥肠辘辘的我们并未等到日落，进敦煌市区吃了顿羔羊肉，红焖烧烤手抓，各种做法都很美味，不知羊肉经过了怎样的特殊处理，和前些日子的羊肉完全不是一个口感，里外皆嫩，入口即化，显然是下了功夫的，只是甘肃厨子也深谙去膻之道，少了几丝羊肉独有的风味。&lt;/p>
&lt;div class="note default">&lt;p>后来知道，只要将羊肉和冰一起煮，冰融化前羊肉会受冷收缩，直到冰块完全融化、羊肉基本熟透才慢慢胀开，这样羊肉便不会发柴，吃起来鲜嫩爽滑，冰煮羊yyds！&lt;/p>&lt;/div>
&lt;h2 id="day-6-丹霞">Day 6 丹霞&lt;/h2>
&lt;p>从敦煌出发前往张掖，旅途进入后半段难免有些疲惫，道路两旁的黄越发刺眼，很难让人提起精神，中午在嘉峪关门口吃过饭，全无参观的兴致，遂省了门票钱，门口合影，匆匆离去。细想起来，来到北京五年间竟一次没有到过长城，真是有点不够好汉。多日的赶路让身躯十分疲惫，下午到达张掖第一件事便是睡觉。
一觉醒来已是六点，赶着七彩丹霞的停止入场时间前进入了景区。张掖的七彩丹霞是一个精心设计过的景区，各个游览区有通勤车相连，步行栈道设计完整合理，路线规划十分精细，设置的每个观景点各有特色。富含矿物质的岩石断层在阳光下变幻出不同的色泽，光秃秃的陡崖也显得不那么单调了。参照攻略赶到虹霞景区看日落，观景台上早已挤满了人，天边的乌云遮住了太阳，并没有出现金色彩虹，奋力将手机举过游客的头顶，拍了几张照片便离去了。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301601346.webp" alt="">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301602673.webp" alt="">&lt;/p>
&lt;h2 id="day-7-草雨">Day 7 草·雨&lt;/h2>
&lt;p>旅途的最后一天，祁连给了我大大的惊喜。&lt;/p>
&lt;p>沿着曲折的山路，面包车拐入祁连山谷，扑面而来的绿将眼睛里积攒数日的黄沙一扫而空。道路两旁是生机盎然的鲜绿色，一条小溪陪伴着道路静静流过，远处的雪峰在云雾中若隐若现，像是《死亡搁浅》游戏中的景象，耳边响起了&lt;em>I'm Leaving&lt;/em>，长时间车程的疲惫感瞬间消失不见，看着树与草在床边奔驰而过，赶路也成为了一种享受。&lt;/p>
&lt;iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/2CLzs4DW6EAtCv6FC6Mbix?utm_source=generator" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">&lt;/iframe>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301616842.webp" alt="" title="祁连的绿">&lt;/p>
&lt;p>有草的地方便有牛羊，道路时不时地被牦牛群和羊群占领，它们自在的抖着毛，向着最肥嫩的草场前进，任凭焦急的司机摁破了喇叭，牛羊也不为所动，保持着悠然的步伐。为了区分自家的羊群，一侧的羊角上被牧民染上了鲜艳的色彩，像是扎上了一朵鲜艳的蝴蝶结，一摇一晃甚是可爱。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301617696.webp" alt="" title="路是牛牛的">&lt;/p>
&lt;p>下午，天阴了下来，爬卓尔山时，落起了毛毛细雨，气温骤降，在半山腰打起了退堂鼓，幸好我们最终坚持爬上了山顶，不然便要错过旅途中最美的景色。&lt;/p>
&lt;p>卓尔山顶平坦开阔，像是北欧的牧场，虽不高耸，也足以俯瞰整个祁连县城，就在我们驻足远眺时，太阳偷偷从云缝中探出了头，视野变得明亮，周边的草愈发娇嫩，生机满溢，云的裙边与山的尖尖被烫上了金黄，空气中弥漫着雨后泥土的潮湿气息，置身于天然氧吧，各个感官甚至身体上的每个毛孔都贪婪地享受着这一刻。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301639875.webp" alt="" title="山顶小屋">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301635700.webp" alt="" title="雨过天晴">&lt;/p>
&lt;p>天色渐晚，山上的游客变得稀少，喧闹止息，像是置身于风景画中，下山的脚步不自觉地放慢，只为了等待那一抹晚霞，末班车的司机见到我们沉醉于美景，也不再催促，抽着烟等待我们将周遭美景裁进镜框。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301644825.webp" alt="">&lt;/p>
&lt;p>美景赏罢，进祁连县城，吃到了多日心心念念的烤羊腿，青海的美食行也没有遗憾了。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301649963.webp" alt="" title="烤羊腿">&lt;/p>
&lt;h2 id="day-8-花海归途">Day 8 花海·归途&lt;/h2>
&lt;p>最后一日是千里的返程路，途径门源油菜花海，浓艳的黄花在蓝天白云衬托下格外斑斓，看过了太多平原上的油菜花海，雪山脚下的黄花别有情趣。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208301656858.webp" alt="" title="高原上的油菜花海">&lt;/p>
&lt;p>除去短暂的休整，大部分的时间都再赶路小睡中度过了，下午回到西宁，结束了这一段毕业之旅。&lt;/p>
&lt;p>不曾料到，在西宁机场旁歇息的几个小时，竟连续发生了几起令人失望的小插曲，同在云南的经历类似，大抵是旅游业高速发展，服务业从业人员素质尚有待提高。不过一年过后，这些不愉快都已经烟消云散，留下的只有旅途中的欢声笑语了。&lt;/p>
&lt;h2 id="结语">结语&lt;/h2>
&lt;p>包车环游青甘环线，确实是毕业旅行的优质选择，西北高原上的蓝天草地，能放松城市校园里的满身疲惫，广袤的自然风光，也十分适合释放青春的荷尔蒙。&lt;/p>
&lt;p>行程中，我更为偏爱青海的自然风光，而对甘肃的大漠风情不太感冒，个人认为必去的景点有茶卡盐湖、翡翠湖、祁连，而诸如可鲁克湖、石油小镇之类的小景点，建议干脆不去。&lt;/p>
&lt;p>疫情三年，旅游已成为一种奢饰，只恨自己没有趁着疫情未至的大好青春，多去外面的世界走走。这个世界，还好么？还会好么？&lt;/p></description><category domain="https://ioyoi.me/life/">life</category><category domain="https://ioyoi.me/tags/tour/">tour</category><category domain="https://ioyoi.me/tags/graduation/">graduation</category></item><item><title>走进Torrent</title><link>https://ioyoi.me/tech/what-is-torrent/</link><guid isPermaLink="true">https://ioyoi.me/tech/what-is-torrent/</guid><pubDate>Mon, 01 Aug 2022 15:04:04 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;h2 id="torrent是什么">Torrent是什么？&lt;/h2>
&lt;p>Torrent是BitTorrent协议的一个索引文件，其本意是“洪流”，我们常把它叫做“种子”，大概是播种一颗“种子”，就能收获一组文件的缘故吧。&lt;/p>
&lt;p>若想理解Torrent，首先要了解BT协议是如何工作的。BT协议是最为经典的点对点（peer-to-peer，P2P）协议，其原理是将下载文件分为指定大小的区块，下载时，客户端携带索引文件中包含的特征码向Tracker服务器发出请求，Tracker服务器回复同样请求该文件信息的其他用户地址，随后客户端向其他用户发起连接，并相互交换下载完成的区块，并依照索引文件中的文件结构构造为原始文件，最终实现完整文件的快速下载。&lt;/p>
&lt;h2 id="torrent中有什么">Torrent中有什么？&lt;/h2>
&lt;h3 id="bencode">Bencode&lt;/h3>
&lt;p>Torrent实际上是一个文本文件，当使用编辑器打开时，会发现诸如&lt;code>d8:announce34:http://mgtracker.org:2710/announce&lt;/code>一类的元数据信息以及一长串的乱码。&lt;/p>
&lt;p>让我们先从元数据讲起，Torrent使用一种名为&lt;a href="https://zh.m.wikipedia.org/zh-hans/Bencode">Bencode&lt;/a>的编码方式，其支持字符串、整型数、列表和字典四种数据类型，最大的特点是会使用一个标识类型的字符与&lt;code>e&lt;/code>包裹所存数据，具体如下：&lt;sup id="fnref:1">&lt;a href="https://ioyoi.me/tech/what-is-torrent/#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;ul>
&lt;li>字符串：无需包裹，但需要在字符串前添加长度，组成&lt;code>{内容长度}:{内容}&lt;/code>的形式，例如&lt;code>7:bencode&lt;/code>；&lt;/li>
&lt;li>整型数：使用&lt;code>i&lt;/code>与&lt;code>e&lt;/code>包裹，例如&lt;code>i4e&lt;/code>、&lt;code>i-16e&lt;/code>；&lt;/li>
&lt;li>列表：使用&lt;code>l&lt;/code>与&lt;code>e&lt;/code>包裹，随后的每一条数据均为链表中的一个值，一个列表中可包含多种数据类型，例如&lt;code>l1:ai4ee&lt;/code>对应&lt;code>[&amp;quot;a&amp;quot;, 4]&lt;/code>；&lt;/li>
&lt;li>字典：使用&lt;code>d&lt;/code>与&lt;code>e&lt;/code>包裹，随后数据以&lt;code>键值键值键值...&lt;/code>的方式存放，键与值的数据类型同样不做限制，例如&lt;code>d1:ai1ei2e1:be&lt;/code>对应&lt;code>{&amp;quot;a&amp;quot;: 1, 2: &amp;quot;b&amp;quot;}&lt;/code>。&lt;/li>
&lt;/ul>
&lt;p>使用解码工具解码后，Torrrent文件的内容就很直观了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;announce&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;udp://tracker.openbittorrent.com:80/announce&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;announce-list&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;udp://tracker.openbittorrent.com:80/announce&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;udp://tracker.publicbt.com:80/announce&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;comment&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Big Buck Bunny, Sunflower version&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;created by&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;uTorrent/3320&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;creation date&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1387308159&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;length&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">355856562&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;bbb_sunflower_1080p_60fps_normal.mp4&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;piece length&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">524288&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pieces&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;hex&amp;gt;99 71 9B 2C 2E AA ...&amp;lt;/hex&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="torrent内容">Torrent内容&lt;/h3>
&lt;p>一个完整的Torrent文件需要包含以下内容：&lt;sup id="fnref:2">&lt;a href="https://ioyoi.me/tech/what-is-torrent/#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>&lt;/p>
&lt;ul>
&lt;li>&lt;code>announce&lt;/code>：Tracker服务器地址；&lt;/li>
&lt;li>&lt;code>announce-list&lt;/code>：一系列的备用Tracker服务器地址，由于各个服务器之间并不会同步信息，客户端通常会向多个甚至全部Tracker服务器均发送请求；&lt;/li>
&lt;li>&lt;code>comment&lt;/code>：用户添加的附加说明；&lt;/li>
&lt;li>&lt;code>creation date&lt;/code>：发布日期的Unix时间戳；&lt;/li>
&lt;li>&lt;code>created by&lt;/code>：生成种子的软件信息；&lt;/li>
&lt;li>&lt;code>info&lt;/code>：种子包含的文件信息。&lt;/li>
&lt;/ul>
&lt;p>&lt;code>info&lt;/code>是种子中最为关键的部分，客户端向Tracker服务器发出请求时，就使用SHA1哈希值作为种子的特征识别码，换言之，只要两个种子的&lt;code>info&lt;/code>部分完全相同，其余条目的更改不会影响该种子原文件的下载。&lt;code>info&lt;/code>中包含的内容分为两部分，一部分为区块信息，另一部分为文件结构。&lt;/p>
&lt;p>区块信息包括：&lt;/p>
&lt;ul>
&lt;li>&lt;code>piece length&lt;/code>：每个区块包含的字节数，即分割区块的大小；&lt;/li>
&lt;li>&lt;code>pieces&lt;/code>：各区块的20字节SHA1哈希值，其长度对应区块总数。&lt;/li>
&lt;/ul>
&lt;p>单文件的种子与包含多个文件的种子的文件结构部分略有差异，仅有单文件的文件结构较为简单，包括：&lt;/p>
&lt;ul>
&lt;li>&lt;code>name&lt;/code>：发布者建议的文件名称；&lt;/li>
&lt;li>&lt;code>length&lt;/code>：文件的字节长度，即文件大小。&lt;/li>
&lt;/ul>
&lt;p>多文件的&lt;code>info&lt;/code>部分如下所示：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>&lt;span class="err">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;files&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;length&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">662807209&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;[DMG&amp;amp;VCB-Studio] Aquatope of White Sand [01][1080p][x264_aac][tc].mp4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;length&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">501972919&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;[DMG&amp;amp;VCB-Studio] Aquatope of White Sand [02][1080p][x264_aac][tc].mp4&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>&lt;span class="err">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;[DMG&amp;amp;VCB-Studio] Aquatope of White Sand [1080p][tc]&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;piece length&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4194304&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pieces&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;hex&amp;gt;9B 46 57 ...&amp;lt;/hex&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其文件结构部分包括：&lt;/p>
&lt;ul>
&lt;li>&lt;code>name&lt;/code>：发布者建议的文件根目录名称；&lt;/li>
&lt;li>&lt;code>files&lt;/code>：文件列表；
&lt;ul>
&lt;li>&lt;code>length&lt;/code>：文件的字节长度，即文件大小；&lt;/li>
&lt;li>&lt;code>path&lt;/code>：发布者建议的文件路径。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>值得注意的是，文件路径是通过列表储存的，各级目录名称作为&lt;code>path&lt;/code>中的一条，例如&lt;code>a/b/c&lt;/code>应储存为&lt;code>&amp;quot;path&amp;quot;: [&amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;c&amp;quot;]&lt;/code>。&lt;/p>
&lt;p>随着BT协议的不断发展，Torrent文件也开始包含更多信息，例如&lt;code>nodes&lt;/code>字段对DHT表的支持和&lt;code>url-list&lt;/code>对可用HTTP下载地址的支持&lt;sup id="fnref:3">&lt;a href="https://ioyoi.me/tech/what-is-torrent/#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>，在此不再详述。&lt;/p>
&lt;h3 id="magnet链">Magnet链&lt;/h3>
&lt;p>Magnet是BitTorrent的另一种索引方式，相较Torrent文件，Magnet基于DHT网络实现，不依赖Tracker服务器，能够直接在DHT网络中寻址，连接用户开始文件下载。因此磁力链理论上只需要一个特征码即可开始文件下载，例如&lt;code>magnet:?xt=urn:btih:16c461b2a2437e6b6537d790ca41a9413734e8ad&lt;/code>，&lt;code>xt&lt;/code>为eXact Topic缩写，是磁力链的特征码，&lt;code>urn&lt;/code>表示Universe Resource Name，&lt;code>btih&lt;/code>则表示使用BitTorrent的散列函数，除&lt;code>btih&lt;/code>外，Magnet链也可以使用&lt;code>ed2k&lt;/code>、&lt;code>sha1&lt;/code>、&lt;code>md5&lt;/code>等多种散列方式。&lt;/p>
&lt;p>Magnet可以扩展更多参数&lt;sup id="fnref:4">&lt;a href="https://ioyoi.me/tech/what-is-torrent/#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>，常见的如：&lt;/p>
&lt;ul>
&lt;li>&lt;code>dn&lt;/code>：显示名称；&lt;/li>
&lt;li>&lt;code>xl&lt;/code>：文件大小；&lt;/li>
&lt;li>&lt;code>kt&lt;/code>：关键字；&lt;/li>
&lt;li>&lt;code>tr&lt;/code>：Tracker服务器。&lt;/li>
&lt;/ul>
&lt;p>与Torrent文件相比，Magnet不需要客户端访问Tracker服务器，理论上只要你可访问的网段中有正在下载的用户，你便可以开启下载，因此在下载墙外资源时十分好用。不过，无Tracker的Magnet链在开始下载时需要较长的时间从网络中的其他用户处获取元数据，因此大多数资源发布时都会提供带Tracker地址的磁力链，这种下载方式就和使用Torrent文件时无异了。&lt;/p>
&lt;h2 id="torrent安全么">Torrent安全么？&lt;/h2>
&lt;p>在BT下载协议中，每位用户既是下载者，也是上传者，那么，如何保证文件的完整性和一致性呢？可以留意到Torrent中&lt;code>pieces&lt;/code>部分提供了每个区块的散列值，因此当客户端每完成一个区块的下载时，都会计算该区块的散列值并与记录值比对，若不同，则丢弃重新下载。&lt;/p>
&lt;p>那么，如果构建一个与待下载区块同大小的恶意区块，并且两区块拥有同样的散列值，那么其他下载者在获得该恶意区块时可以成功通过校验污染目标机器。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208012033116.webp" alt="">&lt;/p>
&lt;p>从理论上讲，针对现在使用的SHA1散列算法，该种攻击方式是可行的；不过幸运的是，现有破解算法的代价十分高昂，CWI与谷歌安全团队在2017年发布了&lt;a href="https://shattered.io/">SHA1散列碰撞算法&lt;/a>，并以此生成了两份大小相同、内容不同的同散列值文件，此次碰撞攻击进行了九百万亿次散列计算，需要6500年的单CPU计算时间与110年的单GPU计算时间。&lt;sup id="fnref:5">&lt;a href="https://ioyoi.me/tech/what-is-torrent/#fn:5" class="footnote-ref" role="doc-noteref">5&lt;/a>&lt;/sup>这一数字也许对个人计算机来说过于惊人，但对于控制大量肉鸡的黑客与国家而言仍然是可行的，也许Torrent是时候更换更为安全的校验方式了。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202208012132954.webp" alt="image-20220801213236244">&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a href="https://zh.m.wikipedia.org/zh-hans/Bencode">https://zh.m.wikipedia.org/zh-hans/Bencode&lt;/a>&amp;#160;&lt;a href="https://ioyoi.me/tech/what-is-torrent/#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a href="https://fileformats.fandom.com/wiki/Torrent_file">https://fileformats.fandom.com/wiki/Torrent_file&lt;/a>&amp;#160;&lt;a href="https://ioyoi.me/tech/what-is-torrent/#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a href="https://en.wikipedia.org/wiki/Torrent_file#Extensions">https://en.wikipedia.org/wiki/Torrent_file#Extensions&lt;/a>&amp;#160;&lt;a href="https://ioyoi.me/tech/what-is-torrent/#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4">
&lt;p>&lt;a href="https://zh.wikipedia.org/zh-cn/%E7%A3%81%E5%8A%9B%E9%93%BE%E6%8E%A5">https://zh.wikipedia.org/zh-cn/%E7%A3%81%E5%8A%9B%E9%93%BE%E6%8E%A5&lt;/a>&amp;#160;&lt;a href="https://ioyoi.me/tech/what-is-torrent/#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:5">
&lt;p>&lt;a href="https://security.googleblog.com/2017/02/announcing-first-sha1-collision.html">https://security.googleblog.com/2017/02/announcing-first-sha1-collision.html&lt;/a>&amp;#160;&lt;a href="https://ioyoi.me/tech/what-is-torrent/#fnref:5" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/justwrite/">justwrite</category><category domain="https://ioyoi.me/tags/torrent/">torrent</category></item><item><title>STM32开发记·壹·编译</title><link>https://ioyoi.me/tech/stm32-dev-1/</link><guid isPermaLink="true">https://ioyoi.me/tech/stm32-dev-1/</guid><pubDate>Mon, 25 Jul 2022 10:01:24 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;div class="note primary">
&lt;p>这是&lt;a href="https://ioyoi.me/life/just-write/">年更百篇计划&lt;/a>的第5篇文章，目前已经完成&lt;strong>6/100&lt;/strong>篇文章。&lt;/p>
&lt;/div>
&lt;p>外出实习，需要使用STM32开发板，开此系列文章记录萌新摸索的过程。&lt;/p>
&lt;h2 id="工具准备">工具准备&lt;/h2>
&lt;p>网上的STM32教程基本都是用KEIL5开发的，但是对于我来说，我并不太需要KEIL提供的一些高级功能，能够提供代码补全和调试查看寄存器功能就足够了，因此本文使用了VS Code+Make的工具链进行开发。需要注意的是，软件仿真是KEIL的专有功能，需要仿真时可以使用STM32提供的专用开发软件STM32CubeMX进行快速工具链转换。&lt;/p>
&lt;p>以下是我使用的一些软件：&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.st.com/zh/development-tools/stm32cubemx.html">STM32CubeMX&lt;/a>：STM32官方提供的工程生成器，用于生成包含驱动库的工程项目；&lt;/li>
&lt;li>&lt;a href="https://community.chocolatey.org/packages/gcc-arm-embedded">GNU Arm Embedded Toolchain&lt;/a>：ARM平台跨平台编译工具包；&lt;/li>
&lt;li>&lt;a href="https://community.chocolatey.org/packages/make">GNU make&lt;/a>：Windows下的make工具；&lt;/li>
&lt;li>&lt;a href="https://community.chocolatey.org/packages/openocd">OpenOCD&lt;/a>：片上调试工具；&lt;/li>
&lt;li>VS Code
&lt;ul>
&lt;li>C/C++：C语言支持，相关snippet包也可以自行安装；&lt;/li>
&lt;li>Arm Assembly：Arm语法支持；&lt;/li>
&lt;li>Cortex-Debug：调试工具；&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>除STM32CubeMX外，其余工具均有choco包：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">choco install gcc-arm-embedded make openocd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="工程生成">工程生成&lt;/h2>
&lt;p>首先打开STM32CubeMX软件，&lt;code>File-New Project&lt;/code>新建工程，搜索并选择所使用的芯片组，点击&lt;code>Start Project&lt;/code>开始配置。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202207251107812.webp" alt="">&lt;/p>
&lt;p>在弹出的功能界面中分配引脚并配置时钟，随后在&lt;code>Project Manager&lt;/code>中设置工程路径，在&lt;code>Toolchain/IDE&lt;/code>一栏中选择&lt;code>MakeFile&lt;/code>。如要使用Keil 5作为开发工具，则需要选择&lt;code>MDK-ARM&lt;/code>。开发过程中，我们可以随时更改该选项重新生成编译相关代码，用户输入的功能代码不会受到影响。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202207251113767.webp" alt="image-20220725111305431">&lt;/p>
&lt;p>&lt;code>Code Generator&lt;/code>选项卡中可设置生成规则，通常选择仅拷贝所需库减小工程体积，并生成独立的初始化代码文件。&lt;code>Advanced Setting&lt;/code>选项卡中可选择HAL或LL驱动库。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202207251119823.webp" alt="image-20220725111944808">&lt;/p>
&lt;p>设置完成后，点击右上角&lt;code>GENERTE CODE&lt;/code>生成工程文件。&lt;/p>
&lt;h2 id="vs-code配置">VS Code配置&lt;/h2>
&lt;p>使用VS Code打开目录，主要文件结构如下：&lt;/p>
&lt;pre tabindex="0">&lt;code>PROJECT
├─Core
│ ├─Inc
│ └─Src
├─Drivers
│ ├─CMSIS
│ │ ├─Device
│ │ │ └─ST
│ │ │ └─STM32F1xx
│ │ │ └─Include
│ │ └─Include
│ └─STM32F1xx_HAL_Driver
│ ├─Inc
│ │ └─Legacy
│ └─Src
└─Makefile
&lt;/code>&lt;/pre>&lt;p>其中，用户代码保存在&lt;code>Core&lt;/code>文件夹中，程序入口为&lt;code>Core\Src\main.c&lt;/code>，此时在终端中键入&lt;code>make&lt;/code>命令，已经可以在&lt;code>build&lt;/code>目录下生成&lt;code>.hex&lt;/code>二进制文件与&lt;code>.elf&lt;/code>可执行文件。&lt;/p>
&lt;p>不过使用VS Code打开源文件时，会发现大量include报错，这是由于C/C++插件并未索引到头文件。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202207251133957.webp" alt="image-20220725113302729">&lt;/p>
&lt;p>为解决该问题，需要参考&lt;code>Makefile&lt;/code>文件对C/C++插件进行配置。在&lt;code>Makefile&lt;/code>中，我们重点关注&lt;code>C_DEFS&lt;/code>与&lt;code>C_INCLUDES&lt;/code>两项参数。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-makefile" data-lang="makefile">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># C defines
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nv">C_DEFS&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-DUSE_HAL_DRIVER &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="err">-DSTM32F103xE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># C includes
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c">&lt;/span>&lt;span class="nv">C_INCLUDES&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-ICore/Inc &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-IDrivers/STM32F1xx_HAL_Driver/Inc &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-IDrivers/STM32F1xx_HAL_Driver/Inc/Legacy &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-IDrivers/CMSIS/Device/ST/STM32F1xx/Include &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="err">-IDrivers/CMSIS/Include&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在VS Code中找到&lt;code>C/C++ Edit Configuration (JSON)&lt;/code>命令，生成&lt;code>c_cpp_properties.json&lt;/code>文件，键入以下配置：&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202207251137870.webp" alt="image-20220725113735382">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;configurations&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;arm&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;includePath&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;${workspaceFolder}/Core/Inc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;${workspaceFolder}/Drivers/STM32F1xx_HAL_Driver/Inc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;${workspaceFolder}/Drivers/STM32F1xx_HAL_Driver/Inc/Legacy&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;${workspaceFolder}/Drivers/CMSIS/Device/ST/STM32F1xx/Include&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;${workspaceFolder}/Drivers/CMSIS/Include&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;defines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;USE_HAL_DRIVER&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;STM32F103xE&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;compilerPath&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;C:/ProgramData/chocolatey/lib/gcc-arm-embedded/tools/gcc-arm-none-eabi-10-2020-q4-major/bin/arm-none-eabi-gcc.exe&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intelliSenseMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;windows-gcc-arm&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;browse&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;limitSymbolsToIncludedHeaders&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;databaseFilename&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;path&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;${workspaceFolder}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中，&lt;code>name&lt;/code>项可以自定义配置名称，&lt;code>includePath&lt;/code>与&lt;code>defines&lt;/code>分别对应&lt;code>Makefile&lt;/code>中的&lt;code>C_DEFS&lt;/code>与&lt;code>C_INCLUDES&lt;/code>，&lt;code>compilerPath&lt;/code>为&lt;code>arm-none-eabi-gcc.exe&lt;/code>所在的路径，&lt;code>intelliSenseMode&lt;/code>需要选择&lt;code>gcc-arm&lt;/code>或&lt;code>windows-gcc-arm&lt;/code>。&lt;/p>
&lt;p>保存配置文件后，返回源文件，发现红色波浪线已经消失，头文件可以被正常索引。&lt;/p>
&lt;h2 id="编译">编译&lt;/h2>
&lt;p>上文已经提到，可以使用&lt;code>make&lt;/code>命令直接进行编译，为方便调试工具进行编译调试，可在VS Code中创建对应任务，对应&lt;code>tasks.json&lt;/code>如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;2.0.0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tasks&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;build&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;shell&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;command&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;make&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;args&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;clean&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;shell&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;command&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;make&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;args&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;clean&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/justwrite/">justwrite</category><category domain="https://ioyoi.me/tags/stm32/">stm32</category><category domain="https://ioyoi.me/tags/vscode/">vscode</category></item><item><title>从Syncthing谈文件同步工具</title><link>https://ioyoi.me/tech/syncthing-and-sync-tools/</link><guid isPermaLink="true">https://ioyoi.me/tech/syncthing-and-sync-tools/</guid><pubDate>Mon, 02 May 2022 13:39:08 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;div class="note primary">
&lt;p>这是&lt;a href="https://ioyoi.me/life/just-write/">年更百篇计划&lt;/a>的第4篇文章，目前已经完成&lt;strong>6/100&lt;/strong>篇文章。&lt;/p>
&lt;/div>
&lt;p>重装系统安装&lt;a href="https://www.microsoft.com/en-us/download/search.aspx?q=synctoy">SyncToy&lt;/a>时，发现巨硬已经把它从Download Center中移除，为了同步工位台式机和笔记本上的资料，我开始寻找替代品，最终发现了&lt;a href="https://syncthing.net/">Syncthing&lt;/a>这一神器。&lt;/p>
&lt;h2 id="优点">优点&lt;/h2>
&lt;p>Syncthing完美实现了SyncToy的同步功能，同时做出了以下改进：&lt;/p>
&lt;ul>
&lt;li>全平台可用。这意味着我可以方便的把照片同步到Pixel白嫖Google相册；&lt;/li>
&lt;li>使用Scan和Watch两种方式检测文件改动。相较SyncToy的定期扫描，能够在消耗较少资源的情况下保持足够高的同步频率；&lt;/li>
&lt;li>自带中转功能。Syncthing可以通过搭建Relay服务器实现中转功能，与Owncloud的中转功能不同，它并不需要转存文件至中转服务器，中转服务器仅提供转发流量的功能，因此小容量VPS也能胜任中转任务；同时Syncthing拥有大量&lt;a href="https://relays.syncthing.net/">用户贡献的中转服务器&lt;/a>（即便在国内），传输小文件完全够用。&lt;/li>
&lt;li>文件过滤功能。类似于&lt;code>.gitignore&lt;/code>，syncthing提供&lt;code>.stignore&lt;/code>跳过一些文件的同步，防止一些不必要或差异化的文件传播，例如&lt;code>node_moudle&lt;/code>。&lt;/li>
&lt;li>开源。Syncthing的源码和协议均公开，使用所需的发现服务器与中转服务器均可以自行部署，你不会遇到&lt;a href="https://www.resilio.com/">Resilio Sync&lt;/a> (BitTorrent Sync)上Trecker服务器被墙带来的麻烦。&lt;/li>
&lt;/ul>
&lt;h2 id="不足">不足&lt;/h2>
&lt;p>当然，在使用Syncthing时也遇到了一些问题，主要集中在文件冲突和文件删除上：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>Syncthing的版本控制功能弱，当其检测到文件冲突时，会将修改日期靠前的文件加入后缀重命名并传播到各个设备，而我更希望它能够像复制文件一样询问具体保留哪一项；尽管由于同步的高频率，这个问题很少遇到，但偶尔生成的长名称文件看着多少有点心烦。&lt;/p>
&lt;div class="note info">&lt;p>在Windows下，使用&lt;a href="https://github.com/canton7/SyncTrayzor">SyncTrayzor&lt;/a>客户端时，遇到冲突时会弹窗提示选择保留文件，但目录下仍会留下&lt;code>~syncthing~{file_name}.tmp&lt;/code>文件。&lt;/p>&lt;/div>
&lt;/li>
&lt;li>
&lt;p>当在A设备删除同步文件夹中的文件时，经常出现Scan后从设备B重新复制一份的情况，导致文件无法被删除。但Syncthing Watch功能使用的&lt;code>fsnotify&lt;/code>包应当是可以监听到删除动作的，猜测这可能是一个Bug。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>当使用IDEA等其他工具在同步目录下编辑时，由于频繁的保存会不断触发同步，因此代码工程的同步最好还是交给git完成。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="检测机制">检测机制&lt;/h2>
&lt;p>如上文所述，Syncthing提供Scan和Watch两种方式检测文件改动。&lt;/p>
&lt;p>Scan意味着扫描同步文件夹中的全部内容，计算SHA256值与另一设备比较，当出现不同时触发同步传输。这一计算过程消耗大量资源，因此无法实时进行，往往在启动时运行或作为定时任务周期进行。&lt;/p>
&lt;p>实时的差异检测通过Watch实现，这一功能在不同操作系统下有着&lt;a href="https://github.com/fsnotify/fsnotify">不同的实现形式&lt;/a>，在大部分文件系统下Watcher可以通过监听文件系统事件完成，例如&lt;a href="https://man7.org/linux/man-pages/man7/inotify.7.html">Linux&lt;/a>下的&lt;code>inotify&lt;/code>和&lt;a href="https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-readdirectorychangesw">Windows&lt;/a>下的&lt;code>ReadDirectoryChangesW&lt;/code>，Watcher的资源消耗远远小于扫描，可以做到数秒周期的运行，保障了同步的实时性。通过监听事件实现的Watcher仅当进程运行时有效，若文件在Watcher未运行时发生更改将无法被检测，因此在启动时需要Scan的配合。&lt;/p>
&lt;h2 id="传输机制">传输机制&lt;/h2>
&lt;p>当尝试自行部署Syncthings服务时，会发现官方提供了Discovery Server与Relay Server两个服务，这与Syncthing传输的工作机理有关。&lt;/p>
&lt;p>发现服务器的功能是注册和分发地址。当一台设备启动Syncthing时，会生成一个UID作为设备标识，当全局发现功能启用时，客户端会每隔30分钟向设置的全局发现服务器告知在线状态，同时，当添加远程设备时，客户端也会向发现服务器查询该设备的在线状态与网络地址。&lt;/p>
&lt;p>Syncthing的发现服务器仅提供地址信息，既不转发数据也不提供中转，所有的数据传输均是端到端的。对于拥有公网地址或处于同一NAT下的设备，Syncthing可以通过ip直连，而对于没有公网地址的设备，则需要中转服务器进行流量转发。&lt;/p>
&lt;p>当前，Syncthing的转发机制是首先尝试直连，直连失败时立刻回落到流量转发，这意味着仅当两台设备均处于同一NAT或公网时才能直连，否则所有流量将通过中转服务器转发，这就给中转服务器带宽带来了很大的压力。实际上，即便两台设备位于不同NAT下，大多数场景下仍然可以通过“&lt;a href="https://bford.info/pub/net/p2pnat/">打洞&lt;/a>”的方式创建点对点的连接。如果中转服务器可以集成这一功能，打洞失败再回落中转，数据传输将不再受中转服务器线路的影响，体验将会更上一层楼。&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/justwrite/">justwrite</category><category domain="https://ioyoi.me/tags/syncthings/">syncthings</category><category domain="https://ioyoi.me/tags/tools/">tools</category></item><item><title>Openwrt从入门到入土</title><link>https://ioyoi.me/tech/openwrt-start-to-end/</link><guid isPermaLink="true">https://ioyoi.me/tech/openwrt-start-to-end/</guid><pubDate>Wed, 16 Mar 2022 22:31:08 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;div class="note primary">
&lt;p>这是&lt;a href="https://ioyoi.me/life/just-write/">年更百篇计划&lt;/a>的第3篇文章，目前已经完成&lt;strong>6/100&lt;/strong>篇文章。&lt;/p>
&lt;/div>
&lt;p>曾经向往连上路由器就能科学上网的透明代理体验，正好前些日子为了同步笔记本与工位台式机的资料，从校园二手平台上花88入了台小米路由器4a千兆版，获得了一次折腾的机会，但由于种种原因最终拔草弃坑，谨以此文记录一下折腾的过程。&lt;/p>
&lt;h2 id="准备工作">准备工作&lt;/h2>
&lt;p>检查路由器当前系统版本是否能够使用&lt;a href="https://github.com/acecilia/OpenWRTInvasion">OpenWRTInvasion&lt;/a>，若不在支持列表内，建议通过手动升级或&lt;a href="https://www.miwifi.com/miwifi_download.html">修复工具&lt;/a>将系统刷为&lt;code>firmwares/stock&lt;/code>中的2.28.62版本。&lt;/p>
&lt;h2 id="解锁ssh">解锁ssh&lt;/h2>
&lt;p>实质上小米路由器的固件就是openwrt魔改而来，所以这里就不用折腾breed等bootloader工具了，直接使用Openwrt中自带的&lt;code>mtd&lt;/code>命令刷入openwrt。&lt;/p>
&lt;p>首先借助&lt;a href="https://github.com/acecilia/OpenWRTInvasion">OpenWRTInvasion&lt;/a>获得root权限并进入路由器后台，运行如下命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">git clone git@github.com:acecilia/OpenWRTInvasion.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> OpenWRTInvasion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pip install -r requirements.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">python remote_command_execution_vulnerability.py
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>按照提示输入路由器后台密码即可获得ssh命令，密码默认为&lt;code>root&lt;/code>。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202203021049333.webp" alt="">&lt;/p>
&lt;h2 id="刷入固件">刷入固件&lt;/h2>
&lt;p>&lt;a href="https://firmware-selector.openwrt.org/?version=21.02.2&amp;amp;target=ramips%2Fmt7621&amp;amp;id=xiaomi_mi-router-4a-gigabit">下载&lt;/a>并安装官方固件包，由于分区限制，只有&lt;code>/tmp&lt;/code>目录可以容纳固件包，在其他目录下载会提示写入错误。注意需根据版本选择对应的KERNEL包链接，同时可以把SYSUPGRADE包一同下载备用。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl https://downloads.openwrt.org/releases/21.02.2/targets/ramips/mt7621/openwrt-21.02.2-ramips-mt7621-xiaomi_mi-router-4a-gigabit-initramfs-kernel.bin -o openwrt.bin --insecure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mtd -e OS1 -r write openwrt.bin OS1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>命令行提示Rebooting，路由器电源指示灯恢复蓝色常亮后，刷机成功，可以通过ssh或直接用浏览器打开&lt;a href="http://192.168.1.1/cgi-bin/luci/">luci界面&lt;/a>配置openwrt，密码处输入任意内容，均可进入后台。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202203021224639.webp" alt="">&lt;/p>
&lt;h2 id="修复wifi">修复WiFi&lt;/h2>
&lt;p>首次刷入系统后，进入luci界面会发现没有Wireless选项，这是由于Kernel包缺少了无线驱动导致系统未识别到无线设备。Openwrt论坛中也有不少用户反映该问题，大概率是固件包的缺陷。&lt;/p>
&lt;p>该问题可简单地通过重新刷入SYSUPGRADE包解决。luci界面下，在System-Backup/Flash Firmware-Flash new firmware image选项中刷入下载好的同版本SYSUPGRADE包，注意取消勾选保留设置选项，等待刷机结束后luci界面自动刷新。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202203021224135.webp" alt="">&lt;/p>
&lt;p>重新登陆管理界面，Network-Wireless选项卡已恢复，可以点选Enable按钮打开无线功能。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202203021225121.webp" alt="">&lt;/p>
&lt;h2 id="更换软件源">更换软件源&lt;/h2>
&lt;p>未部署科学上网插件前，访问官方软件仓库的速度极慢，可以通过更换国内源解决。值得注意的是，Openwrt默认不支持https证书验证，因此使用https仓库需要额外配置，这里图省事就直接用http了。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sed -i &lt;span class="s1">&amp;#39;s_https://downloads.openwrt.org_http://mirrors.tuna.tsinghua.edu.cn/openwrt_&amp;#39;&lt;/span> /etc/opkg/distfeeds.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="科学上网--弃坑">科学上网 &amp;amp; 弃坑&lt;/h2>
&lt;p>路由器能正常上网后开始鼓捣科学上网了，这时发现科学上网的插件（如&lt;a href="https://github.com/xiaorouji/openwrt-passwall">passwall&lt;/a>、&lt;a href="https://github.com/maxlicheng/luci-app-ssr-plus">ssr-plus+&lt;/a>、&lt;a href="https://github.com/vernesong/OpenClash">openclash&lt;/a>等）大多不在软件源仓库中，并且路由器上的Openwrt并不能从源码自行编译插件。交叉编译无论是编译打包插件源码的固件还是跨平台编译插件包基本都要整个虚拟机环境。网上流传的插件包也大多是x86版本，且依赖安装极其繁琐。&lt;/p>
&lt;p>同时和tg群里的小伙伴们交流了解到，对于这种路由器来说，运行Xray都是勉勉强强，Clash更是毫无可能，遂决定弃坑，也许之后有了树莓派做旁路由之后再来折腾。&lt;/p>
&lt;h2 id="后记">后记&lt;/h2>
&lt;p>不得不承认自己现在已经过了喜欢折腾的年纪，不同于之前的刨根问底，现在的需求变成了方便就好、能用就行，曾经折腾的乐趣如今只剩下了麻烦，大概我已经不再向往Geek也不再热爱技术了。&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/justwrite/">justwrite</category><category domain="https://ioyoi.me/tags/openwrt/">openwrt</category></item><item><title>数码装备·本科篇</title><link>https://ioyoi.me/life/edc-undergraduate/</link><guid isPermaLink="true">https://ioyoi.me/life/edc-undergraduate/</guid><pubDate>Sun, 14 Nov 2021 20:50:05 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;div class="note primary">
&lt;p>这是&lt;a href="https://ioyoi.me/life/just-write/">年更百篇计划&lt;/a>的第2篇文章，目前已经完成&lt;strong>6/100&lt;/strong>篇文章。&lt;/p>
&lt;/div>
&lt;p>本科结束，收拾东西搬离宿舍的时候，把身边所有在用的电子产品拍了个照，记录下财务不自由的穷孩子的日常装备吧~&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202111151940980.webp" alt="搬宿舍前的全家福">&lt;/p>
&lt;hr>
&lt;h2 id="手机">手机&lt;/h2>
&lt;p>手机大概是陪我时间最长的数码设备了，先上大四的主力机，信仰加持的Pixel 2代。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202111151941586.webp" alt="Pixel 2">&lt;/p>
&lt;p>该机购于2020年夏天，淘宝不到千元，百分百是翻新机了，本来是作为旧手机碎屏时的救急使用，结果上手后以外的喜欢，于是当了一年的主力机。主要优点是原生的系统和称手的尺寸和重量，作为谷歌全家桶的重度依赖者，谷歌助手的实时唤醒以及位置信息记录十分方便，小巧的机身就算拿的时间很长小拇指也不会疼，Google相册的无限流量更是大大的福利。不过这手机的续航是硬伤，不玩游戏的情况下一天至少三充，不知是翻新机的质量问题还是国内app频繁唤醒导致的水土不服。&lt;/p>
&lt;p>由于要毕业旅行，老是背着充电宝实在麻烦，于是趁着618花3300入手了小米11的素皮版，主要看重的是他的屏幕和机身。平常用手机没有戴套的系馆，素皮的后盖和皮肤亲和度很高，有HDR加持的高刷屏观感相当不错。而缺点方面，竟然是小米最引以为傲的MIUI，必须与手机管家拼手速才能更换第三方桌面，且更换第三方桌面后不能使用全屏手势，此外，系统会把语音助手不停的重置为小爱同学，诸如此类的“不自由”很大地改变了我的使用习惯。如果再给我一次机会选择，我会买个同价位的Pixel 4a。&lt;/p>
&lt;h2 id="平板">平板&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/202111151942331.webp" alt="iPad pro 10.7">&lt;/p>
&lt;p>2017款的iPad pro 10.7，用高考完做家教收入送自己的入学礼物，笔购于同年冬天（虽然并没做多少笔记&lt;/p>
&lt;p>作为平板来说，iPad绝对是满分产品，领先时代的高刷屏观感极佳，配合Pencil的写字体验也很顺手，用了四年依然有着不错的响应速度和续航，看来再服役个三年也不成问题。&lt;/p>
&lt;h2 id="笔记本">笔记本&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/202111151943813.webp" alt="拯救者Y7000">&lt;/p>
&lt;p>2018年款拯救者Y7000，8代i5+1050Ti的版本，为了金工实习小学期购买，是我本科期间买的最后悔的数码产品。当时的游戏本并不能提供足够的游戏体验，处于能玩的轻薄本也能玩，轻薄本不能玩的游戏本也玩不好的水平。而由于搭载了独立显卡，在同价位的情况下牺牲了续航和屏幕，断电后只能用两三小时，砖头一样的充电器不得不随身携带，屏幕严重偏黄，键盘触摸板极易打油。在已经配了台式机的情况下依然买了游戏本，属实是脑子不太好使。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/202111151944412.webp" alt="Yoga 14s">&lt;/p>
&lt;p>2021年锐龙版的Yoga 14s，大四毕设时省吃俭用换的轻薄本，r7 5800h的性能发挥相当不错，窄边框高分屏颜值不错，金属c面相当有质感，做工不错，用了半年多还没出现过啥bug，总体上是令我相当满意的一台本子。美中不足是只有单硬盘位，搭载的512G固态显然是不太够用的，最近大容量固态盘的价格又居高不下，于是C盘常年处于泛红的状态。&lt;/p>
&lt;h2 id="台式机">台式机&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/202111151944377.webp" alt="Jonsbo C3">&lt;/p>
&lt;p>简单来说就是游戏机了，大一吃鸡最火的时候配的，r5 1600+1050Ti+16G的配置，后来因为玩《都市：天际线》加到了32G的内存，Steam的入门机型，虽然已经是配的第二台电脑了，但是装机手法还是不太熟练，满载风扇有异响，但戴上耳机丝毫不耽误玩的开心。大概我本科期间的颓废，它要背一半的锅。&lt;/p>
&lt;p>当时受限于预算，没有选到自己喜欢的机箱，电源也只给了450W，因此之后应该是不会继续升级了，现在放在工位做服务器打工了。最近在知乎看到了&lt;a href="https://zhuanlan.zhihu.com/p/431652783">一台小箱子&lt;/a>甚是养眼，决定短时间内不再攒主机了，省点钱毕业整一台梦想班机。&lt;/p>
&lt;p>至此主要的四件套介绍完毕了，从2021年开始，明显可以感受到笔记本的生产力上去了，应付日常工作绰绰有余，因此手机+Pad+笔记本+台式机/游戏机是个相当完美的搭配。&lt;/p>
&lt;hr>
&lt;p>以下是配件篇：&lt;/p>
&lt;h2 id="显示器">显示器&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/202111151947721.webp" alt="Dell U2417H">&lt;/p>
&lt;p>Dell家的U2417H，一眼相中的显示屏，虽然比1080p屏均价贵了三成且不支持HDR，但领先时代的窄边框外观绝对值这个价格，色彩上由于一直开着印刷品模式并没有太大的感受，主观感觉属于不太鲜艳看着舒服的程度，自带四个USB口和3.5耳机口，平时只要插拔一条上行线就能实现台式机和笔记本的切换，总体是我比较满意的屏幕。&lt;/p>
&lt;p>对于下一台显示器，我的要求是窄边+ 4K 60fps + HDR400/600 + 65W Type C，目前最便宜的4K Dell U系价格已经来到4000左右，最为理想的U3219Q更是要6500大洋，荷包实在有些负担不起，只好做等等党观望一波。&lt;/p>
&lt;h2 id="键鼠">键鼠&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/202111151955800.webp" alt="">&lt;/p>
&lt;p>鼠标是罗技卖的很好的G502，外观炫酷，功能键多，外加无极滚轮看书上网很方便，尺寸正好适合我的大手，至于网上说的沉，我是没啥感觉，甚至还加了俩配重块，毕竟那个鼠标用久了手不疼呢，如果坏了应该会继续换个G502的无线版。&lt;/p>
&lt;p>键盘是同学推荐的Likeyboard mx-104，现在淘宝上应该找不到了，当时应该算是最便宜的原厂红轴键盘，键帽比较差，易打油，不过一直也没换，黑框确实不太好配到好看的键帽，但总体体验还算不错，声音放宿舍用还是有点大，感谢我的室友没有打我。在CJ上种草了&lt;a href="https://item.taobao.com/item.htm?id=631031207660">MelGeek的客制键盘&lt;/a>，也许有钱了会买个静音粉轴的来玩。&lt;/p>
&lt;h2 id="耳机">耳机&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/202111152053681.webp" alt="">&lt;/p>
&lt;p>头戴式的SHP9500，性价比很高的一个耳机，大耳罩不会压得耳朵疼，音质我也听不出好坏，缺点是发声单元直接裸露在外，漏音很严重，基本站在你身后就能听到耳机里的声音。&lt;/p>
&lt;p>无线耳机是漫步者的声迈X3，不花大价钱的TWS也就只能听个响吧，不是很喜欢半入耳式于是买了这款入耳的塞子，带着还算舒服，周围环境音不大的情况下麦克风打个电话也没问题。其实最早用的是与冇心联名的换皮款Minibuds，颜色好看还是Type C口，后面连着丢了两次，痛定思痛买了便宜一半的X3，充电口换成了Micro USB，出远门必须多带一条线。&lt;/p>
&lt;h2 id="充电">充电&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/202111152139872.webp" alt="">&lt;/p>
&lt;p>倍思的100W充电头，换笔记本后购入，两个C口两个A口，单口可以提供和笔记本自带砖头充电器同样的100W输出，双口下65W+30W刚好让iPad满功率充电，回家基本带一个充电器就够用了。&lt;/p>
&lt;p>小米移动电源3，闪充版摔坏后购入，主要功能是宿舍熄灯后救急，20000mAh的容量绝对是够用了，当时手机闪充还没成为主流，18W的输出功率也够用了，此外可以通过C口双向充电，出去只带C口的线就够了。&lt;/p>
&lt;h2 id="路由器">路由器&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/202111152140121.webp" alt="">&lt;/p>
&lt;p>水星家的AC1900M，入门级千兆路由器，因为经常要在电脑间对拷文件购入，无线有线对拷可以达到70M/s，还算是很不错了。下台路由器大概要换支持软路由的了，内网穿透和透明代理都算是刚需了。&lt;/p>
&lt;h2 id="桌面摆件">桌面摆件&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/202111152156567.webp" alt="">&lt;/p>
&lt;p>骚红色的DualShock 4，买不起游戏机，买个手柄还是可以的，感谢它陪我通关了诸多3A大作。索爸爸的新手柄看评测很香，不知寒假能不能买到原价PS5呢。&lt;/p>
&lt;p>颜色很搭的从某宝不到20买的杂牌蓝牙音箱，实际上一直当作时钟摆件，镜面还挺好看。&lt;/p>
&lt;h2 id="随身物品">随身物品&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/202111152158992.webp" alt="">&lt;/p>
&lt;p>飞利浦家的拓展坞，金属外壳做工不错，摔了很多次还是能用，不过插上网线发热严重。&lt;/p>
&lt;p>三星Bar Plus，目前第一梯队的U盘，作为钥匙链简直完美~&lt;/p>
&lt;p>以及并不是数码产品，从高中到现在丢过无数支的百乐V5。&lt;/p>
&lt;hr>
&lt;p>现在采购的时候，由于贫穷，已经从买贵的向买够用的转变了。能根据自己的需求选择电子产品，算是不小的进步吧。三年后又一次搬家时，我的装备又会如何呢~&lt;/p></description><category domain="https://ioyoi.me/life/">life</category><category domain="https://ioyoi.me/tags/justwrite/">justwrite</category></item><item><title>年更百篇计划</title><link>https://ioyoi.me/life/just-write/</link><guid isPermaLink="true">https://ioyoi.me/life/just-write/</guid><pubDate>Mon, 01 Nov 2021 18:59:18 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;div class="note primary">
&lt;p>这是&lt;a href="https://ioyoi.me/life/just-write/">年更百篇计划&lt;/a>的第1篇文章，目前已经完成&lt;strong>6/100&lt;/strong>篇文章。&lt;/p>
&lt;/div>
&lt;p>距离上一篇文章的发表，已经有一年有余了，并不是头脑空空没有点子可写，更多的是懒虫发作不想整理成文章，实在是怠惰呢。&lt;/p>
&lt;p>细想来，我好像一直是一个“眼高手低”的人，脑中的想法只停留在计划表上，却从来没有实质性的进展，究其原因，主要在于缺乏动力。&lt;/p>
&lt;p>前些日子网上冲浪，看到了一个&lt;a href="https://100daystooffload.com/">#100DaysToOffload&lt;/a>的项目，内容是在一年内更新100篇博客文章，其“内容无需深刻、养成记录习惯”的主题吸引了我，因此我开启了这个年更百篇的计划，希望通过规律频繁的博客更新，养成自己记录生活的习惯。&lt;/p>
&lt;blockquote>
&lt;p>Just. Write.&lt;/p>
&lt;/blockquote></description><category domain="https://ioyoi.me/life/">life</category><category domain="https://ioyoi.me/tags/justwrite/">justwrite</category></item><item><title>Hugo Shortcodes</title><link>https://ioyoi.me/tech/hugo-shortcodes/</link><guid isPermaLink="true">https://ioyoi.me/tech/hugo-shortcodes/</guid><pubDate>Tue, 15 Sep 2020 17:46:32 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>前些日子看上了hexo-butterfly主题的&lt;a href="">Note标签&lt;/a>，试了试Hugo上的&lt;a href="https://github.com/martignoni/hugo-notice">hugo-notice&lt;/a>觉得和主题不是很搭，于是决定用Hugo的Shortcodes自己实现一个。&lt;/p>
&lt;h2 id="内置shortcodes">内置Shortcodes&lt;/h2>
&lt;p>Hugo已经内置了部分&lt;a href="https://gohugo.io/content-management/shortcodes/#use-hugos-built-in-shortcodes">Shortcodes&lt;/a>功能，如gist显示：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{&lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nt">gist&lt;/span> &lt;span class="na">spf13&lt;/span> &lt;span class="na">7896402&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;script type="application/javascript" src="https://gist.github.com/spf13/7896402.js">&lt;/script>
&lt;h2 id="自定义shortcodes">自定义Shortcodes&lt;/h2>
&lt;p>Hugo中的Shortcodes模板文件需要放入主题路径的&lt;code>layout/shortcodes&lt;/code>文件夹中，并以&lt;code>Shortcodes名.html&lt;/code>命名。&lt;/p>
&lt;p>Hugo中的Shortcodes主要有两种形式，一种为One Tag式，如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{&lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nt">figure&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/media/spf13.jpg&amp;#34;&lt;/span> &lt;span class="na">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;Steve Francia&amp;#34;&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>对于该种Shortcodes，访问其参数有两种方式，一种是通过&lt;code>{{.Get &amp;quot;src&amp;quot;}}&lt;/code>按照属性名获取，另一种是使用&lt;code>{{index .Param 0}}&lt;/code>按照参数位置进行访问。&lt;/p>
&lt;p>另一种Shortcodes为带内容的Shortcodes，如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{&lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nt">highlight&lt;/span> &lt;span class="na">go&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}} A bunch of code here {{&lt;span class="p">&amp;lt;&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="nt">highlight&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在这种情况下，tag中参数的访问与之前相同，其内容通过&lt;code>.Inner&lt;/code>访问，如果需要对内容进行Markdown解析，可以使用&lt;code>markdownify&lt;/code>函数。&lt;/p>
&lt;h2 id="my-shortcodes">My Shortcodes&lt;/h2>
&lt;h3 id="安装">安装&lt;/h3>
&lt;div class="note warning">&lt;p>该Shortcodes包仅支持&lt;a href="https://github.com/reuixiy/hugo-theme-meme">MemE&lt;/a>主题。&lt;/p>&lt;/div>
&lt;ul>
&lt;li>
&lt;p>将短代码仓库添加至&lt;code>theme&lt;/code>文件夹&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git clone https://github.com/3verness/shortcodes.git themes/shortcodes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>将&lt;code>config.toml&lt;/code>中的主题一行改为&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">theme&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;shortcodes&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;meme&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>在&lt;code>assets/scss/custom/_custom.scss&lt;/code>文件中添加：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-scss" data-lang="scss">&lt;span class="line">&lt;span class="cl">&lt;span class="k">@import&lt;/span> &lt;span class="s2">&amp;#34;shortcodes/shortcodes&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>开始使用&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="功能">功能&lt;/h3>
&lt;h4 id="note">Note&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{&lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nt">note&lt;/span> &lt;span class="na">primary&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">这是一条note
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{&lt;span class="p">&amp;lt;&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="nt">note&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>目前支持的类型有：default, primary, success, info, warning, danger。&lt;/p>
&lt;div class="note default">&lt;p>这是一条note&lt;/p>&lt;/div>
&lt;div class="note primary">&lt;p>这是一条primary note&lt;/p>&lt;/div>
&lt;div class="note success">&lt;p>这是一条success note&lt;/p>&lt;/div>
&lt;div class="note info">&lt;p>这是一条info note&lt;/p>&lt;/div>
&lt;div class="note warning">&lt;p>这是一条warning note&lt;/p>&lt;/div>
&lt;div class="note danger">&lt;p>这是一条danger note&lt;/p>&lt;/div>
&lt;h4 id="音乐播放">音乐播放&lt;/h4>
&lt;p>目前提供两种添加方式，一种通过MetingJS实现，可以实现网易云与QQ音乐的外链播放，如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{&lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nt">meting&lt;/span> &lt;span class="err">&amp;#34;&lt;/span>&lt;span class="na">https:&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="na">music&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">163&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">com&lt;/span>&lt;span class="err">/#/&lt;/span>&lt;span class="na">song&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">32046766&amp;#34;&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
&lt;script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js">&lt;/script>&lt;script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js">&lt;/script>&lt;meting-js
auto=https://music.163.com/#/song?id&amp;#61;32046766>
&lt;/meting-js>
&lt;p>另一种则可以手动播放本地歌曲，如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{&lt;span class="err">&amp;lt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">music&lt;/span> &lt;span class="na">url&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;http://music.163.com/song/media/outer/url?id=536623501.mp3&amp;#34;&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;Ref:rain&amp;#34;&lt;/span> &lt;span class="na">artist&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;Aimer&amp;#34;&lt;/span> &lt;span class="na">cover&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;http://music.163.com/song/media/outer/url?id=536623501.mp3&amp;#34;&lt;/span> &lt;span class="na">lrc&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;div class="note danger">&lt;p>目前已知在相同页面添加两首歌曲会出现bug，等待修复。&lt;/p>&lt;/div>
&lt;h4 id="视频内嵌">视频内嵌&lt;/h4>
&lt;p>优化了Youtube的播放并增加了Bilibili的外链播放器。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{&lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nt">ytb&lt;/span> &lt;span class="na">zCLOJ9j1k2Y&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div style="position: relative; padding: 30% 45%;">&lt;iframe style="position: absolute; width: 90%; height: 90%; left: 5%; top: 5%;" src='https://www.youtube.com/embed/zCLOJ9j1k2Y' scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">&lt;/iframe>&lt;/div>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{&lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nt">bili&lt;/span> &lt;span class="na">BV1KJ411C7qF&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div style="position: relative; padding: 30% 45%;">&lt;iframe style="position: absolute; width: 90%; height: 100%; left: 5%; top: 0;" src="https://ioyoi.me//player.bilibili.com/player.html?bvid=BV1KJ411C7qF&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> &lt;/iframe>&lt;/div>
&lt;h4 id="友链">友链&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{&lt;span class="p">&amp;lt;&lt;/span> &lt;span class="nt">friend&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;3verness&amp;#34;&lt;/span> &lt;span class="na">url&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://oi-io.me&amp;#34;&lt;/span> &lt;span class="na">logo&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;https://oi-io.me/favicon.ico&amp;#34;&lt;/span> &lt;span class="na">motto&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;To discover. To change.&amp;#34;&lt;/span> &lt;span class="p">&amp;gt;&lt;/span>}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="friends">
&lt;p>&lt;a target="_blank" href=https://oi-io.me title=3verness class="friendurl">&lt;/p>
&lt;div class="friendblock">
&lt;div class="friendblockleft">
&lt;img class="friend" src=https://oi-io.me/favicon.ico />
&lt;/div>
&lt;div class="friendblockright">
&lt;b class="friendname">3verness&lt;/b>&lt;br />To discover. To change.
&lt;/div>
&lt;/div>
&lt;/div></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/hugo/">hugo</category></item><item><title>Windows下的网卡分流</title><link>https://ioyoi.me/tech/route-on-windows/</link><guid isPermaLink="true">https://ioyoi.me/tech/route-on-windows/</guid><pubDate>Mon, 17 Aug 2020 10:38:28 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;h2 id="引子">引子&lt;/h2>
&lt;p>身在学校，经常需要在限流校园网和宿舍宽带间反复横跳，每次都要手动切换甚是麻烦，因此研究了下Windows下的路由表，希望能一劳永逸的解决网络分流问题。&lt;/p>
&lt;p>我的网络环境及需求如下：&lt;/p>
&lt;ul>
&lt;li>无线网卡连接校园网，有线网卡连接宿舍宽带。&lt;/li>
&lt;li>ipv4通过有线网访问，ipv6通过无线网访问。&lt;/li>
&lt;li>校园网内部地址及部分外网地址通过无线网访问。&lt;/li>
&lt;/ul>
&lt;h2 id="原理">原理&lt;/h2>
&lt;p>Windows下的网络请求由路由表&lt;code>route&lt;/code>管理，按照内置规则按ip地址对请求进行网卡分流。&lt;/p>
&lt;p>使用&lt;code>route PRINT&lt;/code>命令可以查看当前路由表规则。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">网络目标&lt;/th>
&lt;th style="text-align:center">网络掩码&lt;/th>
&lt;th style="text-align:center">网关&lt;/th>
&lt;th style="text-align:center">接口&lt;/th>
&lt;th style="text-align:center">跃点数&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">0.0.0.0&lt;/td>
&lt;td style="text-align:center">0.0.0.0&lt;/td>
&lt;td style="text-align:center">192.168.1.1（有线）&lt;/td>
&lt;td style="text-align:center">192.168.1.107&lt;/td>
&lt;td style="text-align:center">25&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">0.0.0.0&lt;/td>
&lt;td style="text-align:center">0.0.0.0&lt;/td>
&lt;td style="text-align:center">183.172.240.1（无线）&lt;/td>
&lt;td style="text-align:center">183.172.243.31&lt;/td>
&lt;td style="text-align:center">55&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>当同一网络目标对应多个网关时，系统会按照跃点数（Metric）由低到高的优先级进行网关分配。可以注意到，由于系统默认将&lt;code>0.0.0.0&lt;/code>分配至所有网关，因此所有ipv4地址都将通过跃点数较低的网关进行访问。&lt;/p>
&lt;p>&lt;code>route&lt;/code>命令提供的修改接口如下：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code>ADD&lt;/code>添加规则&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">route&lt;/span> &lt;span class="n">ADD&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="err">网络目标&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">MASK&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="err">网络掩码&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="err">网关&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">METRIC&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="err">跃点数&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>DELETE&lt;/code>删除规则&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">route&lt;/span> &lt;span class="n">DELETE&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="err">网络目标&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;code>CHANGE&lt;/code>修改规则&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">route&lt;/span> &lt;span class="n">CHANGE&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="err">网络目标&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">MASK&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="err">网络掩码&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="err">网关&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="n">METRIC&lt;/span> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="err">跃点数&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;div class="note info">&lt;p>添加&lt;code>-p&lt;/code>命令可以永久更改，否则为临时更改，重启后失效。&lt;/p>&lt;/div>
&lt;h2 id="实例">实例&lt;/h2>
&lt;p>在上述的应用场景中，具体操作如下：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>首先删除默认规则&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">route&lt;/span> &lt;span class="n">DELETE&lt;/span> &lt;span class="mf">0.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>添加ipv4缺省值&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">route&lt;/span> &lt;span class="n">ADD&lt;/span> &lt;span class="mf">0.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span> &lt;span class="n">mask&lt;/span> &lt;span class="mf">0.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span> &lt;span class="mf">192.168&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">1&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">1&lt;/span> &lt;span class="err">–&lt;/span>&lt;span class="n">p&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>针对单ip添加规则（以本站ip为例）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">route&lt;/span> &lt;span class="n">ADD&lt;/span> &lt;span class="mf">104.224&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">179&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">29&lt;/span> &lt;span class="n">mask&lt;/span> &lt;span class="mf">255.255&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">255&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span> &lt;span class="mf">183.172&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">240&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">1&lt;/span> &lt;span class="n">-p&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>针对一组ip添加规则（以&lt;code>166.111.*.*&lt;/code>为例）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">route&lt;/span> &lt;span class="n">ADD&lt;/span> &lt;span class="mf">166.111&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span> &lt;span class="n">mask&lt;/span> &lt;span class="mf">255.255&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">255&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span> &lt;span class="mf">183.172&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">240&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">1&lt;/span> &lt;span class="n">-p&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;div class="note warning">&lt;p>在&lt;code>PRINT&lt;/code>与&lt;code>DEL&lt;/code>命令中可以使用&lt;code>*&lt;/code>通配符，但在&lt;code>ADD&lt;/code>与&lt;code>CHANGE&lt;/code>中必须使用完整的目标地址。&lt;/p>&lt;/div></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/windows/">windows</category></item><item><title>使用Golang生成Service Worker</title><link>https://ioyoi.me/tech/workbox-in-golang/</link><guid isPermaLink="true">https://ioyoi.me/tech/workbox-in-golang/</guid><pubDate>Fri, 10 Jul 2020 13:17:20 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>
&lt;div class="note info">&lt;p>当前&lt;code>hugo-theme-meme&lt;/code>已经原生支持&lt;code>sw.js&lt;/code>，此文章已过期。&lt;/p>&lt;/div>
&lt;p>当你打开我的博客时，你可能会发现，你可以将博客安装为PWA应用已提供离线访问。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200710132023.webp" alt="">&lt;/p>
&lt;p>这项功能是通过Service Worker中的Workbox实现的，其会在网站根目录下生成&lt;code>sw.js&lt;/code>的文件，控制静态文件的缓存并依照缓存策略提供请求路由，当更新网站后，需要更新&lt;code>sw.js&lt;/code>文件以告知浏览器重新缓存新版本。&lt;/p>
&lt;p>我的博客及笔记站均是通过git hooks的形式在服务器端进行页面生成与部署的，由于至今没有搞懂npm包的路径应该如何配置，在每次生成时都需要进行一次&lt;code>npm install&lt;/code>，严重拖慢了&lt;code>post-receive&lt;/code>脚本的运行速度，影响使用体验，因此决定写一个golang脚本生成&lt;code>sw.js&lt;/code>。&lt;/p>
&lt;h2 id="workbox原理">Workbox原理&lt;/h2>
&lt;p>首先对生成的&lt;code>sw.js&lt;/code>进行一波分析：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">importScripts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`https://storage.googleapis.com/workbox-cdn/releases/5.1.3/workbox-sw.js`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setCacheNameDetails&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">prefix&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Evergarden&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">skipWaiting&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">core&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">clientsClaim&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">precaching&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">precacheAndRoute&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">revision&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;6ff07b67de8fe8607ee204ea1bd9f034&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">url&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;./index.html&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">precaching&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cleanupOutdatedCaches&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">routing&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">registerRoute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sr">/\.(?:png|jpg|jpeg|gif|bmp|webp|svg|ico)$/&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">strategies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CacheFirst&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cacheName&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;images&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">plugins&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">expiration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ExpirationPlugin&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">maxEntries&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mf">1e3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">maxAgeSeconds&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mf">2592e3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}),&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cacheableResponse&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CacheableResponsePlugin&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">statuses&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">googleAnalytics&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">initialize&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到其核心为&lt;code>precacheAndRoute&lt;/code>与&lt;code>registerRoute&lt;/code>两个接口，其中&lt;code>precacheAndRoute&lt;/code>中内容为根目录下所有文件的路径及hash值列表，而&lt;code>registerRoute&lt;/code>中内容为以正则表达式代表的静态文件及其缓存方案，其中在博客进行版本更新时，仅&lt;code>precacheAndRoute&lt;/code>中内容会进行更新。浏览器访问相关路径时，会检查&lt;code>revision&lt;/code>值是否相同，若不相同则进行更新。&lt;/p>
&lt;h2 id="template实现">Template实现&lt;/h2>
&lt;p>明白了&lt;code>sw.js&lt;/code>的结构，我们需要做的就是遍历public中的文件，生成List并写入&lt;code>sw.js&lt;/code>中，在Golang中可以使用标准库中的text/template进行代码实现。&lt;/p>
&lt;p>首先创建一个模板文件，这里仅关注模板部分，完整文件可参照&lt;a href="https://git.everness.me/Everness/blog/src/branch/master/sw-template.js">&lt;code>sw-template.js&lt;/code>&lt;/a>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">workbox&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">precaching&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">precacheAndRoute&lt;/span>&lt;span class="p">([{{&lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nx">range&lt;/span> &lt;span class="nx">$index&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">$element&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="p">.&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="nx">ne&lt;/span> &lt;span class="nx">$index&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">}},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nx">end&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>&lt;span class="nx">revision&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s2">&amp;#34;{{$element.Revision}}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="s2">&amp;#34;./{{$element.Url}}&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">{{&lt;/span>&lt;span class="o">-&lt;/span> &lt;span class="nx">end&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="p">}}]);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>随后编写Golang脚本，遍历根目录下的所有文件，并计算其MD5值，最后应用模板生成文件。完整代码见&lt;a href="https://git.everness.me/Everness/workbox">Gitea&lt;/a>。&lt;/p>
&lt;h2 id="效果">效果&lt;/h2>
&lt;p>速度比&lt;code>workbox-cli&lt;/code>要快得多，从提交到生成完毕只需要2秒左右，更主要的是不需要解决依赖问题，单可执行文件即可运行。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200710172017.webp" alt="">&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/golang/">golang</category><category domain="https://ioyoi.me/tags/blog/">blog</category></item><item><title>升级到Caddy2</title><link>https://ioyoi.me/tech/upgrade-to-caddy2/</link><guid isPermaLink="true">https://ioyoi.me/tech/upgrade-to-caddy2/</guid><pubDate>Fri, 10 Jul 2020 09:18:31 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>两个月前，Caddy更新了v2版本，相比v1版本，其主要特点是：&lt;/p>
&lt;ul>
&lt;li>localhost也能自动获取HTTPS&lt;/li>
&lt;li>支持HTTP/3（&lt;del>还没有一个浏览器的稳定版支持&lt;/del>&lt;/li>
&lt;li>支持Zstandard压缩算法（&lt;del>同样还没有一个浏览器的稳定版支持&lt;/del>&lt;/li>
&lt;li>更复杂的Caddyfile配置&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://img.ioyoi.me/20200710095257.webp" alt="">&lt;/p>
&lt;p>虽然早就想更新到新版本，但折腾了两次V2Ray都不work，遂一直没有升级。今天发现V2Ray的&lt;a href="https://guide.v2fly.org/advanced/wss_and_web.html">新白话文指南&lt;/a>中给出了Caddy v2的配置方法，故趁热打铁把服务升级至新版本。&lt;/p>
&lt;p>我使用Caddy主要是两个功能，静态网站托管与端口反向代理，这里主要介绍两项功能在v1和v2中的区别。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>静态网站托管&lt;/p>
&lt;p>借助&lt;a href="https://caddyserver.com/docs/caddyfile/patterns#static-file-server">static file server&lt;/a>实现，v1版本中只需要一行：&lt;/p>
&lt;pre tabindex="0">&lt;code>root /path/to/root
&lt;/code>&lt;/pre>&lt;p>v2版本中需要更改为：&lt;/p>
&lt;pre tabindex="0">&lt;code>root * /var/www/blog
file_server
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>反向代理&lt;/p>
&lt;p>对与HTTP代理，v1版本中依然只需要一行：&lt;/p>
&lt;pre tabindex="0">&lt;code>proxy /path 127.0.0.1:8000
&lt;/code>&lt;/pre>&lt;p>但使用WS代理时需要特别说明：&lt;/p>
&lt;pre tabindex="0">&lt;code>proxy /path 127.0.0.1:8000 {
websocket
}
&lt;/code>&lt;/pre>&lt;p>而v2版本的&lt;a href="https://caddyserver.com/docs/caddyfile/patterns#reverse-proxy">reverse_proxy&lt;/a>默认支持WS代理，这里给出一个通用的反向代理模板：&lt;/p>
&lt;pre tabindex="0">&lt;code>reverse_proxy localhost:8000 {
header_up Host {http.reverse_proxy.upstream.hostport}
header_up X-Real-IP {http.request.remote}
header_up X-Forwarded-For {http.request.remote}
header_up X-Forwarded-Port {http.request.port}
header_up X-Forwarded-Proto {http.request.scheme}
}
&lt;/code>&lt;/pre>&lt;p>此外，v2提供&lt;a href="https://caddyserver.com/docs/caddyfile/matchers#named-matchers">Named matchers&lt;/a>来对反向代理提供更加详细的设定，比如V2Ray白话文教程中提供给的样例：&lt;/p>
&lt;pre tabindex="0">&lt;code>@v2ray_websocket {
path /ray
header Connection *Upgrade*
header Upgrade websocket
}
reverse_proxy @v2ray_websocket localhost:10000
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>压缩编码&lt;/p>
&lt;p>v1中：&lt;/p>
&lt;pre tabindex="0">&lt;code>gzip
&lt;/code>&lt;/pre>&lt;p>v2中需使用&lt;a href="https://caddyserver.com/docs/caddyfile/directives/encode#encode">encode&lt;/a>命令，顺带把Zstandard压缩开启，相比gzip，&lt;a href="https://engineering.fb.com/core-data/smaller-and-faster-data-compression-with-zstandard/">zstd的压缩率和速度均更强&lt;/a>，万一哪天浏览器支持了呢：&lt;/p>
&lt;pre tabindex="0">&lt;code>encode gzip zstd
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>HTTP/3&lt;/p>
&lt;p>需要在Caddyfile中写入：&lt;/p>
&lt;pre tabindex="0">&lt;code>experimental_http3
&lt;/code>&lt;/pre>&lt;/li>
&lt;li>
&lt;p>自启动&lt;/p>
&lt;p>Caddy提供了官方的&lt;a href="https://github.com/caddyserver/dist/blob/master/init/caddy.service">service文件&lt;/a>，下载覆盖即可。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>以上基本就是我从Caddy v1迁移至v2使用的全部了，升级过后并没有什么新特性可用，使用体验也没有任何改善，但至少，短时间内应该不用瞎折腾了吧。&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/caddy/">caddy</category><category domain="https://ioyoi.me/tags/tutorial/">tutorial</category></item><item><title>昨日之歌</title><link>https://ioyoi.me/dream/sing-yesterday/</link><guid isPermaLink="true">https://ioyoi.me/dream/sing-yesterday/</guid><pubDate>Wed, 08 Jul 2020 23:58:25 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>这是一部很小众的番剧，以平淡的语调讲诉了日漫绕不开的爱情与成长的故事。&lt;/p>
&lt;h2 id="剧情">剧情&lt;/h2>
&lt;p>昨日之歌，顾名思义是讲诉囿于昨日又走出昨日的故事。老实说，从第一话开始，我对这部番是抱有很大期望的，开篇的昨日之歌，很有秒速五厘米的感觉。正所谓期望越大，失望也就越大，这部日常番终究没有逃出N角恋的胃疼套路，太过平淡的剧情让我想要快进，总是用误会来推动剧情的快速发展又使我觉得乏味。当然，单纯从日常番或者恋爱番的角度来看的话，本作的剧情还算是完整，每个人物的主线也算交代的有始有终，只是其节奏已经不太对我的胃口，尤其在结尾部分太过突兀，让我倍感不适。*&lt;del>我有点怀念当年渣愿都看得津津有味的我了。&lt;/del>*诚然，兜兜转转最后回到原点的剧情设定，编剧表示确实很难办，但是我有一个大胆的想法，如果这部番再放慢一些，走日剧甚至韩剧的调调，或许是一种别样的体验吧。&lt;/p>
&lt;h2 id="人物">人物&lt;/h2>
&lt;h3 id="陆生鱼住">陆生鱼住&lt;/h3>
&lt;p>大学毕业，在对未来的迷茫前，选择了逃避现实，对待感情也有点踌躇不决，些许的自卑，有点厌恶当前的自己，但又不知从何改变，很想现在的我呐。鱼住身上这种强烈的代入感，也是昨日之歌吸引我的点。&lt;/p>
&lt;blockquote>
&lt;p>总觉得我的人生也要开始发问了，问我究竟想要做些什么。&lt;/p>
&lt;/blockquote>
&lt;p>但在昨日之歌中，鱼住也是最快完成成长的人，他最终选择了一份自己喜欢也适合自己的工作，也正确的认识到了心中的情感，果断地斩断了错误的情愫，也帮助榀子走出了过去的阴影。&lt;/p>
&lt;h3 id="森之目榀子">森之目榀子&lt;/h3>
&lt;p>用一个词描述榀子，那便是温柔，因为温柔，所以不愿意伤害任何人，也因此难以放下，无论是对涌的难以忘怀，还是对鱼住的暧昧不清，都是太过温柔，难以放下吧。&lt;/p>
&lt;blockquote>
&lt;p>看似在前进，最终不过是，原地打转罢了。&lt;/p>
&lt;/blockquote>
&lt;p>但是不得不承认，会照顾人的女孩子，确实很吸引人，哪个懵懂无知的男孩不曾憧憬过温柔贤惠的大姐姐呢？不过，还是不要轻易爱上温柔的人吧，因为她会对任何人都温柔。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200708235715.webp" alt="">&lt;/p>
&lt;h3 id="野中晴">野中晴&lt;/h3>
&lt;p>晴是阳光般的女孩子，她的笑容会驱散生活中的阴霾，她的直率能让你找回失却的自信。能遇到这个带着乌鸦的女孩，实在是太幸运了。她追逐爱情的勇气，如果分我一半的话，我应该已经得到幸福了吧~&lt;/p>
&lt;p>那么，我会不会遇到小晴呢，或者说，我的阳光女孩，在哪里呢？&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200708235705.webp" alt="">&lt;/p>
&lt;h3 id="早川浪">早川浪&lt;/h3>
&lt;p>作为男二，除了自私任性与自以为是，动不动就发脾气，竟然找不到任何正面特点，甚至不如仅出场一话的凑航一的形象立体，属实败笔。&lt;/p>
&lt;h2 id="画风">画风&lt;/h2>
&lt;p>画风如剧情般清淡，线条略显粗糙，不知是经费受限还是刻意为之，但意外的有怀旧的感觉，朦胧的背景搭配粗线条的人物应该是本作的一大特色，配色也完完全全是老照片的感觉，画风谈不上优秀，但和主题很搭，看着舒服就够了。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200708235646.webp" alt="">&lt;/p>
&lt;h2 id="总评">总评&lt;/h2>
&lt;p>我并不想从文学或者心理学的角度去评价这部作品，从B站评论区也可以看出，对于这部番的评价呈现严重的两极分化。我个人认为，这部番的吸引力在于主人公的身上有观众的影子，通过细腻的笔触使你代入主人公的情景。如果在你看完前几话后无法感受到与主人公的共鸣，那么这部番带给你的只有无尽的矫情和胃疼，但一旦你融入了动画中，你也许会发现自己和主角是如此相像，正如热评所说：&lt;/p>
&lt;blockquote>
&lt;p>——这部番讲了什么？&lt;/p>
&lt;p>——我的前半生。&lt;/p>
&lt;/blockquote></description><category domain="https://ioyoi.me/dream/">dream</category><category domain="https://ioyoi.me/tags/anime/">anime</category></item><item><title>路旁遇到叶修</title><link>https://ioyoi.me/life/yexiu/</link><guid isPermaLink="true">https://ioyoi.me/life/yexiu/</guid><pubDate>Mon, 06 Jul 2020 07:07:53 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;blockquote>
&lt;p>唯有尽力自持，方不致癫狂。&lt;/p>
&lt;p>——太宰治《人间失格》&lt;/p>
&lt;/blockquote>
&lt;p>&lt;em>今早醒来，看到冷水的微博，得知叶修选择离开了这个世界，作文悼念。&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200706080049.webp" alt="">&lt;/p>
&lt;p>高中时，B站有两位在日本留学的生活区UP主对我影响颇深，一位是&lt;a href="https://space.bilibili.com/123484/">guanyuhan426&lt;/a>，另一位便是&lt;a href="https://space.bilibili.com/917629/">路旁的叶修&lt;/a>。4总喜欢拍景，而叶修则更关注生活。我不总是有时间看叶修的直播，但每当晚自习回到家，听到熟悉的《guaranteed》响起，我会感到融入到了叶修的生活，从紧张的高中生活中得到些许解脱。叶修的&lt;a href="https://www.bilibili.com/video/BV1Us411877i">《东京生活记录》&lt;/a>大概算得上是最早的一批VLOG，视频中的叶修或步行或骑车游荡在东京的各个小巷，GoPro稍稍畸形的画面中叶修都是一个人，在充满市井气的街边，絮絮叨叨着谈着日常的生活。我很喜欢叶修的声音，若有若无的音乐伴着磁性的男声，给人安稳平静的感觉。叶修没有在国内就读高中，而是在读了一年语言后直接来到日本留学，毕业后打工，创业，将自己的idea步步转为现实。他教给我的，是积极主动的选择自己想要的生活。&lt;/p>
&lt;p>在叶修离开B站后，我便很少关注他了，我很难相信一个给人“爱生活，爱叶修”印象的人，竟会选择自杀的形式结束自己的生命。也许生活确实不易，我们都在苦苦挣扎，我只好说，祝活着的人不要轻易放弃生，离去的人得到永恒的安宁。&lt;/p></description><category domain="https://ioyoi.me/life/">life</category><category domain="https://ioyoi.me/tags/memory/">memory</category></item><item><title>那些神一样的工具们</title><link>https://ioyoi.me/tech/tools-on-windows/</link><guid isPermaLink="true">https://ioyoi.me/tech/tools-on-windows/</guid><pubDate>Thu, 14 May 2020 23:33:30 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>距离上一次写应用总结已经过去两年半了，趁着有空再来推荐一波Windows桌面软件吧。&lt;/p>
&lt;p>挑选原则有三：&lt;strong>美观&lt;/strong>、&lt;strong>轻量&lt;/strong>、&lt;strong>绿色&lt;/strong>。&lt;/p>
&lt;p>首先桌面镇楼~&lt;/p>
&lt;blockquote>
&lt;p>Simple is beautiful.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://img.ioyoi.me/20200516114805.webp" alt="">&lt;/p>
&lt;hr>
&lt;p>最常用的三个：Chrome、Typora和VS Code。&lt;/p>
&lt;h2 id="chromehttpswwwgooglecomintlzh-cnchrome">&lt;a href="https://www.google.com/intl/zh-CN/chrome/">Chrome&lt;/a>&lt;/h2>
&lt;p>使用时间最长，没有之一。&lt;del>（有点想换Edge了，微软的审美不知道甩了谷歌几条街&lt;/del>&lt;/p>
&lt;p>没有扩展的Chrome不是好Chrome，推荐了本体怎么能不说说拓展呢？&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/adguard-adblocker/bgnkhhnnamicmpeenaelnjfhikgbkllg?hl=zh-CN">AdGuard&lt;/a>&lt;/p>
&lt;p>广告拦截器，不如&lt;a href="https://chrome.google.com/webstore/detail/adblock-plus-free-ad-bloc/cfhdojbkjhnklbpkdaibdccddilifddb?hl=zh-CN">Adblock Plus&lt;/a>强大，但胜在好看够用。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/dualsub/gnlibmlfpencglodjpgnalbdebfhpmfp?hl=zh-CN">Dualsub&lt;/a>&lt;/p>
&lt;p>YouTube中英对照字幕显示，英语渣渣的福音。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200516113827.webp" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/fasterchrome/nmgpnfccjfjhdenioncabecepjcmdnjg?hl=zh-CN">FasterChrome&lt;/a>&lt;/p>
&lt;p>提升网页加载速度，原理是当你的鼠标移至链接上时就开始加载，点击秒开。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/google-translate/aapbdbdomjkkjkaonfhkkikfgjllcleb?hl=zh-CN">Google翻译&lt;/a>&lt;/p>
&lt;p>划句翻译，速度和质量都还可以。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/google-scholar-button/ldipcbpaocekfooobnbcddclnhejkcpn?hl=zh-CN">Google学术搜索按钮&lt;/a>&lt;/p>
&lt;p>一键搜索文献，快速生成引用以及寻找引用原文，建议搭配Kopernio使用。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/grammarly-for-chrome/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=zh-CN">Grammarly for Chrome&lt;/a>&lt;/p>
&lt;p>英语语法检查器，在Github提issue或者发英语邮件时再也不用担心语法错误了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/kopernio-powered-by-web-o/fjgncogppolhfdpijihbpfmeohpaadpc?hl=zh-CN">Kopernio&lt;/a>&lt;/p>
&lt;p>Web of Science提供的文献查看工具，能够很方便的查看文献原文并记录历史记录。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/print-friendly-pdf/ohlencieiipommannpdfcmfdpjjmeolj">Print Friendly &amp;amp; PDF&lt;/a>&lt;/p>
&lt;p>打印网站的小工具，可以自动去除标题栏、广告等无关信息，也支持手动选择和删除元素。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?hl=zh-CN">Proxy SwitchyOmega&lt;/a>&lt;/p>
&lt;p>网络代理工具，同步更新的&lt;a href="https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt">GFW List&lt;/a>比自带的PAC规则要好用得多，同时还支持自定义分流规则，也能起到拦截流量的作用。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/rooster-for-chrome/pimolnhbniceppehbgmibnbgcnhpkhfh">Rooster for Chrome&lt;/a>&lt;/p>
&lt;p>记录网站浏览时间，会在新标签页中显示页面的活跃时间饼图，快下一个看看你在油管和B站上浪费了多少青春吧。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/save-to-pocket/niloccemoadcdkdjlinkgdfekeahmflj?hl=zh-CN">Save to Pocket&lt;/a>&lt;/p>
&lt;p>稍后再读工具，建议配合手机APP使用，能够收藏文章视频等内容，以便之后查看，自带阅读模式颜值尚可。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/sourcegraph/dgjhfomjieaadpoljlnidmbgkdffpack?hl=zh-CN">Sourcegraph&lt;/a>&lt;/p>
&lt;p>Github代码查看器，功能很强大，不用clone到本地也能拥有不错的阅读体验。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/stylus/clngdbkpkpeebahjckkjfobafhncgmne?hl=zh-CN">Stylus&lt;/a>&lt;/p>
&lt;p>网页样式调整器，因&lt;a href="https://userstyles.org/styles/168843/amazing-bilibili">Amazing Bilibili&lt;/a>入坑。&lt;del>（该主题现已停止维护&lt;/del>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?hl=zh-CN">Tampermonkey&lt;/a>&lt;/p>
&lt;p>大家都知道的脚本管理器，我用的脚本主要有以下几个：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://cdn.jsdelivr.net/gh/the1812/Bilibili-Evolved@master/bilibili-evolved.user.js">Bilibili Evolved&lt;/a>&lt;/p>
&lt;p>Bilibili功能增强，提供视频下载，封面下载，视频亮度调整等一些很实用的功能。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://greasyfork.org/zh-CN/scripts/378301-%E7%BD%91%E7%9B%98%E5%8A%A9%E6%89%8B">网盘助手&lt;/a>&lt;/p>
&lt;p>能够自动填写百度云的分享码并生成下载链接，配合FDM或aria2c能够轻松跑到2-3M，基本够用。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://greasyfork.org/zh-CN/scripts/394216-%E7%BD%91%E7%9B%98%E9%93%BE%E6%8E%A5%E6%A3%80%E6%9F%A5">网盘链接检查&lt;/a>&lt;/p>
&lt;p>检查链接是否失效。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一些&lt;a href="https://sleazyfork.org/zh-CN">有颜色&lt;/a>的脚本…&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://chrome.google.com/webstore/detail/weava-highlighter-pdf-web/cbnaodkpfinfiipjblikofhlhlcickei">Weava Highlighter - PDF &amp;amp; Web&lt;/a>&lt;/p>
&lt;p>在网站上使用荧光笔高亮标注，支持有限空间的同步服务。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="typorahttpstyporaio">&lt;a href="https://typora.io/">Typora&lt;/a>&lt;/h2>
&lt;p>Windows下最好用的Markdown编辑器，所见即所得的写作方式，图片一键复制，PicGo一键上传，CSS样式自定义主题，兼容css样式，集成mermaid，该有的功能基本都有，并且颜值颇高。&lt;/p>
&lt;p>当然，如果你喜欢开源软件，也可以试试&lt;a href="https://github.com/marktext/marktext">Mark Text&lt;/a>。&lt;/p>
&lt;h2 id="vs-codehttpscodevisualstudiocom">&lt;a href="https://code.visualstudio.com/">VS Code&lt;/a>&lt;/h2>
&lt;p>抢IDE蛋糕的编译器，微软出品，颜值高启动快，代码补全和自定义模板功能很棒，并且有丰富的插件，这里简单推荐几个。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer-2">Bracket Pair Colorizer 2&lt;/a>&lt;/p>
&lt;p>为配对的括号涂色，能清楚地看出来漏的括号在哪里。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner">Code Runner&lt;/a>&lt;/p>
&lt;p>快速运行代码，对Python、C++友好，支持选定部分行运行。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://marketplace.visualstudio.com/items?itemName=intellsmi.comment-translate">Comment Translate&lt;/a>&lt;/p>
&lt;p>翻译注释，帮助阅读英文代码。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://marketplace.visualstudio.com/items?itemName=oderwat.indent-rainbow">indent-rainbow&lt;/a>&lt;/p>
&lt;p>为不同层次缩进上色，实用性不高但是很好看。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://marketplace.visualstudio.com/items?itemName=Equinusocio.vsc-material-theme">Material Theme&lt;/a>&lt;/p>
&lt;p>很耐看的主题。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-ssh">Remote - SSH&lt;/a>/&lt;a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl">WSL&lt;/a>&lt;/p>
&lt;p>远程开发必备，获得和本机一样的体验。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://marketplace.visualstudio.com/items?itemName=hediet.vscode-drawio">vscode-drawio&lt;/a>&lt;/p>
&lt;p>离线版的&lt;a href="https://app.diagrams.net/">drowio&lt;/a>，可以方便地绘制流程图。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>以下软件均按首字母自然排序。&lt;/p>
&lt;h2 id="μtorrenthttpswwwutorrentcom">&lt;a href="https://www.utorrent.com/">μTorrent&lt;/a>&lt;/h2>
&lt;p>BT/PT下载软件，功能强大，主要是支持&lt;a href="https://github.com/XIU2/TrackersListCollection">自定义Tracker&lt;/a>。&lt;/p>
&lt;h2 id="bandiziphttpscnbandisoftcombandizip">&lt;a href="https://cn.bandisoft.com/bandizip/">Bandizip&lt;/a>&lt;/h2>
&lt;p>高颜值压缩软件，性能一般，建议下载6.x版本，7版本除了加了广告其他新增功能根本用不上。&lt;/p>
&lt;p>同类替代品有丑的过分但强的一批的&lt;a href="https://www.7-zip.org/">7-Zip&lt;/a>，和启动略慢但很优雅的&lt;a href="https://www.peazip.org/">PeaZip&lt;/a>。&lt;/p>
&lt;h2 id="cheat-enginehttpswwwcheatengineorg">&lt;a href="https://www.cheatengine.org/">Cheat Engine&lt;/a>&lt;/h2>
&lt;p>万恶之源的游戏作弊软件，shorten your game and save your life.&lt;/p>
&lt;p>当然，它不仅仅是个修改器，它还能帮你轻松地查看并修改内存信息，甚至可以当作破解器和调试器使用。&lt;/p>
&lt;h2 id="free-download-managerhttpswwwfreedownloadmanagerorgzh">&lt;a href="https://www.freedownloadmanager.org/zh/">Free Download Manager&lt;/a>&lt;/h2>
&lt;p>是Internet Download Manager的免费替代品，速度差不太多，比IDM好看太多，重点是不花钱白嫖。作为代价是功能略少，BT不支持自定义Tracker，让我不得不使用一个专门的BT下载器。&lt;/p>
&lt;h2 id="grammarlyhttpswwwgrammarlycom">&lt;a href="https://www.grammarly.com/">Grammarly&lt;/a>&lt;/h2>
&lt;p>Grammarly for Chrome的桌面版，功能基本相同，但更改更为方便，语法检查功能比之前用的1Checker好上不少，并且可以选定口语或书面语以替代不合适的词汇。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200516111720.webp" alt="">&lt;/p>
&lt;h2 id="jetbrains全家桶httpswwwjetbrainscom">&lt;a href="https://www.jetbrains.com/">Jetbrains全家桶&lt;/a>&lt;/h2>
&lt;p>好看，好用，学生免费，在多个语言环境下能拥有统一的操作体验，配合&lt;a href="https://plugins.jetbrains.com/plugin/8006-material-theme-ui">Material Theme&lt;/a>食用体验更佳。&lt;/p>
&lt;h2 id="mathpixhttpsmathpixcom">&lt;a href="https://mathpix.com/">Mathpix&lt;/a>&lt;/h2>
&lt;p>公式识别器，截张图就能生成Latex或Mathtype格式公式，抄论文必备。免费版有每月次数限制，老实说，有点不够用，建议购买年费会员。&lt;/p>
&lt;h2 id="mobaxtermhttpsmobaxtermmobateknet">&lt;a href="https://mobaxterm.mobatek.net/">MobaXterm&lt;/a>&lt;/h2>
&lt;p>免费无广告的SSH工具。&lt;/p>
&lt;h2 id="navicathttpswwwnavicatcomcn">&lt;a href="https://www.navicat.com.cn/">Navicat&lt;/a>&lt;/h2>
&lt;p>数据库管理工具。&lt;/p>
&lt;h2 id="obs-studiohttpsobsprojectcom">&lt;a href="https://obsproject.com/">OBS Studio&lt;/a>&lt;/h2>
&lt;p>主播们都在用的串流软件，录屏功能同样强大，上网课录游戏都很好用，只是配置起来有些麻烦。&lt;/p>
&lt;h2 id="oracle-vm-virtualboxhttpswwwvirtualboxorg">&lt;a href="https://www.virtualbox.org/">Oracle VM VirtualBox&lt;/a>&lt;/h2>
&lt;p>开源虚拟机管理器，比VMWare的免费版好用。&lt;/p>
&lt;h2 id="pdfelementhttpspdfwondersharecom">&lt;a href="https://pdf.wondershare.com/">PDFelement&lt;/a>&lt;/h2>
&lt;p>PDF阅读器，个人感觉蓝色系比Adobe Acrobat好看，自带OCR功能，可以讲图片格式转为可编辑复制的文字。推荐使用国际版而不是国内万兴的版本，我可以忍受英文，但不能忍受广告。&lt;/p>
&lt;h2 id="picgohttpsgithubcommolunerfinnpicgo">&lt;a href="https://github.com/Molunerfinn/PicGo">PicGo&lt;/a>&lt;/h2>
&lt;p>一键上传图片至图床，并直接返回Markdown语法至剪贴板，自建图床可参照我之前的&lt;a href="../image-hosting-with-aliyun-oss/">文章&lt;/a>。&lt;/p>
&lt;h2 id="potplayerhttpspotplayerdaumnet">&lt;a href="https://potplayer.daum.net/">Potplayer&lt;/a>&lt;/h2>
&lt;p>全能播放器，并且有丰富的皮肤可以选择。&lt;/p>
&lt;h2 id="snipastehttpszhsnipastecom">&lt;a href="https://zh.snipaste.com/">Snipaste&lt;/a>&lt;/h2>
&lt;p>比QQ截图还好用的截图贴图软件，自带了实用的取色器功能。&lt;/p>
&lt;h2 id="tex-livehttpswwwtugorgtexlive">&lt;a href="https://www.tug.org/texlive/">TeX Live&lt;/a>&lt;/h2>
&lt;p>Latex的Windows发行版及包管理器，比MiKTeX更安全？，一次安完所有包也能让之后的使用更方便。&lt;/p>
&lt;h2 id="translucenttbhttpsgithubcomtranslucenttbtranslucenttb">&lt;a href="https://github.com/TranslucentTB/TranslucentTB">TranslucentTB&lt;/a>&lt;/h2>
&lt;p>任务栏透明化，毛玻璃效果和Win10很配。&lt;/p>
&lt;h2 id="visiohttpswwwmicrosoftcomen-usmicrosoft-365visioflowchart-software">&lt;a href="https://www.microsoft.com/en-us/microsoft-365/visio/flowchart-software">Visio&lt;/a>&lt;/h2>
&lt;p>值得专门拿出来说一下的Office套件，超强大的作图软件。&lt;/p>
&lt;h2 id="v2raynhttpsgithubcom2dustv2raynreleases">&lt;a href="https://github.com/2dust/v2rayN/releases">V2rayN&lt;/a>&lt;/h2>
&lt;p>还算好用的V2Ray客户端。&lt;/p>
&lt;h2 id="windows-terminalhttpsgithubcommicrosoftterminal">&lt;a href="https://github.com/microsoft/terminal">Windows Terminal&lt;/a>&lt;/h2>
&lt;p>微软出品的终端，之前在&lt;a href="../windows-subsystem-for-linux/">WSL文章&lt;/a>中吹过了，毛玻璃超好看。&lt;/p>
&lt;h2 id="wallpaper-enginehttpsstoresteampoweredcomapp431960wallpaper_engine">&lt;a href="https://store.steampowered.com/app/431960/Wallpaper_Engine/">Wallpaper Engine&lt;/a>&lt;/h2>
&lt;p>桌面美化工具，Steam社区中有大量主题可供选择，还有一些难以名状的主题可以发掘。&lt;/p>
&lt;p>免费的替代品有Rainmeter和火萤，但稳定性和易用上均不如Wallpaper Engine，嗯，付费软件真香。&lt;/p>
&lt;hr></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/tool/">tool</category><category domain="https://ioyoi.me/tags/windows/">windows</category></item><item><title>我和Ingress的故事</title><link>https://ioyoi.me/life/ingress/</link><guid isPermaLink="true">https://ioyoi.me/life/ingress/</guid><pubDate>Sun, 10 May 2020 21:00:50 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>第一次听说Ingress是在高一，当时NianticLabs还是Google旗下的团队，作为谷歌粉的我第一时间下载了该游戏，无奈当时用的是连移动3G都不支持的垃圾凤五，且十八线小县城方圆十里不见一个Portal（清晰地记着最近的Po是两公里外的高铁站），我和Ingress还未相恋就直接分手了。&lt;/p>
&lt;p>真正入坑Ingress，是在2018年的一月，触乐上蓝军的一篇&lt;a href="https://www.chuapp.com/?c=Article&amp;amp;a=index&amp;amp;id=284921">《在〈Ingress〉里打开另一张北京地图》&lt;/a>让我重新下载了这个Geek风的游戏。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200510213909.webp" alt="" title="大学加入的第一个“社团”">&lt;/p>
&lt;p>之后的半年，大概是我和Ingress的蜜月期，我在雕塑园里连出一个又一个的完美多重，一到周末就满北京跑，收集好看的任务图标。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200510215740.webp" alt="" title="在雕塑园吃了无数狗粮">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200510215839.webp" alt="">&lt;/p>
&lt;p>三月，我和一群第一次见面的小伙伴，自驾去了湖北保定，并在大佬们的帮助下成功&lt;a href="https://mp.weixin.qq.com/s/_zqwjWCz58FarW_bTMry9Q">将北京染绿&lt;/a>，收获了第一枚黑牌。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200510220946.webp" alt="" title="Enlighten Beijing！！！">&lt;/p>
&lt;p>四月，提前一周才预定了机票，深夜飞往无锡参加Mission Day，和小伙伴夜游无锡，凌晨的街道，沿途遇到的几乎全是Ingress玩家，我们说着黑话交换卡片。玩得很疲惫，但异常地开心。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200510221028.webp" alt="">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200510221037.webp" alt="" title="我在哪呢……">&lt;/p>
&lt;p>一年后，随着热情慢慢褪去（主要还是自己变懒了），我不再沉迷于做多重升级，而变成了咸鱼的任务党玩家。此后的每一次旅行，我都会在Ingress中做上一排任务，在Ingress上留下足迹，它渐渐地从一个游戏，变成了行程记录器。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200511193600.webp" alt="">&lt;/p>
&lt;p>任务牌黑了后，玩游戏的时间明显减少了，除了每月一度的&lt;strong>I&lt;/strong>ngress &lt;strong>F&lt;/strong>irst &lt;strong>S&lt;/strong>unday，很少再抽出大把时间来玩耍了。并不是游戏不香了，而是时间变少人也变懒了。&lt;/p>
&lt;p>Ingress带给我的，是坐在屏幕前难以体会到的乐趣，它的社交性，是绝大多数游戏无法具备的，感谢它带我认识了一群有意思的人。之后虽然也尝试了腾讯的捉妖记，但由于其受众较大，玩家素质良莠不齐，很难带给我融入感。&lt;/p>
&lt;p>遗憾的是，当Ingress更新到Ingress Prime后，禁止了Root用户使用，因此我已经半年多没有登陆了。也许在换了手机后，我会回来继续这个未完待续的故事吧。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200511194053.webp" alt="">&lt;/p></description><category domain="https://ioyoi.me/life/">life</category><category domain="https://ioyoi.me/tags/ingress/">Ingress</category></item><item><title>Simulink生成C++代码</title><link>https://ioyoi.me/tech/simulink-to-c/</link><guid isPermaLink="true">https://ioyoi.me/tech/simulink-to-c/</guid><pubDate>Thu, 07 May 2020 11:44:52 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>Simulink提供了很强大的控制器仿真功能，但无奈自己学艺不精，对Matlab的知识掌握属实少得可怜，因此需要借助其他的语言对仿真数据进行进一步的处理及可视化，这里谈谈Simulink模型的C++项目生成及使用方法。&lt;/p>
&lt;h2 id="生成">生成&lt;/h2>
&lt;p>首先需要在Matlab中安装Simulate Coder。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200507114808.webp" alt="">&lt;/p>
&lt;p>安装完成后可以在Simulink-APPS中找到Simulink Coder入口，打开后，在Settings-Model Settings中对生成项目进行一定的配置。&lt;/p>
&lt;p>首先为了更容易的得到时间，在solver中选用了定步长的龙格-库塔法进行仿真，并设置合适的步长。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200507225409.webp" alt="">&lt;/p>
&lt;p>为了方便，这里选择直接生成完整的通用C++解决方案，同时勾选仅生成代码而不进行编译，这样可以省去配置编译器带来的麻烦。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200507165913.webp" alt="">&lt;/p>
&lt;p>如果在编译中遇到了&lt;code>rt_StartDataLoggingWithStartTime&lt;/code>等其他&lt;a href="https://www.mathworks.com/matlabcentral/answers/313434-where-is-defined-the-function-rt_startdataloggingwithstarttime">宏缺失的问题&lt;/a>，需要在Code Generation-Interface-Advanced parameters中禁用MAT格式日志。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200507170729.webp" alt="">&lt;/p>
&lt;p>设置完成后点击Generate Code即可生成项目，生成成功后会弹出报告，项目路径为Matlab当前的工作路径。&lt;/p>
&lt;h2 id="使用">使用&lt;/h2>
&lt;p>这里使用一简单伺服电机模型作为示例：&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200507225133.webp" alt="">&lt;/p>
&lt;p>可以看到该模型有两输入信号&lt;code>In1, In2&lt;/code>与一输出信号&lt;code>Out1&lt;/code>。&lt;/p>
&lt;p>在Clion中使用New CMake Project from Source打开生成的project_grt_rtw目录，使其自动生成一CMake文件，编辑CMakeLists.txt，在&lt;code>include_directories&lt;/code>中添加以下几条路径，以编译Matlab中的源文件。（需将&lt;code>C:\\Program Files\\MATLAB\\R2019b&lt;/code>替换成本机的Matlab安装目录）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cmake" data-lang="cmake">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">include_directories&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;C:\\Program Files\\MATLAB\\R2019b\\extern\\include&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;C:\\Program Files\\MATLAB\\R2019b\\simulink\\include&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;C:\\Program Files\\MATLAB\\R2019b\\rtw\\c\\src&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>新建主函数入口&lt;code>main.cpp&lt;/code>，并将&lt;code>main.cpp&lt;/code>加入CMakeLists.txt中的&lt;code>add_executable&lt;/code>列表中。内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c++" data-lang="c++">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iomanip&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;#34;test1.h&amp;#34;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">STEP_SIZE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1e-5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">test1ModelClass&lt;/span> &lt;span class="n">model&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">test1ModelClass&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">initialize&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">test1_U&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">In1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mf">1e5&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">test1_U&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">In2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">rand&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="kt">double&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">RAND_MAX&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">step&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">fixed&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">setprecision&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">STEP_SIZE&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s">&amp;#34; &amp;#34;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">model&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">test1_Y&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">Out1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">model&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">terminate&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>对主要接口进行说明：&lt;/p>
&lt;ul>
&lt;li>&lt;code>model.initialize()&lt;/code>：初始化模型&lt;/li>
&lt;li>&lt;code>model.step()&lt;/code>：步进一步，相当于经过一个采样周期&lt;/li>
&lt;li>&lt;code>model.terminate()&lt;/code>：终止模型&lt;/li>
&lt;li>&lt;code>model.test1_U&lt;/code>：模型输入&lt;/li>
&lt;li>&lt;code>model.test1_Y&lt;/code>：模型输出&lt;/li>
&lt;/ul>
&lt;p>完整项目可在&lt;a href="https://git.everness.me/Everness/simulink_test">git仓库&lt;/a>中查看。&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/tutorial/">tutorial</category><category domain="https://ioyoi.me/tags/matlab/">matlab</category></item><item><title>WSL, Nice Job!</title><link>https://ioyoi.me/tech/windows-subsystem-for-linux/</link><guid isPermaLink="true">https://ioyoi.me/tech/windows-subsystem-for-linux/</guid><pubDate>Wed, 06 May 2020 20:39:00 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>Windows下的Linux子系统推出已经三年多了，但直至上周我才正式开始使用它，很遗憾之前错过了这么棒的命令行工具。在过去一段时间中，我曾经装过双系统，虚拟机，并在Windows中使用了很长时间的&lt;a href="https://gitforwindows.org/">git-bash&lt;/a>。网上关于Windows Terminal+WSL的配置教程已经很多，这里只想谈谈我眼中WSL的优点。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>完整的Linux命令行体验&lt;/p>
&lt;p>相较git-bash提供的有限Linux命令，WSL提供了一套完整的Linux操作体验，其基本上可以完成所有Linux环境下的命令行操作，达到无限近似于于双系统的体验。将其shell更换为我更习惯的zsh并用&lt;a href="https://www.autohotkey.com/">AutoHotKey&lt;/a>设置Ctrl+Alt+T的热键后，感觉完全是一个使用Windows桌面的Linux系统。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506205404.webp" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>轻量&lt;/p>
&lt;p>除了占用一定的储存空间外，WSL几乎没有任何资源占用，命令行的启动速度与Powershell相当，操作流畅，不会出现虚拟机下输入的卡顿感。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>资源共享&lt;/p>
&lt;p>文件自动挂载，端口无需映射，可以帮你省去虚拟机上的许多麻烦。此外，在WSL环境下，依然可以运行WIndows上的可执行文件。&lt;/p>
&lt;p>&lt;em>听说新版本的WSL 2将返回虚拟机实现，共享特性将大打折扣，不是很能理解工程师的设计思路。&lt;/em>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>优秀的包管理器&lt;/p>
&lt;p>一直认为Windows的一大缺陷是缺少一个类似于brew、pacman一样优秀的包管理器。&lt;sup id="fnref:1">&lt;a href="https://ioyoi.me/tech/windows-subsystem-for-linux/#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>而WSL很大程度上可以补足这一点，曾经一次次手动下载更新Hugo和Annie的我终于得到了解放，也希望不久后Microsoft Store能真正的站起来吧。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506210724.webp" alt="">&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>对于经常在Windows下运行命令行而又不熟悉cmd命令的人，WSL是一个近乎完美的工具。&lt;/p>
&lt;p>因此，这一次，我要说，&lt;strong>Nice job, Microsoft!&lt;/strong>&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>不要谈&lt;a href="https://chocolatey.org/">Chocolatey&lt;/a>，用过都知道国内的速度实在感人。&amp;#160;&lt;a href="https://ioyoi.me/tech/windows-subsystem-for-linux/#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/linux/">linux</category></item><item><title>环形物语</title><link>https://ioyoi.me/dream/tales-from-the-loop/</link><guid isPermaLink="true">https://ioyoi.me/dream/tales-from-the-loop/</guid><pubDate>Tue, 05 May 2020 23:16:26 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>故事发生在俄亥俄州的一个小乡村，这里的实验室，能将不可能之事变为可能，他们称它为，&lt;strong>LOOP&lt;/strong>。&lt;sup id="fnref:1">&lt;a href="https://ioyoi.me/dream/tales-from-the-loop/#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;blockquote>
&lt;p>You will see here sights that, well, you'd say were impossible. And yet, there they are.&lt;/p>
&lt;/blockquote>
&lt;h2 id="ep1我们都活成了自己不喜欢的样子">EP1:我们都活成了自己不喜欢的样子&lt;/h2>
&lt;p>曾经被母亲抛弃的小女孩，曾这样许下愿望，如果我有了孩子，我将永远陪在他身旁。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505235348.webp" alt="">&lt;/p>
&lt;p>可惜，时光飞逝，生活教会了我许多，却忘了告诉我我，该怎样对待最亲近的人。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505235532.webp" alt="">&lt;/p>
&lt;p>我变得不耐烦，我变得暴躁，我变得不能理解，&lt;strong>我变成了我讨厌的样子&lt;/strong>。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505235758.webp" alt="">&lt;/p>
&lt;p>好在，我们还有机会去改变，去拯救，去爱。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505235841.webp" alt="">&lt;/p>
&lt;p>感谢穿越而来的你，教会了我。&lt;/p>
&lt;h2 id="ep2还我的生活">EP2:还我的生活&lt;/h2>
&lt;p>你夺走了我的家人，我的未来，我的一切，却还希望我原谅？&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506165554.webp" alt="">&lt;/p>
&lt;p>你大可随意抱怨不公，但请不要以此为接口，伤害比你幸运的人。&lt;/p>
&lt;h2 id="ep3美好的一瞬间">EP3:美好的一瞬间&lt;/h2>
&lt;blockquote>
&lt;p>…that wonderful feeling of excitement. Why doed it always pass? Even when you know it's special right then and there, it still ends. Why? Why can't it last forever, like we wish it could?&lt;/p>
&lt;/blockquote>
&lt;p>美好从不保质，就算静止了时间，又如何呢？&lt;/p>
&lt;p>时间冲淡爱意，时间扑灭激情，当陪伴已成煎熬，何必要困在永恒中呢？&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506171020.webp" alt="" title="这集的华裔女主真的很耐看">&lt;/p>
&lt;h2 id="ep4死亡">EP4:死亡&lt;/h2>
&lt;blockquote>
&lt;p>- We should put something here.&lt;/p>
&lt;p>- Like what?&lt;/p>
&lt;p>- Something.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506171510.webp" alt="">&lt;/p>
&lt;p>死亡只是生命的一部分，当你死后，你愿意去哪呢？&lt;/p>
&lt;h2 id="ep5我想保护你">EP5:我想保护你&lt;/h2>
&lt;p>我想保护你，不计代价。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506172321.webp" alt="">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506172330.webp" alt="" title="I really like this scene.">&lt;/p>
&lt;h2 id="ep6和另一个自己为敌">EP6:和另一个自己为敌&lt;/h2>
&lt;p>如果世上出现了另一个你，你想和他一起生活吗？&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506173253.webp" alt="">&lt;/p>
&lt;p>I like you. 我们兴趣相投，我们心意相通，我了解你的一切，你理解我的选择。&lt;/p>
&lt;p>I hate you. 我们是竞争者，我们争抢独一无二的东西，你让我看到了自己的缺点，我却无法指责。&lt;/p>
&lt;h2 id="ep7我机器人">EP7:我，机器人&lt;/h2>
&lt;p>你我有着一样的心灵，仅仅因为外表不同，便无法一同生活么？&lt;/p>
&lt;p>We like robots who &lt;strong>like&lt;/strong> human. We hate robots who &lt;strong>like&lt;/strong> human.&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506173826.webp" alt="">&lt;/p>
&lt;h2 id="ep8轮回">EP8:轮回&lt;/h2>
&lt;blockquote>
&lt;p>- It… didn't feel like a long time.&lt;/p>
&lt;p>- But it was.&lt;/p>
&lt;p>- It's not fair. I want it to be like it was.&lt;/p>
&lt;/blockquote>
&lt;p>故事都有结尾，from the very end comes the new story.&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506180946.webp" alt="">&lt;/p>
&lt;h2 id="epx感动">EPx:感动&lt;/h2>
&lt;p>这部影集改编自瑞典艺术家&lt;a href="https://twitter.com/simonstalenhag">Simon Stålenhag&lt;/a>的一本画集，如果你是《无人深空》的玩家，相信你对剧情中的机器人造型并不陌生。未来主义的科幻色彩与宁静唯美的北欧风景融合，带来了《环形物语》中独特的美学元素。如果你喜欢剧中的画风，我强烈推荐你看看这本同名&lt;a href="https://thetrove.net/Books/Tales%20from%20the%20Loop/Tales%20From%20The%20Loop%20-%20English%20Edition%20%28Updated%29.pdf">插画集&lt;/a>。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506175306.webp" alt="">&lt;/p>
&lt;p>和大部分黄暴的HBO美剧不同，《环形物语》是一部节奏很慢的剧集，舒缓的背景音乐配上朴素的镜头画面，让你在看剧时得到完完全全地放松。剧中几乎完全避免了宏大场景的描绘，镜头始终聚焦于人物，简单而真实。&lt;/p>
&lt;p>首季的八集，讲述了八位主人公的故事，开始于日常生活，转变于奇妙现象，最后又都归于平静，每一段离奇经历给人惊喜的同时，也让观者深层次的思考。在分离的故事中，又可以看到人物间的联系，站在不同的视角去审视人们的关系，每个主人公的经历都对其他人造成了或多或少的影响，这也正是回环的魅力所在。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200506181446.webp" alt="">&lt;/p>
&lt;p>我喜欢这部美剧带给我的惬意感，当你疲惫时，看看《环形物语》，它必不会让你失望。&lt;/p>
&lt;hr>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>文中的各EP标题都是自己随便起的，并不是原版名称的翻译。&amp;#160;&lt;a href="https://ioyoi.me/dream/tales-from-the-loop/#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description><category domain="https://ioyoi.me/dream/">dream</category><category domain="https://ioyoi.me/tags/series/">series</category></item><item><title>于离别之朝束起约定之花</title><link>https://ioyoi.me/dream/when-the-promised-flower-blooms/</link><guid isPermaLink="true">https://ioyoi.me/dream/when-the-promised-flower-blooms/</guid><pubDate>Tue, 05 May 2020 18:24:37 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;blockquote>
&lt;p>经，是流逝的岁月；纬，是人们的生业。&lt;/p>
&lt;/blockquote>
&lt;p>《朝花夕誓》，是冈妈作为导演的处女作，也是我在2019年最喜欢的一部动画电影。影片从永生一族平静的生活被打破讲起，以三位伊奥鲁夫人的故事为主线，讨论了亲情与爱，离别与成长的主题。&lt;/p>
&lt;h2 id="光影">光影&lt;/h2>
&lt;p>本作的画面并不如诚哥《天气之子》那般惊艳，而是用PA社惯用的风格，以细腻的笔触去表现唯美。无论是世外桃源的伊奥鲁夫，还是蒸汽时代的梅札特，在大场景的描绘上均能给人不小的震撼。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505205202.webp" alt="">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505205222.webp" alt="">&lt;/p>
&lt;p>本作中色彩和光影的运用也属上乘。在色彩上，我尤其欣赏影片中&lt;strong>白&lt;/strong>的使用，带给观者神圣感的同时，也给人一种纯粹的美学享受。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505210741.webp" alt="">&lt;/p>
&lt;p>而光影的变化，为这部动画的画面加分不少。影子的使用，使本作中的人物和环境达到了量好的交互，即使在一些人物明显是贴图的场景中，由于影子的出现，也没有人物与场景不相容的突兀感；此外，光线的变化也很好地服务于剧情转场与人物的心情变化，初升的阳光，高塔遮蔽的阴影，都出现的恰到好处。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505211209.webp" alt="">&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505211221.webp" alt="">&lt;/p>
&lt;h2 id="剧情">剧情&lt;/h2>
&lt;p>看了豆瓣上不少人的评论，剧情过多，是很多人诟病的一点。但是在我看来，这种剧情安排确实紧凑，但并算不上急。影片其实对主人公各个阶段的转变都做了足够的铺垫，其支线也是一笔带过，并未对主线产生太大的稀释，反而增添了作品的厚度。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505213519.webp" alt="">&lt;/p>
&lt;p>以影片中跨度较大的两段剧情为例，第一段是艾瑞尔由少年变为青年，转场使用钢铁蒸汽描绘社会的工业化，以此展现时代的变迁。第二段为玛琪亚在地窖中的数年生活，也是使用了过腰的头发表现了时间的流逝。（居然还会有人怀疑我老婆被人玷污了？？？）事实上，本篇中的大部分转场都是十分优秀的，制作组擅长借助于细节进行场景的过度，如从蕾伊亚房间洒满碎花过渡至玛琪亚清扫地上树叶，以及玛琪亚被克里姆带走时敞开的窗户与破碎的风铃。可以说，支线剧情虽独立但衔接连贯，这并不是影片的缺点。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505215052.webp" alt="">&lt;/p>
&lt;p>我认为本作真正的败笔在于结尾的处理，当看到玛琪亚与蕾莉亚乘龙而去时，我认为这部影片已经收尾。离别一族的生活被古龙打破，玛琪亚被古龙带离伊奥鲁夫的平静，也乘古龙离开了世俗的喧嚣，对于主人公的生活，已经画上了完整的句号。但影片为了突出离别的主题，特意增加了玛琪亚送别老年艾瑞尔的剧情，让我感觉有些画蛇添足，最后过多的回忆，很大地折损了结尾带来的感触与思考。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505212453.webp" alt="">&lt;/p>
&lt;p>另外，作为男主的艾瑞尔，个性远不如三位伊奥鲁夫主角鲜明，这可能也是许多人眼中“影片主题不突出”的原因之一吧。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505215425.webp" alt="" title="复仇的男人最帅了">&lt;/p>
&lt;h2 id="主题">主题&lt;/h2>
&lt;p>这是一个讲述离别的故事，&lt;strong>生活需要牵绊，而成长必经离别&lt;/strong>。&lt;/p>
&lt;blockquote>
&lt;p>如果，你与外面世界的人邂逅，绝不能爱上别人。如果爱上的话，就真的变成孤单一人了。&lt;/p>
&lt;/blockquote>
&lt;p>伊奥鲁夫一族，因为永恒的寿命，不得不一次次面对离别。最后，“离别一族”选择不去与外人邂逅，不再牵绊，亦不需离别。于是其日复一日地重复着单调的生活，平淡，但适合永恒。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505220258.webp" alt="">&lt;/p>
&lt;p>但平静的生活还是被打破，族人的离别，爱人的离别，是“离别一族”第一次被迫的成长，他们斩断了过去的联系，寻找着新的牵绊。玛琪亚遇到了艾瑞尔，两个孤独的人彼此陪伴，共同学着善良，勇敢，坚强；蕾莉亚有了梅德梅尔，虽然失去了自由，囚于高塔，但仍为女儿坚强的活着。克里姆放不下过往，蕾莉亚便是他的全部，失去了爱人，便失去了生活的全部意义。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505221442.webp" alt="">&lt;/p>
&lt;p>而第二次离别，则是主动的告别，既然注定无法永远生活在一起，何不早早地在合适的时机告别呢？艾瑞尔离开了玛琪亚，组建了自己的家庭，和睦而幸福，梅德梅尔失去了蕾莉亚，但相信她也将有自己崭新的生活。能够留在记忆中，还不够吗？&lt;/p>
&lt;p>也许人生，就是一次次关系的切断与重建，幸运的是，人类有限的生命使我们很少回忆，而容易遗忘，留在岁月锦上的，皆是美好。&lt;/p>
&lt;h2 id="谈谈中配">谈谈中配&lt;/h2>
&lt;p>看日漫时，我很少选择中文配音的版本，事实上，B站的&lt;a href="https://www.bilibili.com/bangumi/play/ep265696">中文版&lt;/a>应该是我第一部完整看完的中配日漫。在我看来，目前的中配和日配还有很大的差距，主要体现在以下几点：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>配音演员的感情流露&lt;/p>
&lt;p>在国语配音的大部分语句中，很难分辨此时的人物是何情感，而在少数有情感表达的过程中，也能感到明显的矫饰和造作，语气语调均不自然。如影片17分半左右的哭腔，强行吊嗓子达到失声的配音方式会给观众一种强烈的不适感。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>剧本的翻译方式&lt;/p>
&lt;p>好的配音必须要有好的译本，事实上，许多电影字幕的翻译都是按照书面语的方式进行的，但在配音中，口语化的翻译方式会使人听起来更加舒服，下面举影片中蕾莉亚在片尾的自白作为例子：&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200505192611.webp" alt="">&lt;/p>
&lt;blockquote>
&lt;p>我是伊欧夫的蕾莉亚，放纵不羁，活泼奔放，不让须眉，并且，自由自在。&lt;/p>
&lt;/blockquote>
&lt;p>这是某字幕组提供的翻译文本，经典的四字词连用，作为字幕翻译还是相当不错的，但若是朗读出来，短词的连用会带来不自然的断句停顿，阻碍情感的表达。&lt;/p>
&lt;blockquote>
&lt;p>我是伊奥鲁夫一族的蕾莉亚，是个性格奔放，各方面不输给男孩子的野丫头，而且，自由自在。&lt;/p>
&lt;/blockquote>
&lt;p>因此在配音稿的翻译中，应当对人物对白进行口语化，加入普通人交流常使用的词汇和句式，更容易给观众以代入感。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>对白自身的内容&lt;/p>
&lt;p>事实上，不少日漫中的语言是“中二”的，只是听不懂的语言打消了台词的尴尬感，经典的如“既然你诚心诚意的请教了，我就大发慈悲的告诉你”、“为了守护世界的和平”，如果使用母语说出，会让人感到好羞耻，或者好搞笑。不知道霓虹国的原住民会不会有这种感受呢。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>我已经习惯了看字幕听个响的观影方式，但我依然希望中配能够继续进步，期待着不久后，国内将改变知名演员强行配音的现状，衍生出专注于配音的声优职业，带给我们更加丰富的观影体验。&lt;/p></description><category domain="https://ioyoi.me/dream/">dream</category><category domain="https://ioyoi.me/tags/anime/">anime</category><category domain="https://ioyoi.me/tags/movie/">movie</category></item><item><title>青年</title><link>https://ioyoi.me/life/the-youth/</link><guid isPermaLink="true">https://ioyoi.me/life/the-youth/</guid><pubDate>Mon, 04 May 2020 23:28:07 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;div style="position: relative; padding: 30% 45%;">&lt;iframe style="position: absolute; width: 90%; height: 100%; left: 5%; top: 0;" src="https://ioyoi.me//player.bilibili.com/player.html?bvid=BV1FV411d7u7&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> &lt;/iframe>&lt;/div>
&lt;p>五四青年节，被B站的宣传视频刷屏。&lt;/p>
&lt;p>我承认，此时此刻，我的确生活在一个幸福的时代。有父母的支持，我可以随心所欲地旅行，投资自己的爱好。但遗憾的是，这一切都是拜父母所赐，我离“不惑”，也还差的远。二十多年，我仍不知道自己需要些什么，不断怀疑，我以后的生活，会比现在更好吗？&lt;/p>
&lt;p>最后，我选择了&amp;quot;&lt;strong>enjoy in time&lt;/strong>&amp;quot;，是逃避，也是在挣扎着生活。这种选择是否正确，我无重得知，我看到的只是，身边的中年人，很少得到快乐。也许享受，只是青年人的特权。&lt;/p>
&lt;p>青年的我，不想做后浪，不需被认可，亦不需礼赞，我只是想及时行乐，没心没肺地生活。&lt;/p>
&lt;p>青年说，这样就好。&lt;/p></description><category domain="https://ioyoi.me/life/">life</category><category domain="https://ioyoi.me/tags/thinking/">thinking</category></item><item><title>谈谈我用过的VPS们</title><link>https://ioyoi.me/tech/talk-about-vps/</link><guid isPermaLink="true">https://ioyoi.me/tech/talk-about-vps/</guid><pubDate>Tue, 28 Apr 2020 18:13:07 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;h2 id="前言">前言&lt;/h2>
&lt;p>前些日子做梯子的VPS IP地址被谷歌学术禁用了，在Vultr刷了好久的IP，一直找不到一个墙内能用的，于是告别了用了快两年的服务器，开始寻找新的服务提供商，正好结合之前用的一些线路体验，整理成了这篇文章。&lt;/p>
&lt;p>这也算是一篇评测文，但打分100%主观，推荐仅供参考，想要求真知，建议还是自己折腾测试。&lt;/p>
&lt;p>本人网络环境：北京联通手机卡，联通(家)/移动/教育网(学校)宽带，无电信设备。&lt;/p>
&lt;h2 id="vultrhttpswwwvultrcom">&lt;a href="https://www.vultr.com/">Vultr&lt;/a>&lt;/h2>
&lt;p>这算是使用时间最长的VPS厂商，使用的主要是日本机房和新加坡机房，各自用了一年半左右。日本机房联通移动均为ntt线路，新加坡机房联通为ntt绕日本，移动为直连，速度相当可以。&lt;/p>
&lt;p>Vultr最大的优点就是换IP十分方便，重开机器只需要恢复镜像就能继续使用，不需要重新部署。缺点在于用的人实在太多了，晚上联通走的ntt线路必炸，且由于大量梯子教程吸引了许多小白使用vultr，可用IP骤减，每次刷地址都是个痛苦的过程。&lt;/p>
&lt;p>推荐指数：&lt;strong>4&lt;/strong>，Vultr的性价比还算可以，并且按小时计费，机房众多，可以随时更换IP，对新手比较友好，如果你生活在北上广深且使用联通网络，日本和新加坡的机房还是很值得考虑的。&lt;/p>
&lt;h2 id="gcphttpscloudgooglecomgcp">&lt;a href="https://cloud.google.com/gcp/">GCP&lt;/a>&lt;/h2>
&lt;p>Google Cloud Platform是我最早接触的VPS服务，原因是只要你有双币信用卡就能白嫖一年的免费使用，GCP的香港和台湾机房网络线路可以用稳的一批来形容，即便是晚高峰也能做到Youtube 2k秒开，缺点是价格较高且按流量计费，因此用完一年的免费额度后就不再使用了。&lt;/p>
&lt;p>推荐指数：&lt;strong>4.5&lt;/strong>，如果你不缺钱且求稳的话，谷歌云是相当不错的选择，台湾香港机房相比其他海外机房还有默认中文的一大优势。&lt;/p>
&lt;h2 id="banwagonhttpsbandwagonhostcomaffphpaff59755">&lt;a href="https://bandwagonhost.com/aff.php?aff=59755">Banwagon&lt;/a>&lt;/h2>
&lt;p>现在使用的是鼎鼎大名的搬瓦工CN2 GIA DC6机房的服务器，联通移动走的都是CN2 GIA的线路，晚高峰时期基本不受影响，一个星期用下来还是比较稳的，缺点是太贵，49刀3个月的价格，只能说是一分钱一分货。&lt;/p>
&lt;p>推荐指数：&lt;strong>4.5&lt;/strong>，和谷歌云一样都很稳，在每月10TB+流量的情况下搬瓦工的性价比高于谷歌云，如果能抢到49刀一年的限量版简直血赚。另外网传DC3机房的CN2 GT线路也还可以，价格比GIA线路低了不少，也可以尝试一下。&lt;/p>
&lt;h2 id="hostwindshttpswwwhostwindscomhosting">&lt;a href="https://www.hostwinds.com/hosting/">Hostwinds&lt;/a>&lt;/h2>
&lt;p>用过一个月的hostwinds，价格和Vultr持平，均为5刀一月，但并不是按小时计费，这家的优点是外网带宽特别大，轻易能跑出1Gbps的成绩，下载数据库的时候动辄1-200M/s，不过国内使用体验极差，下行带宽只有1-2MBps的样子，基本不能当梯子用，延迟也在300ms以上。&lt;/p>
&lt;p>推荐指数：&lt;strong>1&lt;/strong>，完全无法满足做梯子的要求。&lt;/p>
&lt;h2 id="hostdarehttpswwwhostdarecom">&lt;a href="https://www.hostdare.com/">Hostdare&lt;/a>&lt;/h2>
&lt;p>只用了三天就退款了，由于测试的时候联通的海底光缆恰好断了，因此不能确定下行带宽异常是暂时的还是永久的。这家的特色是China Optimized KVM主机，但是只有电信是CN2优化线路，联通依然是直连，下行带宽感人，Youtube 720p视频依然需要缓冲。另外这家是专有带宽，49刀每年的套餐只有50M的带宽。&lt;/p>
&lt;p>推荐指数：&lt;strong>2&lt;/strong>，电信用户可以考虑，算比较便宜的CN2线路，联通用户请绕行。&lt;/p>
&lt;h2 id="小结">小结&lt;/h2>
&lt;p>如果做一个总结的话，我会推荐手头宽裕的人使用Banwagon的&lt;a href="https://bwh88.net/aff.php?aff=59775&amp;amp;pid=87">CN2 GIA主机&lt;/a>，确实稳定省心，手头紧的同志可以选择白嫖谷歌云、Banwagon的&lt;a href="https://bwh88.net/aff.php?aff=59775&amp;amp;pid=57">GT主机&lt;/a>。&lt;/p>
&lt;h2 id="拓展阅读">拓展阅读&lt;/h2>
&lt;p>如果想详细了解国内运营商的出口线路，推荐一篇知乎专栏中的&lt;a href="https://zhuanlan.zhihu.com/p/64467370">文章&lt;/a>。&lt;/p>
&lt;h2 id="题外话用vps都做了些什么">题外话：用VPS都做了些什么？&lt;/h2>
&lt;p>目前这台服务器跑的服务如下：&lt;/p>
&lt;ul>
&lt;li>博客 &lt;a href="https://gohugo.io/">Hugo&lt;/a>+&lt;a href="https://themes.gohugo.io/hugo-theme-meme/">hugo-theme-meme&lt;/a>&lt;/li>
&lt;li>笔记 &lt;a href="https://gohugo.io/">Hugo&lt;/a>+&lt;a href="https://themes.gohugo.io/ace-documentation/">ace-documentation&lt;/a>&lt;/li>
&lt;li>梯子 &lt;a href="https://www.v2ray.com/">V2Ray&lt;/a>&lt;/li>
&lt;li>网盘 &lt;a href="https://github.com/filebrowser/filebrowser">Filebrowser&lt;/a>&lt;/li>
&lt;li>下载器 &lt;a href="https://aria2.github.io/">aria2&lt;/a>+&lt;a href="https://github.com/mayswind/AriaNg">ariaNG&lt;/a>&lt;/li>
&lt;li>Git服务 &lt;a href="https://gitea.io/">gitea&lt;/a>&lt;/li>
&lt;li>自建的一些后端服务&lt;/li>
&lt;/ul>
&lt;p>几乎全都是go语言实现的东西，我其实是gopher的狂热粉了~&lt;/p>
&lt;p>另外还有一些曾经用过的服务：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://www.wiz.cn/zh-cn/docker">为知笔记&lt;/a>&lt;/p>
&lt;p>相当于一个自建的印象笔记，支持markdown，不过这个要求至少2G内存，换过服务器后实在是没钱加内存了，于是选择了hugo+ace-docunmentation的替代方案，同样使用markdown写作，使用git-hooks同步更新，缺点是手机上记笔记变得很麻烦。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Email&lt;/p>
&lt;p>这个自己建着实有点无聊，给谁发邮件都会被归类到垃圾邮件里，没有什么实用价值，因为没有go语言实现就不再使用了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>图床&lt;/p>
&lt;p>之前用过一段时间&lt;a href="https://lychee.electerious.com/">lychee&lt;/a>图床，但是由于服务器在国外访问速度不是很理想弃用了，现在使用&lt;a href="../%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91oss%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A/">阿里云OSS&lt;/a>作为图床，速度爽到飞起。&lt;/p>
&lt;/li>
&lt;/ul></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/vps/">vps</category></item><item><title>美赛体验</title><link>https://ioyoi.me/life/mcm-experiment/</link><guid isPermaLink="true">https://ioyoi.me/life/mcm-experiment/</guid><pubDate>Mon, 27 Apr 2020 22:35:47 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>今日美赛出成绩，在两位大佬的带领下拿了个&lt;strong>H&lt;/strong>oly Shit奖，我的美赛经历应该也就到此结束了，遂记点文字来画个句号。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200427224700.webp" alt="">&lt;/p>
&lt;h2 id="缘起">缘起&lt;/h2>
&lt;p>选择参加美赛，并不是看中了美赛的高含金量，而是希望借助美赛，给自己一个正确的定位。进入大学之后，明显感到自己的自信心不足，大概是想找个机会证明一下自己吧。相比求名次的选手们，我们的队伍应该算是比较佛系的，抱着“无奖不亏，有奖血赚”的心态参加了2020年的比赛。&lt;/p>
&lt;h2 id="过程">过程&lt;/h2>
&lt;p>题目选择了A题去英国捕鱼，我在其中负责的工作主要是海水温度预测、图像绘制和Latex排版。在此过程中，数学技能并没有得到什么提高，反而是在绘图和排版上学到了很多。&lt;/p>
&lt;p>由于在美赛结束后已经做过了总结，这里贴上比较有价值的几条教训：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>多人写作时使用在线文档&lt;/p>
&lt;p>在论文写作阶段，分工合作时难免会出现文件的多次迭代更新，采用微信/QQ的文件传输方式很容易错过更新，现在有不少非常不错的在线文档服务（如&lt;a href="https://shimo.im/welcome">石墨文档&lt;/a>），其多人同时编辑的功能可以大大提高协作效率。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Word转Latex问题&lt;/p>
&lt;p>队伍里的其他两位成员均比较熟悉Word写作，在Word转Latex的过程中遇到了较大的困难，这里对一些比较麻烦的转换点进行一些总结。（不过还是推荐用对Latex更加友好的Markdown来进行初步的写作）&lt;/p>
&lt;ul>
&lt;li>
&lt;p>引用&lt;/p>
&lt;p>Latex提供了非常强大的Bib引用格式，在初稿写作时可以直接提供谷歌学术的地址，直接导出Bib格式。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>图片&lt;/p>
&lt;p>Latex的图片大小及位置调整较Word更加麻烦，这次的经验是图片大小控制在宽度15cm内，高度4-7cm能够得到较好的显示效果。另外包含文字的图片最好以实际显示的大小导出，防止因缩放失真。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>表格&lt;/p>
&lt;p>自己对于Latex的表格掌握太差，没什么好说的，这里推荐一个支持Latex的可视化&lt;a href="http://www.tablesgenerator.com/">表格生成器&lt;/a>，Markdown同样可以使用。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>公式&lt;/p>
&lt;p>Latex对于长公式可以说是非常不友好了，可怕的是马大佬还提供了巨长的公式难为我，在写作时应绝对避免这种迷惑行为，对长公式进行拆分，以下为一错误示例：&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200427230643.webp" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>其他&lt;/p>
&lt;p>Word和Latex的一个很大区别在于，Word是一个所见即所得的文本编译器，而Latex则会自动调整图片、表格的位置来满足排版要求，因此Word中的as follows在Latex排版后往往会出现找不到图的情况，因此使用is shown in Figure X来定位图片是一种更好的选择.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="收获">收获&lt;/h2>
&lt;p>这次的参赛经历总的来说是非常愉快的，就算通宵了一夜肝锅，第二天也是成就感满满，精神十足。团队合作良好，自己的绘图技能也提高了不少（奇怪的技能又增加了），算得上是一次珍贵的记忆了~&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200427231722.webp" alt="" title="美赛中做的鱼群图">&lt;/p>
&lt;h2 id="感谢">感谢&lt;/h2>
&lt;p>首先感谢马神和樊神实力Carry。&lt;/p>
&lt;p>还要感谢华北理工大学数学建模协会提供的&lt;a href="https://github.com/muyuuuu/A-customized-MCM-LaTeX-template-based-on-ctexart">美赛Latex模板&lt;/a>，这个模板格式严谨，排版较为美观，同时上手也很简单，推荐小伙伴们使用。&lt;/p></description><category domain="https://ioyoi.me/life/">life</category><category domain="https://ioyoi.me/tags/memory/">memory</category></item><item><title>使用Python绘制电路图</title><link>https://ioyoi.me/tech/circuit-diagram-with-python/</link><guid isPermaLink="true">https://ioyoi.me/tech/circuit-diagram-with-python/</guid><pubDate>Mon, 20 Apr 2020 21:32:44 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;h2 id="引子">引子&lt;/h2>
&lt;p>由于最近上网课，很多作业可以以电子版提交，需要绘制的电路图一下子变多了。之前一直采用手绘+&lt;a href="https://www.circuitlab.com/editor/">circuitlab&lt;/a>+multisim的绘图方式，但它们都有一些这样那样的缺点。手绘太累，multisim的排线以及符号功能有点难用，circuitlab应该是一种比较好的解决方案，但依然存在不支持Latex符号的缺陷，致使许多下标符号不能正常显示，且自定义芯片的功能比较差。&lt;/p>
&lt;p>后来在逛知乎的时候发现了&lt;a href="https://schemdraw.readthedocs.io/">SchemDraw&lt;/a>，只是一个Python下的电路图库，调用matplotlib库进行绘图，相比以上几个工具，其优点主要有下：&lt;/p>
&lt;ul>
&lt;li>较为丰富的图形库（相比circuitlab）&lt;/li>
&lt;li>方便的自定义元器件&lt;/li>
&lt;li>支持Latex符号&lt;/li>
&lt;li>元器件角度旋转调整&lt;/li>
&lt;/ul>
&lt;p>当然首先还是要劝退一波：&lt;/p>
&lt;ul>
&lt;li>SchemDraw不支持自动布线，所有的线长都需要手动配置，因此只适合抄图而不适合直接作图。&lt;/li>
&lt;li>SchemDraw适合键盘爱好者，对鼠标依赖者不友好。如果你偏爱word而不是latex/markdown，那么SchemDraw可能并不适合你。&lt;/li>
&lt;/ul>
&lt;h2 id="安装">安装&lt;/h2>
&lt;p>pip安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pip install SchemDraw
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="基础使用">基础使用&lt;/h2>
&lt;p>通用模板：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">SchemDraw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">SchemDraw.elements&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nn">e&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">SchemDraw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Drawing&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">XXX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">XXX&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">draw&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;out.svg&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>所有的绘制工作都需要通过&lt;code>d.add()&lt;/code>接口完成：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">schemdraw&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Drawing&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">elm_def&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">**&lt;/span>&lt;span class="n">kwargs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>首先必须的是元件名称&lt;code>elm_def&lt;/code>，既可以是&lt;code>elements&lt;/code>包中包含的元器件，也可以是自定义的元器件，文后附有官方文档给出一些&lt;a href="https://ioyoi.me/tech/circuit-diagram-with-python/#%E5%85%83%E4%BB%B6%E9%80%9F%E6%9F%A5%E8%A1%A8">元器件&lt;/a>。其后常用&lt;a href="https://schemdraw.readthedocs.io/en/latest/usage/placement.html">可选参数&lt;/a>如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">参数&lt;/th>
&lt;th style="text-align:center">说明&lt;/th>
&lt;th style="text-align:center">示例&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">&lt;code>label=(string)&lt;/code>&lt;/td>
&lt;td style="text-align:center">标注，可用&lt;code>top/bot/rgt/lft&lt;/code>前缀设置位置&lt;/td>
&lt;td style="text-align:center">&lt;code>botlabel=&amp;quot;$U_i$&amp;quot;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;code>d=(string)&lt;/code>&lt;/td>
&lt;td style="text-align:center">方向，默认值为上一元器件的方向&lt;/td>
&lt;td style="text-align:center">&lt;code>d='left'&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;code>theta=(float)&lt;/code>&lt;/td>
&lt;td style="text-align:center">方向角，0表示向右&lt;/td>
&lt;td style="text-align:center">&lt;code>theta=-45&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;code>l=(float)&lt;/code>&lt;/td>
&lt;td style="text-align:center">长度，一般用&lt;code>d.unit&lt;/code>控制&lt;/td>
&lt;td style="text-align:center">&lt;code>l=d.unit/2&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;code>xy=(ele.anchor)&lt;/code>&lt;/td>
&lt;td style="text-align:center">元器件起始点&lt;/td>
&lt;td style="text-align:center">&lt;code>xy=op.out&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;code>anchor=(string)&lt;/code>&lt;/td>
&lt;td style="text-align:center">选择元器件的连接锚点&lt;/td>
&lt;td style="text-align:center">&lt;code>anchor='out'&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;code>to=(ele.anchor)&lt;/code>&lt;/td>
&lt;td style="text-align:center">设置终点，可用&lt;code>tox/toy&lt;/code>来设置单坐标&lt;/td>
&lt;td style="text-align:center">&lt;code>tox=op.in1&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">&lt;code>reverse=(bool)&lt;/code>&lt;/td>
&lt;td style="text-align:center">反转元器件&lt;/td>
&lt;td style="text-align:center">&lt;code>reverse=True&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>在绘图过程中，若有需要调用的元器件，则在添加该元器件时需要用变量记录记录：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">op&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">OPAMP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">anchor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;in2&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>推荐采用的绘图顺序是&lt;code>push()/pop()&lt;/code>的连续绘图方式，&lt;code>d.push()&lt;/code>是储存当前位置，&lt;code>d.pop()&lt;/code>则可以回到上一储存位置，下面用一个实例来说明该绘图过程。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200422120755.webp" alt="">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$a$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$C_1$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="mi">135&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="mi">135&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_1$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">botlabel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$d$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="mi">135&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$C_2$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=-&lt;/span>&lt;span class="mi">135&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_2$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$b$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">135&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">135&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_3$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">135&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">botlabel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$c$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_4$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">theta&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">45&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在这张电路图中，绘图起点选择了左上角的A点，按照顺时针的顺序进行绘制，当遇到结点时，即使用&lt;code>d.push()&lt;/code>记录该节点，随后绘制支路，绘制完一条支路后使用&lt;code>d.pop()&lt;/code>返回节点继续绘制其他支路，直至图形完全绘制。&lt;/p>
&lt;h2 id="自定义元器件">自定义元器件&lt;/h2>
&lt;p>暂时还没有这方面的例子，等我用到了再来补充QAQ&lt;/p>
&lt;h2 id="示例">示例&lt;/h2>
&lt;p>&lt;img src="https://img.ioyoi.me/20200422120533.webp" alt="">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">op&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">OPAMP&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">xy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;up&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">toy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tox&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$U_o$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$C_3$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">toy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">botlabel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$a$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_1$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$U_i$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_2$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tox&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$C_4$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">GND&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.ioyoi.me/20200422121242.webp" alt="">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$U_i$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$C$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$C$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$U_o$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">botlabel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R/2$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">GND&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;R&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;R&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;up&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$2C$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.ioyoi.me/20200422121404.webp" alt="">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$U_i$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$C$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$C$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">op1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">OPAMP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">anchor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;in2&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">botlabel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R/2$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;R&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;R&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;up&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$2C$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tox&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">op2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">OPAMP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">anchor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;out&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">reverse&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">xy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;up&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">1.6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">toy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_1$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">toy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_2$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">GND&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">xy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">0.6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$U_o$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">xy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">0.6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">xy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">0.2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;up&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">1.2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">toy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;img src="https://img.ioyoi.me/20200422121500.webp" alt="">&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$U_i$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_4$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">op1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">OPAMP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">anchor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;in1&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;up&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">0.8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_2$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;b&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">toy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tox&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;up&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$C$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">botlabel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;up&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$d$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">CAP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$C$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">GND&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">op2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">OPAMP&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">anchor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;in2&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">R&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_1$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$c$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">toy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tox&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$2R_1$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rgtlabel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$a$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">toy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tox&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">DOT_OPEN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$U_o$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;up&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;right&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tox&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RES&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">label&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;$R_3$&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mf">1.35&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;down&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">LINE&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">xy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">op1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">in2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unit&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">GND&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a href="https://schemdraw.readthedocs.io/en/latest/gallery/gallery.html">更多……&lt;/a>&lt;/p>
&lt;h2 id="元件速查表">元件速查表&lt;/h2>
&lt;p>&lt;img src="https://schemdraw.readthedocs.io/en/latest/_images/electrical_7_0.svg" alt="" title="单接口">&lt;/p>
&lt;p>&lt;img src="https://schemdraw.readthedocs.io/en/latest/_images/electrical_1_0.svg" alt="" title="双接口">&lt;/p>
&lt;p>&lt;img src="https://schemdraw.readthedocs.io/en/latest/_images/electrical_2_0.svg" alt="" title="电源和电动机">&lt;/p>
&lt;p>&lt;img src="https://schemdraw.readthedocs.io/en/latest/_images/electrical_3_0.svg" alt="" title="开关">&lt;/p>
&lt;p>&lt;img src="https://schemdraw.readthedocs.io/en/latest/_images/electrical_6_0.svg" alt="" title="点线">&lt;/p>
&lt;p>更多详见&lt;a href="https://schemdraw.readthedocs.io/en/latest/elements/electrical.html">官方文档&lt;/a>。&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/python/">python</category><category domain="https://ioyoi.me/tags/tool/">tool</category><category domain="https://ioyoi.me/tags/tutorial/">tutorial</category></item><item><title>使用阿里云OSS搭建图床</title><link>https://ioyoi.me/tech/image-hosting-with-aliyun-oss/</link><guid isPermaLink="true">https://ioyoi.me/tech/image-hosting-with-aliyun-oss/</guid><pubDate>Tue, 14 Apr 2020 11:54:07 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>很长一段时间，我都是用github作为图床托管博客上的图片，但现在github的访问并不是很稳定，并且有些自己做笔记写日记的图片并不想让其他人直接从仓库看到，因此考虑使用对象存储服务作为图床使用，既能提升国内的访问速度，也能一定程度上防止他人恶意看图。&lt;/p>
&lt;h2 id="创建对象存储服务">创建对象存储服务&lt;/h2>
&lt;p>在阿里云上创建Bucket，专门用于存储公共图片：&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200414124842.webp" alt="">&lt;/p>
&lt;p>需要填写一个独一无二的名称以进行访问，并将读写权限更改为公共读。&lt;/p>
&lt;p>为了防止token泄露影响其它阿里云服务，这里创建一子用户进行该Bucket的管理，在控制台-访问控制-用户中选择&lt;a href="https://ram.console.aliyun.com/users/new">新建用户&lt;/a>，创建一子用户以管理图床存储。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200414125650.webp" alt="image-20200414125646075">&lt;/p>
&lt;p>勾选编程访问以生成AccessKey，创建完成后请立即保存该用户的AccessKey，该创建窗口关闭后将无法再次查看AccessKey Secret。&lt;/p>
&lt;p>随后返回Buckedt管理页面对该子用户进行授权&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200414130105.webp" alt="image-20200414130102955">&lt;/p>
&lt;p>向其提供读写权限即可&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200414130149.webp" alt="image-20200414130148785">&lt;/p>
&lt;h2 id="配置picgo">配置PicGo&lt;/h2>
&lt;p>上传工具依然还是选用&lt;a href="https://picgo.github.io/PicGo-Doc/">PicGo&lt;/a>&lt;/p>
&lt;p>在配置中前四项依次填写之前保存的子用户ID、Secret、Bucket名称和Bucket地址。&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200414130519.webp" alt="image-20200414130518531">&lt;/p>
&lt;p>之后便可以很方便的在&lt;a href="https://marketplace.visualstudio.com/items?itemName=Spades.vs-picgo">VSCode&lt;/a>和&lt;a href="https://support.typora.io/Upload-Image/#picgoapp-chinese-language-only">Typora&lt;/a>中使用PicGo上传图片并替换链接了~&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/aliyun/">aliyun</category><category domain="https://ioyoi.me/tags/oss/">oss</category><category domain="https://ioyoi.me/tags/picgo/">PicGo</category><category domain="https://ioyoi.me/tags/tutorial/">tutorial</category></item><item><title>事件相机模拟器rpg_esim安装指北</title><link>https://ioyoi.me/tech/rpg_esim-simulator/</link><guid isPermaLink="true">https://ioyoi.me/tech/rpg_esim-simulator/</guid><pubDate>Thu, 26 Mar 2020 23:38:12 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;h2 id="系统环境">系统环境&lt;/h2>
&lt;p>VirtualBox 6.1.4 &amp;amp; Ubuntu 16.04 LTS&lt;/p>
&lt;h2 id="配置网络环境">配置网络环境&lt;/h2>
&lt;p>为加速github clone，先配置虚拟机网络使之使用主机代理&lt;/p>
&lt;p>VirtualBox选用NAT模式后，若虚拟机ip地址为10.0.x.15，则宿主机ip为10.0.x.2&lt;/p>
&lt;p>配置git代理&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git config --global http.proxy http://10.0.x.2:10809
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global https.proxy http://10.0.x.2:10809
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>由于apt源可使用国内镜像，因此可不配置系统代理&lt;/p>
&lt;h2 id="安装ros">安装ROS&lt;/h2>
&lt;p>参考&lt;a href="http://wiki.ros.org/kinetic/Installation/Ubuntu">官方文档&lt;/a>&lt;/p>
&lt;p>使用tuna镜像&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">vim /etc/apt/sources.list.d/ros-latest.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; deb https://mirrors.tuna.tsinghua.edu.cn/ros/ubuntu/ xenial main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-key adv --keyserver &lt;span class="s1">&amp;#39;hkp://keyserver.ubuntu.com:80&amp;#39;&lt;/span> --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install ros-kinetic-desktop-full
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="配置ros">配置ROS&lt;/h2>
&lt;p>初始化&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo rosdep init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rosdep update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>环境配置&lt;/p>
&lt;p>（需要注意这里使用的是zsh，如果使用其他命令行工具需要进行相应更改）&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;source /opt/ros/kinetic/setup.zsh&amp;#34;&lt;/span> &amp;gt;&amp;gt; ~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装编译依赖&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt install python-rosinstall python-rosinstall-generator python-wstool build-essential
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="安装rpg_esim">安装rpg_esim&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>安装编译工具&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt-get install ros-kinetic-catkin python-catkin-tools python-vcstool
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>创建workspace&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir -p ~/sim_ws/src &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> ~/sim_ws
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">catkin init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">catkin config --extend /opt/ros/kinetic --cmake-args -DCMAKE_BUILD_TYPE&lt;span class="o">=&lt;/span>Release
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>下载源码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> src/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://github.com/uzh-rpg/rpg_esim.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>处理依赖&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt install ros-kinetic-pcl-ros libglfw3 libglfw3-dev libglm-dev ros-kinetic-hector-trajectory-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vcs-import &amp;lt; rpg_esim/dependencies.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ze_oss
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">touch imp_3rdparty_cuda_toolkit/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> imp_app_pangolin_example/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> imp_benchmark_aligned_allocator/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> imp_bridge_pangolin/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> imp_cu_core/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> imp_cu_correspondence/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> imp_cu_imgproc/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> imp_ros_rof_denoising/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> imp_tools_cmd/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> ze_data_provider/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> ze_geometry/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> ze_imu/CATKIN_IGNORE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> ze_trajectory_analysis/CATKIN_IGNORE
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果在这一步出现无法git clone的错误，请检查是否&lt;a href="https://ioyoi.me/tech/rpg_esim-simulator/#%E9%85%8D%E7%BD%AEssh%E7%A7%81%E9%92%A5">正确配置git私钥&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>开始编译&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">catkin build esim_ros
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>编译成功后为模拟器配置环境变量&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;alias ssim=&amp;#39;source ~/sim_ws/devel/setup.zsh&amp;#39;&amp;#34;&lt;/span> &amp;gt;&amp;gt; ~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="测试模拟器">测试模拟器&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>获取视频源&lt;/p>
&lt;p>这里给出一些常用的命令以帮助使用&lt;/p>
&lt;ul>
&lt;li>
&lt;p>下载视频&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">you-get -i &lt;span class="s1">&amp;#39;https://youtube.com/watch?v=xxx&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">you-get -o /path/to/dir -O save_name --itag&lt;span class="o">=&lt;/span>&lt;span class="m">18&lt;/span> &lt;span class="s1">&amp;#39;https://youtube.com/watch?v=xxx&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>剪辑视频&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ffmpeg -ss 00:00:00 -t 00:00:00 -i input_file output_file
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>调整分辨率&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ffmpeg -i input_file -vf &lt;span class="nv">scale&lt;/span>&lt;span class="o">=&lt;/span>640:-1 output_file
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>调整帧率&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ffmpeg -i input_file -filter:v &lt;span class="nv">fps&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">fps&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">30&lt;/span> output_file
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>拆分帧图像&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ffmpeg -i input_file out_dir/frames_%10d.jpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>运行模拟器&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#terminal 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">roscore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#terminal 2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">roscd esim_ros
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">python scripts/generate_stamps_file.py -i /path/to/frames -r &lt;span class="m">60&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rosrun esim_ros esim_node &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --data_source&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --path_to_output_bag&lt;span class="o">=&lt;/span>/path/to/out.bag &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --path_to_data_folder&lt;span class="o">=&lt;/span>/path/to/frames &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --ros_publisher_frame_rate&lt;span class="o">=&lt;/span>&lt;span class="m">60&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --exposure_time_ms&lt;span class="o">=&lt;/span>10.0 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --use_log_image&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --log_eps&lt;span class="o">=&lt;/span>0.1 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --contrast_threshold_pos&lt;span class="o">=&lt;/span>0.15 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --contrast_threshold_neg&lt;span class="o">=&lt;/span>0.15
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这里对一些用到的参数进行说明&lt;/p>
&lt;ul>
&lt;li>&lt;code>-r 60&lt;/code>：源视频帧率&lt;/li>
&lt;li>&lt;code>--ros_publisher_frame_rate=60&lt;/code>：输出DVS数据帧率&lt;/li>
&lt;li>&lt;code>--exposure_time_ms=10.0&lt;/code>：DVS曝光时间&lt;/li>
&lt;li>&lt;code>--contrast_threshold_*=0.15&lt;/code>：对比度阈值，阈值高对应灵敏度低事件数少&lt;/li>
&lt;/ul>
&lt;p>注意这里输入的路径必须为&lt;strong>完整的绝对路径&lt;/strong>，不可使用环境变量（如&lt;code>~/&lt;/code>、&lt;code>./&lt;/code>）&lt;/p>
&lt;p>运行示例&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200414124624.webp" alt="">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>可视化&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#terminal 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">roscore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#terminal 2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rosrun dvs_renderer dvs_renderer events:&lt;span class="o">=&lt;/span>/cam0/events
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#terminal 3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rosbag play /path/to/out.bag -l -r 0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#terminal 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rqt_image_view /dvs_rendering
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>-r 0.1&lt;/code>为播放速率&lt;/p>
&lt;p>效果如下&lt;/p>
&lt;p>&lt;img src="https://img.ioyoi.me/20200414124524.webp" alt="">&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="数据解包">数据解包&lt;/h2>
&lt;p>由于模拟器输出的文件格式为&lt;code>rosbag&lt;/code>格式，需要特殊方式读出，这里使用&lt;code>rospkg&lt;/code>自带的Python API解包&lt;/p>
&lt;p>首先查看包中的信息&lt;/p>
&lt;pre tabindex="0">&lt;code>topics: /cam0/camera_info 1 msg : sensor_msgs/CameraInfo
/cam0/events 49 msgs @ 20.0 Hz : dvs_msgs/EventArray
/cam0/image_corrupted 49 msgs @ 20.0 Hz : sensor_msgs/Image
/cam0/image_raw 50 msgs @ 20.0 Hz : sensor_msgs/Image
&lt;/code>&lt;/pre>&lt;p>我们这里主要关注&lt;code>/cam0/events&lt;/code>，查看其对应类型&lt;code>dvs_msgs/EventArray&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>std_msgs/Header header
  uint32 seq
  time stamp
  string frame_id
uint32 height
uint32 width
dvs_msgs/Event[] events
  uint16 x
  uint16 y
  time ts
  bool polarity
&lt;/code>&lt;/pre>&lt;p>接下来将单msg信息整理至文本文件中，这里使用csv格式&lt;/p>
&lt;p>注意rosbag包仅支持python2版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">os&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">rosbag&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">bag2txt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">bag_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">out_path&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">rosbag&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Bag&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">bag_path&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">topic&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">msgs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">enumerate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_messages&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">topics&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;/cam0/events&amp;#39;&lt;/span>&lt;span class="p">])):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">with&lt;/span> &lt;span class="nb">open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">out_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;dvs_&lt;/span>&lt;span class="si">%04d&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)),&lt;/span> &lt;span class="s1">&amp;#39;w&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1">,&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">msgs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">width&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">msgs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">height&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">e&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">msgs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">events&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1">,&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1">,&lt;/span>&lt;span class="si">%d&lt;/span>&lt;span class="s1">,&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ts&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">nsecs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">polarity&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">b&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其文件格式为&lt;/p>
&lt;pre tabindex="0">&lt;code>width, height
event1_t, event1_x, event1_y, event1_polarity
event2_t, event2_x, event2_y, event2_polarity
&lt;/code>&lt;/pre>&lt;h2 id="注意事项">注意事项&lt;/h2>
&lt;ul>
&lt;li>尽量选择&lt;strong>高帧率&lt;/strong>的视频，当采样频率大于源视频帧率时，模拟效果很差&lt;/li>
&lt;li>尽量选择&lt;strong>无转场&lt;/strong>的视频，当视频出现转场时，会出现全屏事件点影响数据&lt;/li>
&lt;/ul>
&lt;h2 id="脚本">脚本&lt;/h2>
&lt;p>（由于本人的sh语法处于现学现用的状态，以下内容仅供参考&lt;/p>
&lt;h3 id="run_simsh">run_sim.sh&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/zsh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> /opt/ros/kinetic/setup.zsh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/setupeventsim.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Pre treatment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-&amp;gt;Start Pre Treatment&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gnome-terminal -x zsh -c &lt;span class="s2">&amp;#34;source /opt/ros/kinetic/setup.zsh; source ~/sim_ws/devel/setup.zsh; roscd esim_ros; python scripts/generate_stamps_file.py -i &lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2"> -r &lt;/span>&lt;span class="nv">$2&lt;/span>&lt;span class="s2">; exit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;-End Pre Treatment&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Start roscore&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-&amp;gt;Check Roscore&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ps_out&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>ps -ef &lt;span class="p">|&lt;/span> grep roscore &lt;span class="p">|&lt;/span> grep -v &lt;span class="s1">&amp;#39;grep&amp;#39;&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$ps_out&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;-Roscore Already Running&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gnome-terminal -x sh -c &lt;span class="s2">&amp;#34;roscore; exec bash&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;-Start Roscore&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Waiting roscore to start&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep 2s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Start simulation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-&amp;gt;Start Simulation&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gnome-terminal -x zsh -c &lt;span class="s2">&amp;#34;rosrun esim_ros esim_node \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">--data_source=2 \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">--path_to_output_bag=&lt;/span>&lt;span class="nv">$3&lt;/span>&lt;span class="s2"> \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">--path_to_data_folder=&lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2"> \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">--ros_publisher_frame_rate=60 \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">--exposure_time_ms=10.0 \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">--use_log_image=1 \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">--log_eps=0.1 \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">--contrast_threshold_pos=0.15 \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">--contrast_threshold_neg=0.15; exit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Succeed! Roscore can be shut down after simulation exits.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用方法&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">bash run_sim.sh /path/to/frames/folder 60&lt;span class="o">[&lt;/span>fps&lt;span class="o">]&lt;/span> /path/to/out.bag
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="run_viewsh">run_view.sh&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/zsh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> /opt/ros/kinetic/setup.zsh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/setupeventsim.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Start roscore&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-&amp;gt;Check Roscore&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ps_out&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>ps -ef &lt;span class="p">|&lt;/span> grep roscore &lt;span class="p">|&lt;/span> grep -v &lt;span class="s1">&amp;#39;grep&amp;#39;&lt;/span>&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$ps_out&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;-Roscore Already Running&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gnome-terminal -x sh -c &lt;span class="s2">&amp;#34;roscore; exec bash&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;-Start Roscore&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Start renderer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-&amp;gt;Start Renderer&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gnome-terminal -x zsh -c &lt;span class="s2">&amp;#34;source /opt/ros/kinetic/setup.zsh; source ~/sim_ws/devel/setup.zsh; rosrun dvs_renderer dvs_renderer events:=/cam0/events; exit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Start play&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-&amp;gt;Start Playing &lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2"> in rate &lt;/span>&lt;span class="nv">$2&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gnome-terminal -x zsh -c &lt;span class="s2">&amp;#34;rosbag play &lt;/span>&lt;span class="nv">$1&lt;/span>&lt;span class="s2"> -l -r &lt;/span>&lt;span class="nv">$2&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Start player&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;-&amp;gt;Start Player Window&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gnome-terminal -x zsh -c &lt;span class="s2">&amp;#34;rqt_image_view /dvs_rendering&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Done!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用方法&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">bash run_view.sh /path/to/out.bag 0.1&lt;span class="o">[&lt;/span>rate&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="配置ssh私钥">配置ssh私钥&lt;/h2>
&lt;p>参考&lt;a href="https://git-scm.com/book/zh/v2/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-%E7%94%9F%E6%88%90-SSH-%E5%85%AC%E9%92%A5">Git生成SSH公钥&lt;/a>&lt;/p>
&lt;p>由于vcs默认以ssh方式访问github repo，因此需要私钥以获得git@github.com访问权&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ssh-keygen -t rsa -C &lt;span class="s2">&amp;#34;email or username&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh-add ~/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat ~/.ssh/id_rsa.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将得到的公钥添加至github即可&lt;/p></description><category domain="https://ioyoi.me/tech/">tech</category><category domain="https://ioyoi.me/tags/dvs/">dvs</category><category domain="https://ioyoi.me/tags/tutorial/">tutorial</category></item><item><title>致我们曾失去的</title><link>https://ioyoi.me/life/what-we-have-lost/</link><guid isPermaLink="true">https://ioyoi.me/life/what-we-have-lost/</guid><pubDate>Mon, 23 Mar 2020 23:25:15 +0800</pubDate><author>3verness@gmail.com (EvernessW)</author><copyright>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)</copyright><description>&lt;p>&lt;img src="https://img.ioyoi.me/20200414130942.webp" alt="image-20200323233011408">&lt;/p>
&lt;p>2020年3月23日，谷歌退出中国十周年。&lt;/p>
&lt;p>十年里，我看到了墙内粉红的浪潮，也看到了墙外“Fake News”的偏见。&lt;/p>
&lt;p>我渐渐懂得，媒体本就是政治的工具，所谓的言论自由也不过是一句空谈。&lt;/p>
&lt;p>我唯一确信的是，当你学会独立思考的时候，你便不会被他人的言论冲昏头脑，只要站的足够高，便能看到，高墙内外，一样的满目疮痍。&lt;/p>
&lt;p>最后，也要时刻铭记，不要嘲笑别人的短视，看的越少，越容易感到幸福。&lt;/p></description><category domain="https://ioyoi.me/life/">life</category><category domain="https://ioyoi.me/tags/gfw/">gfw</category><category domain="https://ioyoi.me/tags/google/">google</category></item></channel></rss>